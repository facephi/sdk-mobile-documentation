# \[1.3.X\] Tokenizer Component - Android

Este documento hace referencia la **versión 1.3.X** del componente

## 1. Introducción

**SDK Mobile** es un conjunto de librerías (**Componentes**) que ofrece
una serie de funcionalidades y servicios, permitiendo a su vez su
integración en una aplicación Mobile de forma sencilla y totalmente
escalable. Dependiendo del caso de uso que se requiera, se deberá
realizar la instalación de unos determinados componentes. Su alto nivel
de modularidad permite que, en un futuro, se puedan añadir otros
componentes nuevos sin afectar en absoluto a los ya integrados en el
proyecto.

El *Componente* tratado en el documento actual recibe el nombre de
***Tokenizer Component***. Éste se encarga de codificar y tokenizar las
imágenes obtenidas en cualquiera de los demás componentes, en caso de
que sea necesario, para su posterior envío al **servicio de Facephi**.
En el este servicio se podrá descodificar y validar de forma segura.

### 1.1 Requisitos mínimos

La versión mínima de la SDK de Android requerida es la siguiente:

-   SDK mínima (minSdk): **23**

------------------------------------------------------------------------

## 2. Integración del componente

Antes de integrar este componente se recomienda leer la documentación
relativa a **<u>Core Component</u>** y seguir las instrucciones
indicadas en dicho documento.

En esta sección se explicará paso a paso cómo integrar el componente
actual en un proyecto ya existente.

### 2.1. Dependencias requeridas para la integración

Para evitar conflictos y problemas de compatibilidad, en caso de querer
instalar el componente en un proyecto que contenga una versión antigua
de las librerías de Facephi (*Widgets*), éstos deberán eliminarse por
completo antes de la instalación de los componentes de la
***SDKMobile***.

-   Actualmente las librerías de FacePhi se distribuyen de forma remota
    a través de diferentes gestores de dependencias. Las dependencias
    **obligatorias** que deberán haberse instalado previamente:

> *implementation "com.facephi.androidsdk:sdk:sdk_version"*
>
> *implementation "com.facephi.androidsdk:core:core_version"*

-   Para instalar el componente de Selphi deberá incluirse la siguiente
    entrada en el *build.gradle* de la aplicación:

> *implementation
> "com.facephi.androidsdk:tokenize_component:$sdk_tokenize_component_version"*

-   Una vez instaladas las dependencias, se podrá hacer uso de las
    diferentes funcionalidades del componente.

------------------------------------------------------------------------

## 3. Inicialización del componente

Cada uno de los componentes tiene un controlador (*Controller*) que
permitirá acceder a su propia funcionalidad. Antes de poder utilizarse,
cada uno de esos controladores deberá inicializarse correctamente.
**Debe evitarse terminantemente inicializar un controlador que no vaya a
usarse**. En este caso, los componentes serán los siguientes:

``` java
SdkController: Controlador general del SDK - Se creará el último ya que debe contener al resto de controladores previamente inicializados. Es obligatorio para TODOS los demás componentes.
TokenizeController: El controlador específico para este componente. 
```

El **SDKController** se encargará de cargar los diferentes controladores
del resto de componentes, y coordinará el flujo de todos los componentes
que se hayan inicializado. A continuación se muestra cómo se realizaría
el proceso de inicialización:

``` java
SDKController.initControllers(listOf(TokenizeController()))
```

------------------------------------------------------------------------

## 4. Uso del componente

Este componente no requiere de configuración previa, por lo que se puede
lanzar directamente usando el siguiente método:

``` java
private fun tokenizeFaceImage(data: Bitmap): String{
        val sdkResult =  SDKController.tokenizeFaceImage(data)

        Log.d(
            " TOKENIZE FACE RESULT:", 
                    "FinishStatus: ${sdkResult.finishStatus}\n " +
                    "ErrorType: ${sdkResult.errorType}\n " +
                    "Data: ${sdkResult.data?.length}\n "
        )
        return sdkResult.data ?: ""
    }
```

------------------------------------------------------------------------

## 5. Recepción del resultado

El resultado es un objeto *SDKResult* que devuelve el SDK tendrá siempre
3 campos:

*finishStatus:* Que nos indicará si la operación ha finalizado
correctamente. Posibles valores:

``` java
FinishStatus.STATUS_OK
FinishStatus.STATUS_ERROR
```

*errorType:* Si el finishStatus indica que ha habido un error, este
campo tendrá la descripción del mismo.

*data:* Devuelve un **ByteArray** con el con la imagen codificada.
