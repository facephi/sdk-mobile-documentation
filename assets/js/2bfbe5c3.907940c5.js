"use strict";(globalThis.webpackChunksdk_mobile_doc=globalThis.webpackChunksdk_mobile_doc||[]).push([[75155],{28453(e,n,i){i.d(n,{R:()=>s,x:()=>t});var o=i(96540);const l={},r=o.createContext(l);function s(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),o.createElement(r.Provider,{value:n},e.children)}},77905(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"Video_Call_Component","title":"Video Call","description":"1. Introduction","source":"@site/android_versioned_docs/version-2.3.X/Video_Call_Component.md","sourceDirName":".","slug":"/Video_Call_Component","permalink":"/sdk-mobile-documentation/docs/android/2.3.X/Video_Call_Component","draft":false,"unlisted":false,"tags":[],"version":"2.3.X","frontMatter":{},"sidebar":"sidebar","previous":{"title":"NFC Capture","permalink":"/sdk-mobile-documentation/docs/android/2.3.X/NFC_Component"},"next":{"title":"Video Identification","permalink":"/sdk-mobile-documentation/docs/android/2.3.X/Video_Id_Component"}}');var l=i(74848),r=i(28453);const s={},t="Video Call",a={},c=[{value:"1. Introduction",id:"1-introduction",level:2},{value:"2. Dependency",id:"2-dependency",level:2},{value:"3. Available Controllers",id:"3-available-controllers",level:2},{value:"4. Quick Launch",id:"4-quick-launch",level:2},{value:"5. Basic Configuration",id:"5-basic-configuration",level:2},{value:"6. Receiving the Result",id:"6-receiving-the-result",level:2},{value:"6.1 Handling Errors",id:"61-handling-errors",level:3},{value:"6.2 Handling Success \u2013 <code>data</code>",id:"62-handling-success--data",level:3},{value:"7. Advanced Information",id:"7-advanced-information",level:2},{value:"7.1 Advanced Component Configuration",id:"71-advanced-component-configuration",level:3},{value:"7.2 Screen Sharing",id:"72-screen-sharing",level:3},{value:"8. Component Customization",id:"8-component-customization",level:2},{value:"8.1 Texts",id:"81-texts",level:3},{value:"8.2 Colors",id:"82-colors",level:3},{value:"8.3 Animations",id:"83-animations",level:3},{value:"8.4 External Views",id:"84-external-views",level:3},{value:"9. Logs",id:"9-logs",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"video-call",children:"Video Call"})}),"\n",(0,l.jsx)(n.h2,{id:"1-introduction",children:"1. Introduction"}),"\n",(0,l.jsxs)(n.p,{children:["Video calling is performed with the ",(0,l.jsx)(n.strong,{children:"VideoCall Component"}),"."]}),"\n",(0,l.jsx)(n.p,{children:"This component manages the communication between a user and an agent (video assistance). Its main processes are:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Internal camera, microphone, and permission management."}),"\n",(0,l.jsx)(n.li,{children:"Connection to video services."}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Refer to the ",(0,l.jsx)(n.a,{href:"./Mobile_SDK",children:"Quickstart"})," section for basic SDK integration steps. This section adds information specific to launching this component."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"2-dependency",children:"2. Dependency"}),"\n",(0,l.jsx)(n.p,{children:"The component-specific dependency is:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'implementation "com.facephi.androidsdk:videocall_component:$version"\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"3-available-controllers",children:"3. Available Controllers"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"Controller"})}),(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"Description"})})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"VideoCallController"}),(0,l.jsx)(n.td,{children:"Main controller for video calls"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"StopVideoCallController"}),(0,l.jsx)(n.td,{children:"Controller to stop screen sharing and the ongoing call"})]})]})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"4-quick-launch",children:"4. Quick Launch"}),"\n",(0,l.jsx)(n.p,{children:"Once the SDK is initialized and a new operation has been created, you can launch the component using either controller."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'val response = SDKController.launch(\n    VideoCallController(VideoCallConfigurationData(...))\n)\n\nwhen (response) {\n    is SdkResult.Error   -> Napier.d("ERROR - ${response.error.name}")\n    is SdkResult.Success -> response.data\n}\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"5-basic-configuration",children:"5. Basic Configuration"}),"\n",(0,l.jsxs)(n.p,{children:["To launch the component, create a ",(0,l.jsx)(n.code,{children:"VideoCallConfigurationData"})," object. No parameters are required for basic usage:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"VideoCallConfigurationData()\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"6-receiving-the-result",children:"6. Receiving the Result"}),"\n",(0,l.jsxs)(n.p,{children:["The launch returns an ",(0,l.jsx)(n.code,{children:"SdkResult"}),". Handle success and error as follows:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'when (response) {\n    is SdkResult.Error   -> Napier.d("ERROR - ${response.error}")\n    is SdkResult.Success -> response.data\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"61-handling-errors",children:"6.1 Handling Errors"}),"\n",(0,l.jsxs)(n.p,{children:["Errors are returned as a ",(0,l.jsx)(n.code,{children:"VideoCallError"})," object. Possible values include:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"ACTIVITY_RESULT_MSG_ERROR: The result of the activity is incorrect."}),"\n",(0,l.jsx)(n.li,{children:"APPLICATION_CONTEXT_ERROR: Required application context is null"}),"\n",(0,l.jsx)(n.li,{children:"CANCEL_BY_USER: User has cancelled the process"}),"\n",(0,l.jsx)(n.li,{children:"CANCEL_LAUNCH: A general cancellation of the SDK has been done."}),"\n",(0,l.jsx)(n.li,{children:"COMPONENT_LICENSE_ERROR: The license of the component is not correct"}),"\n",(0,l.jsx)(n.li,{children:"EMPTY_LICENSE: License String is empty"}),"\n",(0,l.jsx)(n.li,{children:"FACE_DETECTION_TIMEOUT: No face detected"}),"\n",(0,l.jsx)(n.li,{children:"FETCH_DATA_ERROR: Error in the result collection"}),"\n",(0,l.jsx)(n.li,{children:"FLOW_ERROR: Error in the flow process"}),"\n",(0,l.jsx)(n.li,{children:"INITIALIZATION_ERROR: Initialisation error"}),"\n",(0,l.jsx)(n.li,{children:"MANAGER_NOT_INITIALIZED: Managers are nil"}),"\n",(0,l.jsx)(n.li,{children:"NETWORK_CONNECTION: Error in internet connection"}),"\n",(0,l.jsx)(n.li,{children:"NO_DATA_ERROR: Input data is null"}),"\n",(0,l.jsx)(n.li,{children:"OPERATION_NOT_CREATED: No operation in progress"}),"\n",(0,l.jsx)(n.li,{children:"PERMISSION_DENIED: User has denied permissions"}),"\n",(0,l.jsx)(n.li,{children:"SOCKET_ERROR: Error in the connection of services"}),"\n",(0,l.jsx)(n.li,{children:"TIMEOUT: Timeout in the process"}),"\n",(0,l.jsx)(n.li,{children:"VIDEO_ERROR: Error in video processing"}),"\n",(0,l.jsx)(n.li,{children:"UNKNOWN_ERROR"}),"\n",(0,l.jsx)(n.li,{children:"VIDEO_RECORDING_ACTIVE: Cannot start because the video recording process is active."}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"62-handling-success--data",children:["6.2 Handling Success \u2013 ",(0,l.jsx)(n.code,{children:"data"})]}),"\n",(0,l.jsxs)(n.p,{children:["On ",(0,l.jsx)(n.code,{children:"SdkResult.Success"}),", you receive a ",(0,l.jsx)(n.code,{children:"VideoCallResult"})," object. If the ",(0,l.jsx)(n.code,{children:"sharingScreen"})," flag is active, screen sharing has been enabled."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"7-advanced-information",children:"7. Advanced Information"}),"\n",(0,l.jsx)(n.h3,{id:"71-advanced-component-configuration",children:"7.1 Advanced Component Configuration"}),"\n",(0,l.jsxs)(n.p,{children:["Create a ",(0,l.jsx)(n.code,{children:"VideoCallConfigurationData"})," object with the following optional fields. These are typically only needed for on-premise server setups, as they are populated automatically otherwise:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"url"}),": Video socket endpoint URL."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"apiKey"}),": API key for socket authentication."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"tenantId"}),": Tenant identifier for the current client."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"activateScreenSharing"}),": Enable screen sharing within the call."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"timeout"}),": Time in milliseconds to wait for an agent to answer."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"72-screen-sharing",children:"7.2 Screen Sharing"}),"\n",(0,l.jsxs)(n.p,{children:["When screen sharing is enabled, the ",(0,l.jsx)(n.code,{children:"sharingScreen"})," property in the ",(0,l.jsx)(n.code,{children:"VideoCallResult"})," will be ",(0,l.jsx)(n.code,{children:"true"}),", indicating the call is still active:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'val response = SDKController.launch(\n    VideoCallController(\n        VideoCallConfigurationData(activateScreenSharing = true)\n    )\n)\n\nwhen (response) {\n    is SdkResult.Error   -> Napier.d("VideoCall: ERROR - ${response.error.name}")\n    is SdkResult.Success -> Napier.d("VideoCall: OK - ScreenSharing: ${response.data.sharingScreen}")\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["To stop the call, use the ",(0,l.jsx)(n.code,{children:"StopVideoCallController"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'val stopController = StopVideoCallController()\nstopController.setOutput { state ->\n    Napier.d("VIDEOCALL: SCREEN SHARING STATE: ${state.name}")\n}\nviewModelScope.launch {\n    SDKController.launch(stopController)\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["Possible ",(0,l.jsx)(n.code,{children:"state"})," values include:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"AGENT_HANGUP,\nPERMISSION_ERROR,\nNETWORK_CONNECTION_ERROR,\nUNKNOWN_ERROR,\nSHARING,\nCANCEL_BY_USER,\nFINISH\n"})}),"\n",(0,l.jsxs)(n.p,{children:["The call is fully terminated when ",(0,l.jsx)(n.code,{children:"state == FINISH"}),"."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"8-component-customization",children:"8. Component Customization"}),"\n",(0,l.jsxs)(n.p,{children:["Beyond SDK-level settings (",(0,l.jsx)(n.a,{href:"./Mobile_SDK_advanced",children:"Advanced Settings"}),"), this component allows UI customization."]}),"\n",(0,l.jsx)(n.h3,{id:"81-texts",children:"8.1 Texts"}),"\n",(0,l.jsx)(n.p,{children:"To override default strings, include an XML file in your app:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Waiting --\x3e\n    <string name="video_call_component_text_waiting_agent_title">Conectando con un asistente\u2026</string>\n    \x3c!-- Process --\x3e\n    <string name="video_call_component_agent">Asistente</string>\n    <string name="video_call_component_local">T\xfa</string>\n    <string name="video_call_component_exit">Salir</string>\n    <string name="video_call_component_text_finish">La video asistencia ha finalizado</string>\n    <string name="video_call_component_accesibility_phone">Tel\xe9fono</string>\n    <string name="video_call_component_accesibility_switch">Cambiar c\xe1mara</string>\n    \x3c!-- Diagnostic --\x3e\n    <string name="video_call_component_restart">Repetir llamada</string>\n    <string name="video_call_component_timeout_title">Tiempo superado</string>\n    <string name="video_call_component_timeout_desc">No se ha podido contactar con un asistente.</string>\n    <string name="video_call_component_internal_error_title">Hubo un problema t\xe9cnico</string>\n    <string name="video_call_component_internal_error_desc">No se ha podido contactar con un asistente.</string>\n'})}),"\n",(0,l.jsx)(n.h3,{id:"82-colors",children:"8.2 Colors"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<color name="colorVideoCallActionsBackground">#30333d</color>\n<color name="colorVideoCallButtonBackground">#FF526080</color>\n'})}),"\n",(0,l.jsx)(n.h3,{id:"83-animations",children:"8.3 Animations"}),"\n",(0,l.jsxs)(n.p,{children:["To override Lottie animations, place files with the same names in your ",(0,l.jsx)(n.code,{children:"res/raw/"})," folder:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"video_call_anim_waiting.json\n"})}),"\n",(0,l.jsx)(n.h3,{id:"84-external-views",children:"8.4 External Views"}),"\n",(0,l.jsx)(n.p,{children:"It is possible to completely modify the component screens while maintaining their functionality and navigation. To do so, the following interfaces must be implemented:"}),"\n",(0,l.jsx)(n.p,{children:"Error diagnosis screen:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"\ninterface IVideoCallErrorDiagnosticView {\n    @Composable\n    fun Content(\n        error: VideoCallError,\n        onRetry: () -> Unit,\n        onClose: () -> Unit,\n    )\n}\n\n"})}),"\n",(0,l.jsx)(n.p,{children:'Once the classes that implement the interfaces have been created, the "customViews" parameter can be added at component launch to be used in the SDK.'}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"9-logs",children:"9. Logs"}),"\n",(0,l.jsxs)(n.p,{children:["Filter console logs for this component with: ",(0,l.jsx)(n.code,{children:'"VIDEO_CALL:"'})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);