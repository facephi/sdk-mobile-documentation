"use strict";(globalThis.webpackChunksdk_mobile_doc=globalThis.webpackChunksdk_mobile_doc||[]).push([[90169],{22365(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Video_Recording_Component","title":"Video Recording Component","description":"0. SDK Mobile baseline requirements","source":"@site/ios_versioned_docs/version-2.4.X/Video_Recording_Component.md","sourceDirName":".","slug":"/Video_Recording_Component","permalink":"/sdk-mobile-documentation/docs/ios/2.4.X/Video_Recording_Component","draft":false,"unlisted":false,"tags":[],"version":"2.4.X","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Video Id Component","permalink":"/sdk-mobile-documentation/docs/ios/2.4.X/Video_Id_Component"},"next":{"title":"File Upload and QR Management","permalink":"/sdk-mobile-documentation/docs/ios/2.4.X/Capture_Component"}}');var o=i(74848),s=i(28453);const r={},a="Video Recording Component",d={},c=[{value:"0. SDK Mobile baseline requirements",id:"0-sdk-mobile-baseline-requirements",level:2},{value:"1. Introduction",id:"1-introduction",level:2},{value:"1.1 Minimum requirements",id:"11-minimum-requirements",level:2},{value:"2. Integration of the component",id:"2-integration-of-the-component",level:2},{value:"2.1 Dependencies required for integration",id:"21-dependencies-required-for-integration",level:3},{value:"2.1.1 Cocoapods",id:"211-cocoapods",level:4},{value:"2.1.2 SPM",id:"212-spm",level:4},{value:"3. Start new operation",id:"3-start-new-operation",level:2},{value:"4. Use of component",id:"4-use-of-component",level:2},{value:"4.1 Creating the instance",id:"41-creating-the-instance",level:3},{value:"4.2 Configuring the instance",id:"42-configuring-the-instance",level:3},{value:"4.3 Launching the component",id:"43-launching-the-component",level:3},{value:"5. Component customization",id:"5-component-customization",level:2},{value:"5.1 Colors",id:"51-colors",level:3},{value:"5.2 Texts",id:"52-texts",level:3},{value:"6. Common errors and problems",id:"6-common-errors-and-problems",level:2},{value:"6.1 At compile time",id:"61-at-compile-time",level:3},{value:"6.1.1 Write permissions - Sandbox: rsync.samba(67364) deny(1) file-write-create",id:"611-write-permissions---sandbox-rsyncsamba67364-deny1-file-write-create",level:4},{value:"6.2 At runtime",id:"62-at-runtime",level:3},{value:"6.2.0 Debug an extension (.appex)",id:"620-debug-an-extension-appex",level:4},{value:"6.2.1 Starscream - EXC_BAD_ACCESS",id:"621-starscream---exc_bad_access",level:4},{value:"6.2.2 QuickTime Player",id:"622-quicktime-player",level:4},{value:"6.2.3 Screen Sharing doesn&#39;t get started",id:"623-screen-sharing-doesnt-get-started",level:4}];function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"video-recording-component",children:"Video Recording Component"})}),"\n",(0,o.jsx)(n.h2,{id:"0-sdk-mobile-baseline-requirements",children:"0. SDK Mobile baseline requirements"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"SDK Mobile"})," is a set of libraries (",(0,o.jsx)(n.strong,{children:"Components"}),") that offers\na series of functionalities and services, allowing in turn its\nintegration into a mobile application in a simple and completely\nscalable. Depending on the use case required, it must be\nperform the installation of certain components. Its high level\nModularity allows, in the future, to add other\nnew components without affecting in any way those already integrated into the\nproject."]}),"\n",(0,o.jsxs)(n.p,{children:["For more information on the base configuration, go to the ",(0,o.jsx)(n.a,{href:"./Mobile_SDK",children:"Getting Started"})," section."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"1-introduction",children:"1. Introduction"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.em,{children:"Component"})," discussed in the current document is called\n",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"VideoRecording Component"})}),". This is responsible for capturing the screen\nof the device in the background. It is mainly oriented for\nrecording of the onboarding process."]}),"\n",(0,o.jsx)(n.h2,{id:"11-minimum-requirements",children:"1.1 Minimum requirements"}),"\n",(0,o.jsx)(n.p,{children:"The minimum iOS SDK version required is as follows:"}),"\n",(0,o.jsxs)(n.p,{children:["Minimum iOS version: ",(0,o.jsx)(n.strong,{children:"13"})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"2-integration-of-the-component",children:"2. Integration of the component"}),"\n",(0,o.jsx)("div",{class:"warning",children:(0,o.jsxs)(n.p,{children:[(0,o.jsx)("span",{class:"warning",children:"\u26a0\ufe0f"}),"\nBefore integrating this component, it is recommended to read the\ndocumentation related to ",(0,o.jsx)(n.a,{href:"./Mobile_SDK#2-initial-integration",children:"Initial Integration"})," and follow its instructions."]})}),"\n",(0,o.jsx)(n.p,{children:"This section will explain step by step how to integrate the current\ncomponent into an existing project."}),"\n",(0,o.jsx)(n.h3,{id:"21-dependencies-required-for-integration",children:"2.1 Dependencies required for integration"}),"\n",(0,o.jsx)(n.p,{children:"Currently FacePhi libraries are distributed remotely through different dependency managers."}),"\n",(0,o.jsx)(n.h4,{id:"211-cocoapods",children:"2.1.1 Cocoapods"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.strong,{children:"mandatory"})," dependencies that must have been previously installed (adding them to the project's Podfile file) are:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"pod 'FPHISDKMainComponent'\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["It is recommended to also use the VideoRecording component with the tracking component (",(0,o.jsx)(n.code,{children:"FPHISDKTrackingComponent"}),")."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"To install the current component, the following entry must be included in the application's Podfile:"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"pod 'FPHISDKVideoRecordingComponent'\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"This dependency must be declared within the target of the app and the extension (the latter will be explained below)"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"An example of what the Podfile would look like:"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"target 'demoApp' do\n...\n   pod 'FPHISDKMainComponent', 'X.Y.Z'\n   pod 'FPHISDKVideoRecordingComponent', 'A.B.C'\n   pod 'FPHISDKTrackingComponent', 'D.E.F' ### Optional, recommended\n...\nend\ntarget 'VideoRecording' do ### Our extension target\n   use_frameworks! ### We want to use frameworks instead of Static Libs\n   pod 'FPHISDKVideoRecordingComponent', 'A.B.C'\nend\n"})}),"\n",(0,o.jsx)(n.p,{children:"NOTE: You have to be careful to put the extension target outside the application target. Failure to do so would cause the application pods to also be compiled into the extension, resulting in collateral problems."}),"\n",(0,o.jsx)(n.h4,{id:"212-spm",children:"2.1.2 SPM"}),"\n",(0,o.jsx)(n.p,{children:"We add our dependency to the project and assign it to the VideoRecording target:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Image",src:i(91950).A+"",width:"2170",height:"1218"})}),"\n",(0,o.jsx)(n.p,{children:"We must then also add it to the target of the app in General \u2192 Framework, Libraries and Embedded Content:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Image",src:i(75095).A+"",width:"1260",height:"1012"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"3-start-new-operation",children:"3. Start new operation"}),"\n",(0,o.jsxs)(n.p,{children:["In order to generate the associated information correctly in the platform, the ",(0,o.jsx)(n.strong,{children:"newOperation"})," command must be executed first."]}),"\n",(0,o.jsxs)("div",{class:"note",children:[(0,o.jsxs)(n.p,{children:[(0,o.jsx)("span",{class:"note",children:"\u2139\ufe0f"}),"\nThis command must have been executed ",(0,o.jsx)(n.strong,{children:"before launch"}),"."]}),(0,o.jsxs)(n.p,{children:["To learn more about how to start a new operation, it is recommended to consult the ",(0,o.jsx)(n.a,{href:"./Mobile_SDK#4-start-a-new-operation",children:"Start a new operation"})," documentation, which details and explains what this process consists of."]})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"4-use-of-component",children:"4. Use of component"}),"\n",(0,o.jsx)(n.h3,{id:"41-creating-the-instance",children:"4.1 Creating the instance"}),"\n",(0,o.jsxs)(n.p,{children:["The functionality is configured and launched with a class called ",(0,o.jsx)(n.code,{children:"VideoRecordingController"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["To create an instance we need to use its ",(0,o.jsx)(n.code,{children:"init()"})," method:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-swift",children:"init(data: VideoRecordingConfigurationData?, extensionIdentifier: String?, output: @escaping (SdkResult<String>) -> Void)\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"data"}),": The configuration object"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"extensionIdentifier"}),": The Bundle Identifier of the ",(0,o.jsx)(n.code,{children:"Broadcast Upload Extension"})," target we created."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"output"}),": The callback that is called when the instance's start is resolved (either with success or failure). For this component, the success is called when the connection with the backend is established and the screenshare has started."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"42-configuring-the-instance",children:"4.2 Configuring the instance"}),"\n",(0,o.jsxs)(n.p,{children:["With the configuration data (",(0,o.jsx)(n.em,{children:"VideoRecordingConfigurationData"}),") you can also modify:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Optional data that is normally included within the license"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"url"}),": Path to the video socket."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"apiKey"}),": ApiKey required for connection to the video socket."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"tenantId"}),": Tenant identifier that refers to the current client, necessary for the connection to the video service."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"extractionTimeout"}),": How long (milliseconds) will the component wait for the socket before generating a timeout error."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"showDiagnostic"}),": If an error occurs, the error will be displayed on the screen in addition to being sent with the output."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"43-launching-the-component",children:"4.3 Launching the component"}),"\n",(0,o.jsxs)(n.p,{children:["Once we have set a new operation (",(0,o.jsx)(n.a,{href:"#3-start-new-operation",children:"Section 3"}),") and have an instance of our controller, we can start it.\nThere are two ways to launch it:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"[WITHOUT TRACKING]"})," This call allows the component's functionality to be launched normally, but ",(0,o.jsx)(n.strong,{children:"no event will be tracked"})," to the tracking server:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-swift",children:'let controller = VideoRecordingController(data: VideoRecordingConfigurationData(), extensionName: "VideoRecording", output: { _ in })\nSDKController.shared.launchMethod(controller: controller)\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"[WITH TRACKING]"})," This call allows the component's functionality to be launched normally, but internal events to the tracking server will be tracked:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-swift",children:'let controller = VideoRecordingController(data: VideoRecordingConfigurationData(), extensionName: "VideoRecording", output: { _ in })\nSDKController.shared.launch(controller: controller)\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Note:"})}),"\n",(0,o.jsx)("blockquote",{children:(0,o.jsxs)("p",{children:[(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.strong,{children:"launch"})," method should be used ",(0,o.jsx)(n.strong,{children:"by default"}),". This method allows you to use ",(0,o.jsx)(n.strong,{children:"tracking"})," if your component is activated, and will not use it when it is deactivated (or the component is not installed)."]}),(0,o.jsxs)(n.p,{children:["On the contrary, the ",(0,o.jsx)(n.strong,{children:"launchMethod"})," method covers a special case, in which the integrator has tracking installed and activated, but in a given flow within the application they do not want to track information. In that case, this method is used to prevent that information from being sent to the platform."]})]})}),"\n",(0,o.jsx)(n.h2,{id:"5-component-customization",children:"5. Component customization"}),"\n",(0,o.jsx)(n.h3,{id:"51-colors",children:"5.1 Colors"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"The only customizable color is:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"case sdkPrimaryColor\n"})}),"\n",(0,o.jsx)(n.p,{children:"To modify it, you need to override the asset by creating a similar named asset in the Bundle.main of your application."}),"\n",(0,o.jsx)(n.h3,{id:"52-texts",children:"5.2 Texts"}),"\n",(0,o.jsx)(n.p,{children:"The literals used in the component are:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'"video_recording_component_title_message"="Allow screen capture in %@?";\n"video_recording_component_desc_message"="This application will capture your screen and you will not have a chance to review it.";\n"video_recording_component_cancel_message"="Don\'t allow";\n"video_recording_component_confirm_message"="Record screen";\n'})}),"\n",(0,o.jsx)(n.h2,{id:"6-common-errors-and-problems",children:"6. Common errors and problems"}),"\n",(0,o.jsx)(n.h3,{id:"61-at-compile-time",children:"6.1 At compile time"}),"\n",(0,o.jsx)(n.h4,{id:"611-write-permissions---sandbox-rsyncsamba67364-deny1-file-write-create",children:"6.1.1 Write permissions - Sandbox: rsync.samba(67364) deny(1) file-write-create"}),"\n",(0,o.jsx)(n.p,{children:"If you see a compilation error regarding write permissions:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Image",src:i(67516).A+"",width:"1570",height:"282"})}),"\n",(0,o.jsxs)(n.p,{children:["Check the status in Build Settings of the parameter ",(0,o.jsx)(n.strong,{children:"ENABLE_USER_SCRIPT_SANDBOXING"}),", its value must be ",(0,o.jsx)(n.strong,{children:"NO"}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Image",src:i(3429).A+"",width:"1580",height:"484"})}),"\n",(0,o.jsx)(n.h3,{id:"62-at-runtime",children:"6.2 At runtime"}),"\n",(0,o.jsx)(n.h4,{id:"620-debug-an-extension-appex",children:"6.2.0 Debug an extension (.appex)"}),"\n",(0,o.jsx)(n.p,{children:"To debug an extension, we need to attach it to a launchable target. In this case, that would be our main app's target."}),"\n",(0,o.jsx)(n.h4,{id:"621-starscream---exc_bad_access",children:"6.2.1 Starscream - EXC_BAD_ACCESS"}),"\n",(0,o.jsx)(n.p,{children:"When launching the component an error may appear in the Starscream dependency:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Image",src:i(33002).A+"",width:"1510",height:"660"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"Workaround"})})," - Upload the minimum Pod version from iOS11 to iOS12:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Image",src:i(64915).A+"",width:"1588",height:"250"})}),"\n",(0,o.jsx)(n.h4,{id:"622-quicktime-player",children:"6.2.2 QuickTime Player"}),"\n",(0,o.jsx)(n.p,{children:"When launching the component, if the iPhone is connected and already sharing screen through a QuickTime Player recording session, it won't work."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"Solution"})})," - Close the QuickTime Player session."]}),"\n",(0,o.jsx)(n.h4,{id:"623-screen-sharing-doesnt-get-started",children:"6.2.3 Screen Sharing doesn't get started"}),"\n",(0,o.jsx)(n.p,{children:"When launching the component, we can't see the native prompt for screen sharing or we see it but it doesn't get started."}),"\n",(0,o.jsx)(n.p,{children:"Possible Cause: The extension created in your app has a Bundle Identifier. If that identifier has changed, maybe the old one is still persisted in the cache."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"Possible Solution"})})," - Remove the app, and install it again. Restart the device if needed."]}),"\n",(0,o.jsx)(n.p,{children:"Possible Cause: The device already has a extension with the same Bundle Identifier."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"Possible Solution"})})," - Make sure the extension's Bundle Identifier is unique"]}),"\n",(0,o.jsx)(n.p,{children:"Possible Cause: The device already has a extension with the same Name."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"Possible Solution"})})," - Make sure that you are launching/selecting the correct screensharing extension. It is recommended to use (in development at least) unique names to avoid misunderstandings."]}),"\n",(0,o.jsx)(n.p,{children:"Possible Cause: The extensionName's string value injected in the VideoRecordingController initialization isn't correct."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"Possible Solution"})})," - Make sure that you initialize send"]}),"\n",(0,o.jsx)(n.p,{children:"Possible Cause: The extension's target is not referenced or doesn't install the FPHISDKVideoRecordingComponent dependency in the Podfile."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"Possible Solution"})})," - Check ",(0,o.jsx)(n.a,{href:"#2.4.1-cocoapods",children:"Cocoapods Section"})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},91950(e,n,i){i.d(n,{A:()=>t});const t=i.p+"assets/images/videoRecording-010-305c0dc6e8ba588fae482db4b1ff817d.png"},75095(e,n,i){i.d(n,{A:()=>t});const t=i.p+"assets/images/videoRecording-011-4dbde20e070d491c2ddc17a7cb98fa89.png"},67516(e,n,i){i.d(n,{A:()=>t});const t=i.p+"assets/images/videoRecording-012-754d49db4b70295687ba933874acda8f.png"},3429(e,n,i){i.d(n,{A:()=>t});const t=i.p+"assets/images/videoRecording-013-ac369fe2aaeeb1149ac7a0cf63b425f6.png"},33002(e,n,i){i.d(n,{A:()=>t});const t=i.p+"assets/images/videoRecording-014-2a25737a313f66bb30fbfaf0db333706.png"},64915(e,n,i){i.d(n,{A:()=>t});const t=i.p+"assets/images/videoRecording-015-bb86fd0a9e0835fd15cfc2d56e50099a.png"},28453(e,n,i){i.d(n,{R:()=>r,x:()=>a});var t=i(96540);const o={},s=t.createContext(o);function r(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);