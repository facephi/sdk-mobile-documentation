"use strict";(self.webpackChunksdk_mobile_doc=self.webpackChunksdk_mobile_doc||[]).push([[4149],{10316:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"Flow_Component","title":"Flow Component","description":"0. SDK Mobile baseline requirements","source":"@site/ios_versioned_docs/version-2.2.X/Flow_Component.md","sourceDirName":".","slug":"/Flow_Component","permalink":"/sdk-mobile-documentation/docs/ios/2.2.X/Flow_Component","draft":false,"unlisted":false,"tags":[],"version":"2.2.X","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Capture Component","permalink":"/sdk-mobile-documentation/docs/ios/2.2.X/Capture_Component"},"next":{"title":"Sample Applications","permalink":"/sdk-mobile-documentation/docs/ios/2.2.X/Sample_applications_use"}}');var o=t(74848),r=t(28453);const i={},s="Flow Component",a={},d=[{value:"0. SDK Mobile baseline requirements",id:"0-sdk-mobile-baseline-requirements",level:2},{value:"1. Introduction",id:"1-introduction",level:2},{value:"2. Integration of the component",id:"2-integration-of-the-component",level:2},{value:"2.1. Dependencies required for integration",id:"21-dependencies-required-for-integration",level:3},{value:"3. Start a new operation",id:"3-start-a-new-operation",level:2},{value:"4. Available controllers",id:"4-available-controllers",level:2},{value:"4.1. Available controllers for flow",id:"41-available-controllers-for-flow",level:3},{value:"5. SDK initialisation with flow",id:"5-sdk-initialisation-with-flow",level:2},{value:"6. Using the component",id:"6-using-the-component",level:2},{value:"6.1 Launching a published stream",id:"61-launching-a-published-stream",level:4},{value:"7. Receipt of the result",id:"7-receipt-of-the-result",level:2},{value:"7.1. Receipt of errors",id:"71-receipt-of-errors",level:3},{value:"7.2. Receiving successful execution - <em>data</em>",id:"72-receiving-successful-execution---data",level:3}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"flow-component",children:"Flow Component"})}),"\n",(0,o.jsx)(n.h2,{id:"0-sdk-mobile-baseline-requirements",children:"0. SDK Mobile baseline requirements"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"SDK Mobile"})," is a set of libraries (",(0,o.jsx)(n.strong,{children:"Components"}),") that offer a series of\nfunctionalities and services, allowing their integration into a Mobile\napplication in a simple and fully scalable way. Depending on the use\ncase that is required, certain components must be installed. Its high\nlevel of modularity allows other new components to be added in the\nfuture without affecting those already integrated in the project."]}),"\n",(0,o.jsxs)(n.p,{children:["For more information on the base configuration, go to the ",(0,o.jsx)(n.a,{href:"./Mobile_SDK#11-minimum-requirements",children:"Getting Started"})," section."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"1-introduction",children:"1. Introduction"}),"\n",(0,o.jsxs)(n.p,{children:["This Flow document is an ",(0,o.jsx)(n.strong,{children:"annex"})," to the common ",(0,o.jsx)(n.strong,{children:"SDK"}),", as this functionality is contained in the ",(0,o.jsx)(n.strong,{children:"SDK"})," component itself."]}),"\n",(0,o.jsxs)(n.p,{children:["Flow is a functionality that connects the ",(0,o.jsx)(n.strong,{children:"Design Studio"})," section of the ",(0,o.jsx)(n.strong,{children:"Platform"})," with the SDK and the implementation done by thethe ",(0,o.jsx)(n.strong,{children:"Platform"})," with the SDK and the client implementation.\nThrough a Flow identifier, you will be able to launch a flow designed on the web, which can contain up to which can contain from 1 to N steps of the existing components in the SDK."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"2-integration-of-the-component",children:"2. Integration of the component"}),"\n",(0,o.jsx)("div",{class:"warning",children:(0,o.jsxs)(n.p,{children:[(0,o.jsx)("span",{class:"warning",children:"\u26a0\ufe0f"}),"\nBefore integrating this component, it is recommended to read the\ndocumentation related to ",(0,o.jsx)(n.a,{href:"./Mobile_SDK#2-initial-integration",children:"Initial Integration"})," and follow the instructions given in that document."]})}),"\n",(0,o.jsx)(n.p,{children:"This section will explain step by step how to integrate the current\ncomponent into an existing project."}),"\n",(0,o.jsx)(n.h3,{id:"21-dependencies-required-for-integration",children:"2.1. Dependencies required for integration"}),"\n",(0,o.jsxs)(n.p,{children:["No ",(0,o.jsx)(n.strong,{children:"any extra dependencies"})," are required to use Flow."]}),"\n",(0,o.jsxs)(n.p,{children:["You ",(0,o.jsx)("u",{children:"must add the required dependencies of each component"}),"\nthat you want to launch within Flow. If you want to launch ",(0,o.jsx)(n.strong,{children:"facial recognition,"})," it should be ",(0,o.jsx)(n.strong,{children:"necessary"})," to install the ",(0,o.jsx)(n.strong,{children:"Selphi component"}),", and so on with the rest of the components."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"3-start-a-new-operation",children:"3. Start a new operation"}),"\n",(0,o.jsx)(n.p,{children:"When initiating the launch of a Flow operation, a new operation is generated internally in a fully transparent manner.\ninternally, a new operation is generated in a completely transparent way."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:(0,o.jsx)("u",{children:"It is not necessary"})})," to perform a new operation beforehand."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"4-available-controllers",children:"4. Available controllers"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Controller"})}),(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Description"})})]})}),(0,o.jsx)(n.tbody,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"FlowController"}),(0,o.jsx)(n.td,{children:"Flow main controller. Launch of published flows."})]})})]}),"\n",(0,o.jsx)(n.h3,{id:"41-available-controllers-for-flow",children:"4.1. Available controllers for flow"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Controller"})}),(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Description"})})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"SelphiController"}),(0,o.jsx)(n.td,{children:"Facial recognition"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"SelphIDController"}),(0,o.jsx)(n.td,{children:"Document recognition"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"VoiceController"}),(0,o.jsx)(n.td,{children:"Voice capture"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"PhingersController"}),(0,o.jsx)(n.td,{children:"Fingerprint Capture"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"NFCController"}),(0,o.jsx)(n.td,{children:"NFC"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"QrReaderController"}),(0,o.jsx)(n.td,{children:"QR Reader"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"InvoiceReaderController"}),(0,o.jsx)(n.td,{children:"Invoice capture"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"VideoIdController"}),(0,o.jsx)(n.td,{children:"Video Identification"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"VideoCallController"}),(0,o.jsx)(n.td,{children:"Video Call"})]})]})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"5-sdk-initialisation-with-flow",children:"5. SDK initialisation with flow"}),"\n",(0,o.jsxs)(n.p,{children:["The SDK initialisation function has the ",(0,o.jsx)(n.em,{children:"activateFlow"})," parameter to manage its activation:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"SDKController.shared.initSdk(\n     ...\n     activateFlow: true,\n     ...\n)\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"6-using-the-component",children:"6. Using the component"}),"\n",(0,o.jsx)(n.h4,{id:"61-launching-a-published-stream",children:"6.1 Launching a published stream"}),"\n",(0,o.jsxs)(n.p,{children:["It will use the ",(0,o.jsx)(n.em,{children:"FlowController"})," to launch a flow that the client has published on the platform, the flowID must be indicated in the FlowConfigurationData object:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public func launchFlow(customerId: String, viewController: UIViewController, output: @escaping (SdkResult<String>) -> Void, offline: Bool = false) {\n//        ThemeSelphidManager.setup(theme: CustomThemeSelphID())\n        let selphidController = SelphIDController(data: nil, output: {\n            print("SelphidController output: \\($0.errorType)")\n        }, viewController: viewController)\n        \n        let selphiController = SelphiController(data: nil, output: {\n            print("SelphiController output: \\($0.errorType)")\n        }, viewController: viewController)\n        \n        let externalStepController = ExternalStepController(output: {\n            print("externalStepController output")\n        })\n        \n        let controllers: [IFlowableController] =\n        [selphidController, selphiController, selphixController, nfcController, qrReaderController,\n         invoiceReaderController, phingersController, videoIdController, videoCallController, voiceController, externalStepController]\n        \n        let flowConfigurationData = FlowConfigurationData(\n            id: "flowId",\n            controllers: controllers,\n            customerId: customerId)\n        \n        let flowOutput: (SdkFlowResult) -> Void = { sdkFlowResult in\n            print("FlowController: STEP - \\(sdkFlowResult.step)")\n            print("FlowController: FLOW FINISH: \\(sdkFlowResult.flowFinish)")\n            print("FlowController: SDKResult: ERROR=\\(sdkFlowResult.result.errorType) - DATA=\\(sdkFlowResult.result.data)")\n\n            switch (sdkFlowResult.result.data) {\n            case (let data as SelphIDResult):\n                break\n            case (let data as SelphiResult):\n                break\n            default: break\n            }\n        }\n        \n        let flowController = offline\n        ? FlowOfflineController(flowConfigurationData: flowConfigurationData, output: flowOutput)\n        : FlowController(flowConfigurationData: flowConfigurationData, output: flowOutput)\n        \n        self.flowController = flowController\n        SDKController.shared.launch(controller: flowController)\n    }\n\n     func flowNextStep() {\n        self.flowController?.launchNextStep()\n    }\n    \n    func cancelFlow() {\n        self.flowController?.cancelFlow()\n        self.flowController = nil\n    }\n\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"7-receipt-of-the-result",children:"7. Receipt of the result"}),"\n",(0,o.jsx)(n.p,{children:"The flow result will have 3 fields:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:'step: Information on the flow step that has been performed. With the\nvalue of "key" it will be possible to identify the component executed in the step.'}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["result: The controllers will return the required information in SdkResult format\n-more details in the Android Mobile SDK's ",(0,o.jsx)("a",{href:"Mobile_SDK#6-result-return",rel:"nofollow",children:"6. Result return"})," section-."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"flowFinish: Flag indicating whether the process has finished."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"71-receipt-of-errors",children:"7.1. Receipt of errors"}),"\n",(0,o.jsxs)(n.p,{children:["In the result, inside ",(0,o.jsx)(n.em,{children:"sdkFlowResult"})," we will have\n",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"sdkFlowResult.step"})})," to identify which component has failed, and\nthe ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"sdkFlowResult.result.errorType"})})," containing the error that occurred."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'print("FlowController: STEP - \\(sdkFlowResult.step)")\nprint("FlowController: SDKResult: ERROR=\\(sdkFlowResult.result.errorType) - DATA=\\(sdkFlowResult.result.data)")\n'})}),"\n",(0,o.jsxs)(n.h3,{id:"72-receiving-successful-execution---data",children:["7.2. Receiving successful execution - ",(0,o.jsx)(n.em,{children:"data"})]}),"\n",(0,o.jsx)(n.p,{children:"On successful execution of a stream, the corresponding components shall be launched until completion of the stream or until a\ncomponents shall be launched until completion or until an error occurs."}),"\n",(0,o.jsx)(n.p,{children:"After checking the results, we should check whether the flow has been finished or there are still steps left, in order to be able to manage the next steps outside the SDK."}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'let flowOutput: (SdkFlowResult) -> Void = { sdkFlowResult in\n            print("FlowController: STEP - \\(sdkFlowResult.step)")\n            print("FlowController: FLOW FINISH: \\(sdkFlowResult.flowFinish)")\n            print("FlowController: SDKResult: ERROR=\\(sdkFlowResult.result.errorType) - DATA=\\(sdkFlowResult.result.data)")\n            \n            switch (sdkFlowResult.result.data) {\n            case (let data as SelphIDResult):\n                break\n            case (let data as SelphiResult):\n                break\n            case (let data as SelphixResult):\n                break\n            default: break\n            }\n        }\n'})}),"\n",(0,o.jsx)(n.p,{children:"After checking the results, we should check whether the flow has been\nfinished or there are still steps left, in order to be able to manage the next steps\noutside the SDK."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'print("FlowController: FLOW FINISH: \\(sdkFlowResult.flowFinish)")\n'})}),"\n",(0,o.jsxs)(n.p,{children:["In case there is an external step, at the end of this step, the ",(0,o.jsx)(n.em,{children:"launchNextStep"})," method must be called."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"func flowNextStep() {\n     self.flowController?.launchNextStep()\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["If you want to cancel it, you must call ",(0,o.jsx)(n.em,{children:"cancelFlow"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"func cancelFlow() {\n     self.flowController?.cancelFlow()\n     self.flowController = nil\n}\n"})}),"\n",(0,o.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>s});var l=t(96540);const o={},r=l.createContext(o);function i(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);