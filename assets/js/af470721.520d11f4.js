"use strict";(self.webpackChunksdk_mobile_doc=self.webpackChunksdk_mobile_doc||[]).push([[6761],{20474:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"Voice_Component","title":"Voice Capture","description":"1. Introduction","source":"@site/docs/android/Voice_Component.md","sourceDirName":".","slug":"/Voice_Component","permalink":"/sdk-mobile-documentation/docs/android/next/Voice_Component","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Fingerprint Capture","permalink":"/sdk-mobile-documentation/docs/android/next/Phingers_Component"},"next":{"title":"NFC Capture","permalink":"/sdk-mobile-documentation/docs/android/next/NFC_Component"}}');var o=i(74848),r=i(28453);const t={},c="Voice Capture",a={},l=[{value:"1. Introduction",id:"1-introduction",level:2},{value:"2. Dependency",id:"2-dependency",level:2},{value:"3. Available Controllers",id:"3-available-controllers",level:2},{value:"4. Quick Launch",id:"4-quick-launch",level:2},{value:"5. Basic Configuration",id:"5-basic-configuration",level:2},{value:"6. Receiving the Result",id:"6-receiving-the-result",level:2},{value:"6.1 Handling Errors",id:"61-handling-errors",level:3},{value:"6.2 Handling Success \u2013 <code>data</code>",id:"62-handling-success--data",level:3},{value:"6.2.1 <code>audios</code>",id:"621-audios",level:4},{value:"6.2.2 <code>tokenizedAudios</code>",id:"622-tokenizedaudios",level:4},{value:"7. Advanced Information",id:"7-advanced-information",level:2},{value:"7.1 Advanced Component Configuration",id:"71-advanced-component-configuration",level:3},{value:"8. Component Customization",id:"8-component-customization",level:2},{value:"8.1 Texts",id:"81-texts",level:3},{value:"8.2 Animations",id:"82-animations",level:3},{value:"8.3 External Views",id:"83-external-views",level:3},{value:"9. Logs",id:"9-logs",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"voice-capture",children:"Voice Capture"})}),"\n",(0,o.jsx)(n.h2,{id:"1-introduction",children:"1. Introduction"}),"\n",(0,o.jsxs)(n.p,{children:["Voice capture is performed with the ",(0,o.jsx)(n.strong,{children:"Voice Component"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"This component handles capturing the user\u2019s voice and extracting the corresponding templates. Its main processes include:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Internal microphone and permission management."}),"\n",(0,o.jsx)(n.li,{children:"Prompting a series of phrases for the user to read."}),"\n",(0,o.jsx)(n.li,{children:"Silence detection analysis."}),"\n",(0,o.jsx)(n.li,{children:"Progress tracking during capture."}),"\n",(0,o.jsx)(n.li,{children:"Guided assistance throughout the capture process."}),"\n",(0,o.jsx)(n.li,{children:"Generation of voice templates and quality scores."}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Refer to the ",(0,o.jsx)(n.a,{href:"./Mobile_SDK",children:"Quickstart"})," section for basic SDK integration. This section provides details for launching this component."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"2-dependency",children:"2. Dependency"}),"\n",(0,o.jsx)(n.p,{children:"Add the component-specific dependency:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'implementation "com.facephi.androidsdk:voice_component:$version"\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"3-available-controllers",children:"3. Available Controllers"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Controller"})}),(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Description"})})]})}),(0,o.jsx)(n.tbody,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"VoiceController"}),(0,o.jsx)(n.td,{children:"Main controller for voice capture"})]})})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"4-quick-launch",children:"4. Quick Launch"}),"\n",(0,o.jsx)(n.p,{children:"Once the SDK is initialized and a new operation has been created, launch the component:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'val response = SDKController.launch(\n    VoiceController(\n        VoiceConfigurationData(\n            phrases = arrayOf(\n                "Your full name and address",\n                "Your document number with letter"\n            )\n        )\n    )\n)\n\nwhen (response) {\n    is SdkResult.Error   -> Napier.d("VOICE: ERROR - ${response.error.name}")\n    is SdkResult.Success -> response.data\n}\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"5-basic-configuration",children:"5. Basic Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["Create a ",(0,o.jsx)(n.code,{children:"VoiceConfigurationData"})," object with the following field:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'VoiceConfigurationData(\n    phrases = arrayOf(\n        "Your full name and address",\n        "Your document number with letter"\n    )\n)\n'})}),"\n",(0,o.jsx)(n.p,{children:"You can customize the list of phrases to be presented to the user."}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"6-receiving-the-result",children:"6. Receiving the Result"}),"\n",(0,o.jsxs)(n.p,{children:["The launch returns an ",(0,o.jsx)(n.code,{children:"SdkResult"}),". Handle success and error:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'when (response) {\n    is SdkResult.Error   -> Napier.d("VOICE: ERROR - ${response.error}")\n    is SdkResult.Success -> response.data\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"61-handling-errors",children:"6.1 Handling Errors"}),"\n",(0,o.jsxs)(n.p,{children:["Errors are returned as a ",(0,o.jsx)(n.code,{children:"VoiceError"})," object. Possible values include:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"ACTIVITY_RESULT_MSG_ERROR: The result of the activity is incorrect."}),"\n",(0,o.jsx)(n.li,{children:"APPLICATION_CONTEXT_ERROR: Required application context is null."}),"\n",(0,o.jsx)(n.li,{children:"CANCEL_BY_USER: User has cancelled the process."}),"\n",(0,o.jsx)(n.li,{children:"CANCEL_LAUNCH: A general cancellation of the SDK has been done."}),"\n",(0,o.jsx)(n.li,{children:"COMPONENT_LICENSE_ERROR: The license of the component is not correct."}),"\n",(0,o.jsx)(n.li,{children:"EMPTY_LICENSE: License String is empty."}),"\n",(0,o.jsx)(n.li,{children:"FETCH_DATA_ERROR: Error in the result collection."}),"\n",(0,o.jsx)(n.li,{children:"FLOW_ERROR: Error in the flow process."}),"\n",(0,o.jsx)(n.li,{children:"INITIALIZATION_ERROR: Initialisation error."}),"\n",(0,o.jsx)(n.li,{children:"INTERNAL_LICENSE_ERROR: Internal error related to the component license"}),"\n",(0,o.jsx)(n.li,{children:"MANAGER_NOT_INITIALIZED: Managers are nil."}),"\n",(0,o.jsx)(n.li,{children:"NO_DATA_ERROR: Input data is null."}),"\n",(0,o.jsx)(n.li,{children:"OPERATION_NOT_CREATED: No operation in progress."}),"\n",(0,o.jsx)(n.li,{children:"PERMISSION_DENIED: User has denied permissions."}),"\n",(0,o.jsx)(n.li,{children:"TIMEOUT: Timeout in the process."}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"62-handling-success--data",children:["6.2 Handling Success \u2013 ",(0,o.jsx)(n.code,{children:"data"})]}),"\n",(0,o.jsxs)(n.p,{children:["On success (",(0,o.jsx)(n.code,{children:"SdkResult.Success"}),"), you receive a ",(0,o.jsx)(n.code,{children:"VoiceResult"})," object. It contains:"]}),"\n",(0,o.jsxs)(n.h4,{id:"621-audios",children:["6.2.1 ",(0,o.jsx)(n.code,{children:"audios"})]}),"\n",(0,o.jsxs)(n.p,{children:["An array of captured audio samples as ",(0,o.jsx)(n.code,{children:"ByteArray"}),"."]}),"\n",(0,o.jsxs)(n.h4,{id:"622-tokenizedaudios",children:["6.2.2 ",(0,o.jsx)(n.code,{children:"tokenizedAudios"})]}),"\n",(0,o.jsx)(n.p,{children:"An array of tokenized audio samples."}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"7-advanced-information",children:"7. Advanced Information"}),"\n",(0,o.jsx)(n.p,{children:"This section provides advanced configuration options for the Voice Component."}),"\n",(0,o.jsx)(n.h3,{id:"71-advanced-component-configuration",children:"7.1 Advanced Component Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["All fields of ",(0,o.jsx)(n.code,{children:"VoiceConfigurationData"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"phrases"}),": Array of phrases to be captured."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"vibrationEnabled"}),": Enable vibration feedback when the capture completes."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"showTutorial"}),": Display a tutorial screen explaining the capture process."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"extractionTimeout"}),": Maximum duration (ms) for voice capture."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"showDiagnostic"}),": Show diagnostic screens at the end of the process."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"enableQualityCheck"}),": Enable or disable audio quality checks (recommended enabled)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"showPreviousTip"}),": Show a pre-capture tip screen with instructions and a start button."]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"8-component-customization",children:"8. Component Customization"}),"\n",(0,o.jsxs)(n.p,{children:["Beyond SDK-level settings (see ",(0,o.jsx)(n.a,{href:"./Mobile_SDK_advanced",children:"Advanced Settings"}),"), this component allows interface customization."]}),"\n",(0,o.jsx)(n.h3,{id:"81-texts",children:"8.1 Texts"}),"\n",(0,o.jsx)(n.p,{children:"Override default texts by including an XML file in your app:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Previous Tip --\x3e\n    <string name="voice_component_tip_message">Speak clearly and loudly. &lt;br&gt;&lt;br&gt; Make sure you are in a quiet environment.</string>\n    <string name="voice_component_tip_title">Speech recognition</string>\n    <string name="voice_component_tip_button">Continue</string>\n    \x3c!-- Process --\x3e\n    <string name="voice_component_success_message">Recorded recording</string>\n    <string name="voice_component_speech_message">Without pressing anything, he speaks clearly and close to the microphone</string>\n    <string name="voice_component_speech_more_message">Keep talking</string>\n    <string name="voice_component_speech_empty_message" translatable="false"></string>\n    <string name="voice_component_read_message">Say out loud:</string>\n    <string name="voice_component_speech_noisy_message">There is too much background noise, try to go to a quiet environment</string>\n    <string name="voice_component_success_records_message">successful recordings</string>\n    \x3c!-- Diagnostic --\x3e\n    <string name="voice_component_timeout_title">Time exceeded</string>\n    <string name="voice_component_timeout_desc">We were unable to identify you. Please try again.</string>\n    <string name="voice_component_internal_error_title">There was a technical problem</string>\n    <string name="voice_component_internal_error_desc">We apologize. The capture could not be made</string>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"82-animations",children:"8.2 Animations"}),"\n",(0,o.jsxs)(n.p,{children:["Override Lottie animations by including files in ",(0,o.jsx)(n.code,{children:"res/raw/"})," with the same names:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"voice_anim_enroll_ko.json\nvoice_anim_enroll_ok.json\nvoice_anim_enroll_progress.json\nvoice_anim_intro.json\n"})}),"\n",(0,o.jsx)(n.h3,{id:"83-external-views",children:"8.3 External Views"}),"\n",(0,o.jsx)(n.p,{children:"It is possible to completely modify the component screens while maintaining their functionality and navigation. To do so, the following interfaces must be implemented:"}),"\n",(0,o.jsx)(n.p,{children:"Previous tip screen:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kotlin",children:"\ninterface IVoicePreviousTipView {\n    @Composable\n    fun Content(\n        onContinue: () -> Unit,\n        onClose: () -> Unit\n    )\n}\n\n"})}),"\n",(0,o.jsx)(n.p,{children:"Error diagnosis screen:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kotlin",children:"\ninterface IVoiceErrorDiagnosticView {\n    @Composable\n    fun Content(\n        error: VoiceError,\n        onRetry: () -> Unit,\n        onClose: () -> Unit,\n    )\n}\n\n"})}),"\n",(0,o.jsx)(n.p,{children:"Enroll screens:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kotlin",children:"\ninterface IVoiceEnrollRecordingView {\n    @Composable\n    fun Content(\n        phrase: String,\n        numberRecordedPhrases: Int,\n        numberTotalPhrases: Int,\n        voiceAmplitude: Float,\n        recordingProgress: Int,\n        onClose: () -> Unit,\n    )\n}\n\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kotlin",children:"\ninterface IVoiceEnrollSuccessView {\n    @Composable\n    fun Content(\n        phrase: String,\n        numberRecordedPhrases: Int,\n        numberTotalPhrases: Int,\n        onClose: () -> Unit,\n    )\n}\n\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kotlin",children:"\ninterface IVoiceEnrollErrorView {\n    @Composable\n    fun Content(\n        phrase: String,\n        numberRecordedPhrases: Int,\n        numberTotalPhrases: Int,\n        onClose: () -> Unit,\n    )\n}\n\n"})}),"\n",(0,o.jsx)(n.p,{children:'Once the classes that implement the interfaces have been created, the "customViews" parameter can be added at component launch to be used in the SDK.'}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"9-logs",children:"9. Logs"}),"\n",(0,o.jsxs)(n.p,{children:["Filter console logs for this component with: ",(0,o.jsx)(n.code,{children:'"VOICE:"'})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>c});var s=i(96540);const o={},r=s.createContext(o);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);