"use strict";(globalThis.webpackChunksdk_mobile_doc=globalThis.webpackChunksdk_mobile_doc||[]).push([[25764],{6806(e,a,n){n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"SelphID_widget_android","title":"SelphID Widget Android","description":"1. \xbfQu\xe9 es el widget?","source":"@site/i18n/es/docusaurus-plugin-content-docs-resources/current/SelphID_widget_android.md","sourceDirName":".","slug":"/SelphID_widget_android","permalink":"/sdk-mobile-documentation/es/docs/resources/SelphID_widget_android","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Recursos de SelphID","permalink":"/sdk-mobile-documentation/es/docs/resources/SelphID_resources"},"next":{"title":"SelphID Widget iOS","permalink":"/sdk-mobile-documentation/es/docs/resources/SelphID_widget_ios"}}');var o=n(74848),d=n(28453);const t={},r="SelphID Widget Android",s={},l=[{value:"1. \xbfQu\xe9 es el widget?",id:"1-qu\xe9-es-el-widget",level:2},{value:"2. \xbf C\xf3mo se integra el widget?",id:"2--c\xf3mo-se-integra-el-widget",level:2},{value:"2.1. Librer\xedas Requeridas",id:"21-librer\xedas-requeridas",level:3},{value:"2.2. Instalaci\xf3n del plugin SelphID Android",id:"22-instalaci\xf3n-del-plugin-selphid-android",level:3},{value:"2.2.1. Integraci\xf3n de las librer\xedas",id:"221-integraci\xf3n-de-las-librer\xedas",level:4},{value:"3. Configurar el widget",id:"3-configurar-el-widget",level:2},{value:"3.1. Propiedad DocumentType",id:"31-propiedad-documenttype",level:4},{value:"3.2. Propiedad DocumentSide",id:"32-propiedad-documentside",level:4},{value:"3.3. Propiedad ScanMode",id:"33-propiedad-scanmode",level:4},{value:"3.4. Propiedad SpecificData (string)",id:"34-propiedad-specificdata-string",level:4},{value:"3.5. Propiedad WizardMode",id:"35-propiedad-wizardmode",level:4},{value:"3.6. Propiedad ShowAfterCapture",id:"36-propiedad-showaftercapture",level:4},{value:"3.7. Propiedad PreviousCaptureData",id:"37-propiedad-previouscapturedata",level:4},{value:"3.8. Propiedad Locale (string)",id:"38-propiedad-locale-string",level:4},{value:"3.9. Propiedad Timeout",id:"39-propiedad-timeout",level:4},{value:"3.10.  Propiedad VideoFilename",id:"310--propiedad-videofilename",level:4},{value:"3.11 Propiedad DocumentModels",id:"311-propiedad-documentmodels",level:4},{value:"3.12 Propiedad GenerateRawImages",id:"312-propiedad-generaterawimages",level:4},{value:"3.13 M\xe9todo getWidgetVersion",id:"313-m\xe9todo-getwidgetversion",level:4},{value:"4. Crear el widget",id:"4-crear-el-widget",level:2},{value:"4.1. Clase FPhiSelphIDWidget",id:"41-clase-fphiselphidwidget",level:3},{value:"4.2. Interfaz IFPhiWidgetSelphIDEventListener",id:"42-interfaz-ifphiwidgetselphideventlistener",level:3},{value:"5. Recepci\xf3n del resultado.",id:"5-recepci\xf3n-del-resultado",level:2},{value:"5.1. Propiedad results",id:"51-propiedad-results",level:3},{value:"5.1.1. Propiedades frontDocument / tokenFrontDocument",id:"511-propiedades-frontdocument--tokenfrontdocument",level:4},{value:"5.1.2. Propiedades backDocument / tokenBackDocument",id:"512-propiedades-backdocument--tokenbackdocument",level:4},{value:"5.1.3. Propiedades faceImage / tokenFaceImage",id:"513-propiedades-faceimage--tokenfaceimage",level:4},{value:"5.1.4. Propiedades documentCaptured, countryCaptured y documentTypeCaptured",id:"514-propiedades-documentcaptured-countrycaptured-y-documenttypecaptured",level:4},{value:"5.1.5. Propiedades matchingSidesScore, matchingFrontScore y matchingBackScore",id:"515-propiedades-matchingsidesscore-matchingfrontscore-y-matchingbackscore",level:4},{value:"5.1.6. Propiedad captureProgress",id:"516-propiedad-captureprogress",level:4},{value:"5.1.7. Propiedad timeoutDiagnostic",id:"517-propiedad-timeoutdiagnostic",level:4},{value:"5.2. Diccionario ocrResults",id:"52-diccionario-ocrresults",level:3}];function c(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.header,{children:(0,o.jsx)(a.h1,{id:"selphid-widget-android",children:"SelphID Widget Android"})}),"\n",(0,o.jsx)(a.h2,{id:"1-qu\xe9-es-el-widget",children:"1. \xbfQu\xe9 es el widget?"}),"\n",(0,o.jsx)(a.p,{children:"FacePhi SelphID Android Widget es una utilidad con la que se podr\xe1n realizar las funciones de captura de documentos que ofrece la tecnolog\xeda de FacePhi. Las funciones que facilita este widget son:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"Gesti\xf3n interna de c\xe1maras y resoluciones."}),"\n",(0,o.jsx)(a.li,{children:"Asistente en los procesos de captura de la parte frontal y trasera del documento."}),"\n",(0,o.jsx)(a.li,{children:"Extracci\xf3n de la informaci\xf3n contenida en el documento."}),"\n",(0,o.jsx)(a.li,{children:"Obtenci\xf3n de las im\xe1genes de la parte frontal, trasera y otros datos relevantes."}),"\n"]}),"\n",(0,o.jsx)(a.hr,{}),"\n",(0,o.jsx)(a.h2,{id:"2--c\xf3mo-se-integra-el-widget",children:"2. \xbf C\xf3mo se integra el widget?"}),"\n",(0,o.jsx)(a.h3,{id:"21-librer\xedas-requeridas",children:"2.1. Librer\xedas Requeridas"}),"\n",(0,o.jsx)(a.p,{children:"FacePhi distribuye las librer\xedas necesarias para integrar el widget en un proyecto de Android. Se distribuyen tanto librer\xedas .aar, como recursos para el componente, las cuales se encuentran en el directorio lib."}),"\n",(0,o.jsx)(a.p,{children:"Librer\xedas:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:(0,o.jsx)(a.code,{children:"fphi-selphid-core-android-X.X.X.aar"})}),"\n",(0,o.jsx)(a.li,{children:(0,o.jsx)(a.code,{children:"fphi-selphid-drawer-android-X.X.X.aar"})}),"\n",(0,o.jsx)(a.li,{children:(0,o.jsx)(a.code,{children:"fphi-selphid-extractor-X.X.X.aar"})}),"\n",(0,o.jsx)(a.li,{children:(0,o.jsx)(a.code,{children:"fphi-selphid-license_manager-X.X.X.aar"})}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Recursos:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:(0,o.jsx)(a.code,{children:"fphi-selphid-widget-resources-selphid-X.X.zip"})}),"\n"]}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"Solicitud de licencias al departamento de soporte."}),"\n"]}),"\n",(0,o.jsx)(a.h3,{id:"22-instalaci\xf3n-del-plugin-selphid-android",children:"2.2. Instalaci\xf3n del plugin SelphID Android"}),"\n",(0,o.jsx)(a.p,{children:"La instalaci\xf3n del plugin se realizar\xe1 una vez se completen las siguientes acciones en su IDE Android Studio"}),"\n",(0,o.jsx)(a.h4,{id:"221-integraci\xf3n-de-las-librer\xedas",children:"2.2.1. Integraci\xf3n de las librer\xedas"}),"\n",(0,o.jsxs)(a.p,{children:["Las librer\xedas de archivos de Android (Android Archive Library) llamadas ",(0,o.jsx)(a.code,{children:"fphi-selphid-core-android-X.X.X.aar"}),", ",(0,o.jsx)(a.code,{children:"fphi-selphid-drawer-android-X.X.X.aar"})," y ",(0,o.jsx)(a.code,{children:"fphi-selphid-extractor-X.X.X.aar"})," deben a\xf1adirse como dependencias a su proyecto."]}),"\n",(0,o.jsx)(a.p,{children:"Adicionalmente, se entrega un archivo zip que contiene la configuraci\xf3n gr\xe1fica y de localizaci\xf3n del widget, mediante el cual se puede personalizar la apariencia f\xedsica del widget para una mejor integraci\xf3n con la aplicaci\xf3n final que lo va a contener y que debe integrarse en la carpeta assets de su proyecto Android. Este archivo zip debe mantenerse comprimido en dicha carpeta."}),"\n",(0,o.jsx)(a.p,{children:"Adem\xe1s, junto con la SDK se proporciona un ejemplo de programaci\xf3n para Android Studio que ayuda al integrador a consumir el widget en una aplicaci\xf3n Android."}),"\n",(0,o.jsx)(a.hr,{}),"\n",(0,o.jsx)(a.h2,{id:"3-configurar-el-widget",children:"3. Configurar el widget"}),"\n",(0,o.jsxs)(a.p,{children:["El widget de SelphID Android contiene una serie de atributos que le permiten configurar el comportamiento del mismo. A continuaci\xf3n, se muestran cada una de las propiedades configurables en la clase ",(0,o.jsx)(a.code,{children:"WidgetSelphIDConfiguration"})]}),"\n",(0,o.jsx)(a.h4,{id:"31-propiedad-documenttype",children:"3.1. Propiedad DocumentType"}),"\n",(0,o.jsx)(a.p,{children:"Los valores permitidos son los siguientes:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"WidgetSelphIDDocumentType.DTIDCard"}),": El widget queda configurado para realizar la captura de documentos de identidad."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"WidgetSelphIDDocumentType.DTPassport"}),": El widget queda configurado para realizar la captura de pasaportes."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"WidgetSelphIDDocumentType.DTVisa"}),": El widget queda configurado para realizar la captura de visados."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"WidgetSelphIDDocumentType.DTDriversLicense"}),": El widget queda configurado para realizar la captura de licencias de conducci\xf3n."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"WidgetSelphIDDocumentType.DTForeignCard"}),": El widget queda configurado para realizar la captura de documentos extranjeros."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"WidgetSelphIDDocumentType.DTCreditCard"}),": El widget queda configurado para realizar la captura de tarjetas de cr\xe9dito."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"WidgetSelphIDDocumentType.DTCustom"}),": El widget queda configurado para realizar la captura de otro tipo de documentos que no corresponden a ninguna de las categorias anteriores."]}),"\n"]}),"\n",(0,o.jsx)(a.h4,{id:"32-propiedad-documentside",children:"3.2. Propiedad DocumentSide"}),"\n",(0,o.jsx)(a.p,{children:"Los valores permitidos son los siguientes:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"WidgetSelphIDDocumentSide.DSFront"}),": El widget queda configurado para realizar la captura de la parte frontal del documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"WidgetSelphIDDocumentSide.DSBack"}),": El widget queda configurado para realizar la captura de la parte trasera del documento."]}),"\n"]}),"\n",(0,o.jsx)(a.h4,{id:"33-propiedad-scanmode",children:"3.3. Propiedad ScanMode"}),"\n",(0,o.jsx)(a.p,{children:"Indica el modo de escaneo OCR de los documentos. Dependiendo de la elecci\xf3n, se escanear\xe1n y buscar\xe1n varios tipos de documentos o uno en concreto. Este modo puede ser de tres tipos:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"WidgetSelphIDScanMode.SMGeneric"}),": El modo gen\xe9rico que permite escanear cualquier tipo de documento independiente del pa\xeds o el tipo de documento. El resultado de este modo no es tan preciso como los siguientes pero permite escanear varios documentos est\xe1ndar."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"WidgetSelphIDScanMode.SMSearch"}),': El modo de b\xfasqueda permitir\xe1 utilizar una whitelist y blacklist, y buscar\xe1 en los documentos que cumplan dichas condiciones. Estas condiciones se indican en la variable "specificData". De este modo se permite realizar la b\xfasqueda acotando el n\xfamero de plantillas, y haciendo que la b\xfasqueda sea mucho m\xe1s afinada que en el caso gen\xe9rico.']}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"WidgetSelphIDScanMode.SMSpecific"}),': B\xfasqueda de un documento espec\xedfico. Estas condiciones se indican en la propiedad "specificData" que se muestra en lo sucesivo.']}),"\n"]}),"\n",(0,o.jsx)(a.h4,{id:"34-propiedad-specificdata-string",children:"3.4. Propiedad SpecificData (string)"}),"\n",(0,o.jsx)(a.p,{children:"Esta propiedad permite definir qu\xe9 documentos se escanear\xe1n durante el proceso, en caso de declarar el modo de escaneo (scanMode) a SMSearch o SMSpecific."}),"\n",(0,o.jsx)(a.p,{children:"Un ejemplo de configuraci\xf3n que permita escanear todos los documentos de nacionalidad espa\xf1ola ser\xeda el siguiente:"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-java",children:'\t// Search mode definition\n\tconf.setScanMode(WidgetSelphIdScanMode.SMSearch);\n\tconf.setSpecificData("ES|<ALL>"); // C\xf3digo ISO de Espa\xf1a (ES)\n'})}),"\n",(0,o.jsx)(a.h4,{id:"35-propiedad-wizardmode",children:"3.5. Propiedad WizardMode"}),"\n",(0,o.jsx)(a.p,{children:"Indica si el widget queda configurado para realizar la captura de ambas partes (frontal y trasera) del documento una a continuaci\xf3n de la otra. En este modo el widget solo se lanzar\xeda una vez y al terminar de capturar el front, continuar\xeda seguidamente con el back."}),"\n",(0,o.jsx)(a.h4,{id:"36-propiedad-showaftercapture",children:"3.6. Propiedad ShowAfterCapture"}),"\n",(0,o.jsx)(a.p,{children:"Indica si mostrar o no una pantalla con la imagen capturada del documento despu\xe9s del proceso de an\xe1lisis. En esta pantalla se le da al usuario la posibilidad de repetir el proceso de captura si la imagen que se obtuvo del documento no fuera correcta."}),"\n",(0,o.jsx)(a.h4,{id:"37-propiedad-previouscapturedata",children:"3.7. Propiedad PreviousCaptureData"}),"\n",(0,o.jsx)(a.p,{children:"Cuando la captura del documento se realiza en 2 llamadas, esta propiedad permite pasar un diccionario con la informaci\xf3n de la captura previa. De esta manera el widget puede combinar los resultados de ambas lecturas de una manera inteligente y as\xed devolver la informaci\xf3n combinada de ambas capturas. Tambi\xe9n permite al widget calcular un grado de similitud de los datos de ambas caras."}),"\n",(0,o.jsx)(a.p,{children:"En el caso que la captura de ambas caras del documento se realice en una \xfanica llamada esto no es necesario ya que el widget internamente hace este proceso."}),"\n",(0,o.jsx)(a.h4,{id:"38-propiedad-locale-string",children:"3.8. Propiedad Locale (string)"}),"\n",(0,o.jsx)(a.p,{children:"Es un string que permite cambiar la localizaci\xf3n y el idioma del widget. Ejemplos de valores que pueden tener son los siguientes:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:'"es" para espa\xf1ol.'}),"\n",(0,o.jsx)(a.li,{children:'"en" para ingl\xe9s.'}),"\n",(0,o.jsx)(a.li,{children:'"fr" para franc\xe9s.'}),"\n"]}),"\n",(0,o.jsxs)(a.p,{children:["En definitiva, depender\xe1 del nombre que aparezca en el fichero ",(0,o.jsx)(a.code,{children:"strings.xml"})," del lenguaje que se desee seleccionar (",(0,o.jsx)(a.code,{children:"strings-es.xml"}),", ",(0,o.jsx)(a.code,{children:"strings-en.xml"}),", ",(0,o.jsx)(a.code,{children:"strings-fr.xml"}),")."]}),"\n",(0,o.jsxs)(a.p,{children:["En el zip de recursos, el cual se encuentra dentro de la carpeta strings, se pueden a\xf1adir los ficheros ",(0,o.jsx)(a.code,{children:"strings-xx.xml"})," correspondientes a cada localizaci\xf3n que se requiere incorporar en el widget."]}),"\n",(0,o.jsx)(a.h4,{id:"39-propiedad-timeout",children:"3.9. Propiedad Timeout"}),"\n",(0,o.jsx)(a.p,{children:"Es un enumerado que define el timeout de la captura de un lado del documento. Tiene 3 posibles valores:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"WidgetTimeout.Short: 15 segundos."}),"\n",(0,o.jsx)(a.li,{children:"WidgetTimeout.Medium: 20 segundos."}),"\n",(0,o.jsx)(a.li,{children:"WidgetTimeout.Long: 25 segundos."}),"\n",(0,o.jsx)(a.li,{children:"WidgetTimeout.VeryLong: 60 segundos."}),"\n"]}),"\n",(0,o.jsx)(a.h4,{id:"310--propiedad-videofilename",children:"3.10.  Propiedad VideoFilename"}),"\n",(0,o.jsx)(a.p,{children:"Establece la ruta absoluta del nombre del archivo en el que se grabar\xe1 un video del proceso de captura. La aplicaci\xf3n es la responsable de solicitar los permisos necesarios al tel\xe9fono en caso de que esa ruta requiera de permisos adicionales. El widget, por defecto, no realizar\xe1 ning\xfan proceso de grabaci\xf3n a menos que se especifique una ruta de archivo mediante este m\xe9todo."}),"\n",(0,o.jsx)(a.h4,{id:"311-propiedad-documentmodels",children:"3.11 Propiedad DocumentModels"}),"\n",(0,o.jsx)(a.p,{children:"Esta propiedad permite, mediante una cadena en formato xml, configurar modelado de los documentos que el widget va a tratar de capturar. La definici\xf3n de este modelado se encentra, por defecto, en un .xml de modelos que se encuentra en el .zip de recursos. Con esta propiedad se permite a una aplicaci\xf3n actualizar, en caliente, los modelados de los documentos."}),"\n",(0,o.jsx)(a.p,{children:"Nota: Esta propiedad no altera el contenido del archivo de recursos."}),"\n",(0,o.jsx)(a.h4,{id:"312-propiedad-generaterawimages",children:"3.12 Propiedad GenerateRawImages"}),"\n",(0,o.jsxs)(a.p,{children:["Esta propiedad configura el widget para devolver la imagen completa de la c\xe1mara que se utiliz\xf3 para capturar el documento. Estas im\xe1genes se devuelven en las propiedades ",(0,o.jsx)(a.code,{children:"rawFrontDocument"})," y ",(0,o.jsx)(a.code,{children:"rawBackDocument"})," del objeto ",(0,o.jsx)(a.code,{children:"results"})," respectivamente."]}),"\n",(0,o.jsx)(a.h4,{id:"313-m\xe9todo-getwidgetversion",children:"3.13 M\xe9todo getWidgetVersion"}),"\n",(0,o.jsx)(a.p,{children:"Este m\xe9todo devuelve la version actual del widget en formato cadena. Esta llamada es est\xe1tica por lo que no requiere del lanzamiento del widget para realizar esta operaci\xf3n."}),"\n",(0,o.jsx)(a.hr,{}),"\n",(0,o.jsx)(a.h2,{id:"4-crear-el-widget",children:"4. Crear el widget"}),"\n",(0,o.jsx)(a.h3,{id:"41-clase-fphiselphidwidget",children:"4.1. Clase FPhiSelphIDWidget"}),"\n",(0,o.jsxs)(a.p,{children:[(0,o.jsx)(a.code,{children:"FPhiSelphIDWidget"})," es la clase que se encarga de la comunicaci\xf3n entre la aplicaci\xf3n y el widget. Para poder ejecutar el mismo deber\xe1 utilizarse un Intent. En el siguiente ejemplo de c\xf3digo java se muestra la configuraci\xf3n e instancia del widget:"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-java",children:'\tWidgetSelphIDConfiguration conf = new WidgetSelphIDConfiguration();\n\tconf.setResourcesPath(RESOURCES_PATH);\n\tconf.setFullscreen(true);\n\tconf.setLicense(license);\n\n\tconf.setDocumentSide(WidgetSelphIDDocumentSide.DSFront);\n\tconf.setScanMode(WidgetSelphIDScanMode.SMSearch);\n\tconf.setSpecificData(country+"|<ALL>");\n\n\tconf.setShowAfterCapture(true);\n\tconf.setWizardMode(true);\n\t\n\tif (conf.getWizardMode()) \n\t\ttokenPreviousData = "";\n\tconf.setTokenPreviousCaptureData(tokenPreviousData);\n\n\tIntent intent = new Intent(this, com.facephi.selphid.Widget.class);\n\tintent.putExtra("configuration", conf);\n\tthis.startActivityForResult(intent, 1);\n'})}),"\n",(0,o.jsxs)(a.p,{children:["La propiedad ",(0,o.jsx)(a.code,{children:"License"})," contiene la licencia de las librer\xedas de SelphID. En el ejemplo de programaci\xf3n se muestra una forma de gestionar esta licencia seg\xfan la plataforma utilizada."]}),"\n",(0,o.jsx)(a.h3,{id:"42-interfaz-ifphiwidgetselphideventlistener",children:"4.2. Interfaz IFPhiWidgetSelphIDEventListener"}),"\n",(0,o.jsx)(a.p,{children:"Este interfaz permite que el widget se comunique con la aplicaci\xf3n principal en tiempo real y notifique sobre eventos importantes que ocurran durante el transcurso de los procesos de registro y autenticaci\xf3n."}),"\n",(0,o.jsx)(a.p,{children:"Para esto ser\xe1 necesario que la aplicaci\xf3n cree una clase que implemente este interfaz el cual consta de un \xfanico m\xe9todo:"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-java",children:"\tpublic void onEvent(long time, @NonNull String type, @NonNull String info)\n"})}),"\n",(0,o.jsx)(a.p,{children:"Esta funci\xf3n recibe como par\xe1metros el tiempo en el que se lanz\xf3 el evento, codificado como UnixTime en milisegundos, el tipo de evento que se ha producido y la informaci\xf3n adicional asociada a dicho evento."}),"\n",(0,o.jsx)(a.p,{children:"Los eventos recibidos son principalmente de 3 tipos:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"Eventos relacionados con cambios de pantalla o de estados en los que se encuentra el widget"}),"\n",(0,o.jsx)(a.li,{children:"Eventos de usuario como pueden ser pulsaciones de botones o movimientos tipo swipe."}),"\n",(0,o.jsx)(a.li,{children:"Eventos relacionados con los procesos de captura de documentos que se est\xe1n llevando acabo, como pueden ser errores en la captura de los documentos, entre otros."}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Mediante estos eventos se comunica a la aplicaci\xf3n principal aquellos datos que puedan ser de inter\xe9s a la hora de analizar el comportamiento de los usuarios cuando usan la tecnolog\xeda."}),"\n",(0,o.jsx)(a.p,{children:"Una vez creada la clase que implementa este interfaz, la aplicaci\xf3n llamar\xe1 al m\xe9todo del objeto de configuraci\xf3n:"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-java",children:'\tconf.setIFPhiWidgetSelphIDEventListener_classname("nombre.clase.interfaz")\n'})}),"\n",(0,o.jsx)(a.p,{children:"Pas\xe1ndole el nombre de la clase que implementa dicho interfaz."}),"\n",(0,o.jsx)(a.hr,{}),"\n",(0,o.jsx)(a.h2,{id:"5-recepci\xf3n-del-resultado",children:"5. Recepci\xf3n del resultado."}),"\n",(0,o.jsxs)(a.p,{children:["Al finalizar la llamada del widget, es posible adquirir toda la informaci\xf3n obtenida de la captura del documento (ya sea la parte frontal, trasera o ambas a la vez). Para ello es necesario utilizar la devoluci\xf3n de llamada ",(0,o.jsx)(a.code,{children:"onActivityResult()"}),":"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-java",children:'\tprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\t\n\t\tswitch (requestCode) {\n\t\t\tcase 1:\n\t\t\t\tWidgetSelphIDResult result = data.getParcelableExtra("result");\n\t\t\t\tString text = "";\n\t\t\t\tif (result != null && result.getException() != null) {\n\t\t\t\t\tswitch (result.getException().getExceptionType()) {\n\t\t\t\t\t\tcase StoppedManually:\n\t\t\t\t\t\t\tLog.w("<SelphID>", "Widget cancelled");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase Timeout:\n\t\t\t\t\t\t\tLog.w("<SelphID>", "Widget timed out");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tBitmap front = result.getDocumentFrontImage();\n\t\t\t\tBitmap back = result.getDocumentBackImage();\n\t\t\t\tBitmap face = result.getFaceImage();\n\n\t\t\t\t// Obtenemos los tokens\n\t\t\t\tString tknOCR = result.getTokenOCR();\n\t\t\t\tString tknFD = result.getTokenFrontDocument();\n\t\t\t\tString tknBD = result.getTokenBackDocument();\n\t\t\t\tString tknFI = result.getTokenFaceImage();\n\n\t\t\t\t// Nos guardamos los resultados de la ejecuci\xf3n previa\n\t\t\t\tif (conf.getWizardMode()) {\n\t\t\t\t\ttokenPreviousData = "";\n\t\t\t\t} else {\n\t\t\t\t\ttokenPreviousData = result.getTokenOCR();\n\t\t\t\t}\n\n\t\t\t\tif (result.ocrResults == null) return;\n\n\t\t\t\tif (result.ocrResults.size() > 0) {\n\t\t\t\t\ttext += "OCR Results --------------"; text += "\\n";\n\t\t\t\t\tfor (String key: result.ocrResults.keySet()) {\n\t\t\t\t\t\ttext += (key + ": " + result.ocrResults.get(key)); text += "\\n";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n'})}),"\n",(0,o.jsxs)(a.p,{children:["Es importante rese\xf1ar que la informaci\xf3n obtenida en este objeto se devuelve duplicada, mostr\xe1ndola a su vez en abierto (por ejemplo, ",(0,o.jsx)(a.code,{children:"frontDocumentImage"})," para la imagen de la captura frontal del documento), como tokenizado y encriptado (por ejemplo, ",(0,o.jsx)(a.code,{children:"tokenFrontDocumentImage"})," para la imagen de la captura frontal del documento)."]}),"\n",(0,o.jsx)(a.p,{children:"Dependiendo del tipo de licencia utilizada se podr\xe1n obtener un tipo de par\xe1metros o ambos. Es recomendable utilizar la informaci\xf3n tokenizada para enviarla de forma segura al servidor donde est\xe9 instalada la SDK de SelphID, mientras que los datos en abierto deben utilizarse \xfanicamente en fases de desarrollo y test."}),"\n",(0,o.jsx)(a.h3,{id:"51-propiedad-results",children:"5.1. Propiedad results"}),"\n",(0,o.jsx)(a.p,{children:"Contiene todas las im\xe1genes y tokens generados por el widget, enumerados a continuaci\xf3n:"}),"\n",(0,o.jsx)(a.h4,{id:"511-propiedades-frontdocument--tokenfrontdocument",children:"5.1.1. Propiedades frontDocument / tokenFrontDocument"}),"\n",(0,o.jsx)(a.p,{children:"La imagen frontal del documento procesada, limpiada y recortada por los bordes y su token correspondiente."}),"\n",(0,o.jsx)(a.h4,{id:"512-propiedades-backdocument--tokenbackdocument",children:"5.1.2. Propiedades backDocument / tokenBackDocument"}),"\n",(0,o.jsx)(a.p,{children:"La imagen trasera del documento procesada, limpiada y recortada por los bordes y su token asociado."}),"\n",(0,o.jsx)(a.h4,{id:"513-propiedades-faceimage--tokenfaceimage",children:"5.1.3. Propiedades faceImage / tokenFaceImage"}),"\n",(0,o.jsx)(a.p,{children:"La imagen del rostro que se ha encontrado en el documento, en caso de que exista y su token asociado."}),"\n",(0,o.jsx)(a.h4,{id:"514-propiedades-documentcaptured-countrycaptured-y-documenttypecaptured",children:"5.1.4. Propiedades documentCaptured, countryCaptured y documentTypeCaptured"}),"\n",(0,o.jsx)(a.p,{children:"Estas propiedades indican el modelo de documento, el pais y el tipo de documento, respectivamente, que se ha capturado."}),"\n",(0,o.jsx)(a.h4,{id:"515-propiedades-matchingsidesscore-matchingfrontscore-y-matchingbackscore",children:"5.1.5. Propiedades matchingSidesScore, matchingFrontScore y matchingBackScore"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"La propiedad 'matchingSidesScore' devuelve un c\xe1lculo de la similitud de los datos le\xeddos entre el front y el back del documento. El c\xe1lculo se realiza comprobando la similitud entre los campos comunes le\xeddos en ambas caras. El resultado del c\xe1lculo ser\xe1 un valor entre 0.0 y 1.0 para el caso de que existan campos comunes en el documento. Cuanto mayor es el valor, m\xe1s similares son los datos comparados."}),"\n",(0,o.jsx)(a.li,{children:"La propiedad 'matchingFrontScore' devuelve un c\xe1lculo de la similitud de los datos le\xeddos del front del documento. El c\xe1lculo se realiza comprobando la similitud entre los campos comunes le\xeddos en el frontal del document. El resultado del c\xe1lculo ser\xe1 un valor entre 0.0 y 1.0 para el caso de que existan campos comunes en el frontal. Cuanto mayor es el valor, m\xe1s similares son los datos comparados."}),"\n",(0,o.jsx)(a.li,{children:"La propiedad 'matchingBackScore' devuelve un c\xe1lculo de la similitud de los datos le\xeddos del back del documento. El c\xe1lculo se realiza comprobando la similitud entre los campos comunes le\xeddos en el dorsal del document. El resultado del c\xe1lculo ser\xe1 un valor entre 0.0 y 1.0 para el caso de que existan campos comunes en el dorsal. Cuanto mayor es el valor, m\xe1s similares son los datos comparados."}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Si el c\xe1lculo devuelve -1.0 es que el documento no contiene campos comunes o a\xfan no se tiene informaci\xf3n de las dos caras."}),"\n",(0,o.jsx)(a.h4,{id:"516-propiedad-captureprogress",children:"5.1.6. Propiedad captureProgress"}),"\n",(0,o.jsx)(a.p,{children:"Esta propiedad devuelve el estado en el que se encontraba el proceso de captura cuando el widget termin\xf3. Estos son los posibles valores:"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{children:"\tFront_Detection_None = 0\n\tFront_Detection_Uncertain = 1\n\tFront_Detection_Completed = 2\n\tFront_Document_Analyzed = 3\n\tBack_Detection_None = 4\n\tBack_Detection_Uncertain = 5\n\tBack_Detection_Completed = 6\n\tBack_Document_Analyzed = 7\n"})}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"0"}),": En la lectura del Front, el widget termin\xf3 sin poder haber detectado nada. Generalmente cuando no se pone ning\xfan documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"1"}),": En la lectura del Front, el widget termin\xf3 habiendo detectado parcialmente un documento. En este caso algunos de los elementos esperados se han conseguido detectar, pero no todos los necesarios."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"2"}),": En la lectura del Front, el widget termin\xf3 habiendo completado la detecci\xf3n de todos los elementos del documento. Si el widget acaba en este estado es porque el an\xe1lisis de OCR no se ha podido completar con \xe9xito"]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"3"}),": En la lectura del Front, el widget termin\xf3 habiendo analizado y extra\xeddo todo el OCR del documento. Este es el estado en el que acabar\xeda una lectura correcta del Front de un documento."]}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Los estados del 4 al 7 son exactamente iguales solo que se refieren al resultado del proceso cuando se analiza el back."}),"\n",(0,o.jsx)(a.h4,{id:"517-propiedad-timeoutdiagnostic",children:"5.1.7. Propiedad timeoutDiagnostic"}),"\n",(0,o.jsx)(a.p,{children:"Esta propiedad devuelve una cadena de texto donde se explica cu\xe1l ha sido el motivo de que el widget haya terminado por timeout. Dicha cadena de texto puede ser utilizada en una posterior pantalla de timeout donde la aplicaci\xf3n principal puede dar m\xe1s informaci\xf3n al usuario sobre lo que ocurri\xf3 durante la captura del documento."}),"\n",(0,o.jsx)(a.h3,{id:"52-diccionario-ocrresults",children:"5.2. Diccionario ocrResults"}),"\n",(0,o.jsxs)(a.p,{children:["Este diccionario contiene todos los datos detectados en el documento. Las claves de cada campo est\xe1n codificadas de tal forma que la propia clave contiene informaci\xf3n de donde se ha obtenido el valor. As\xed, por ejemplo, la clave ",(0,o.jsx)(a.code,{children:"Front/MRZ/DocumentNumber"})," indica el valor del DocumentNumber que se ha le\xeddo en el Front del documento y en la regi\xf3n del MRZ. Estas claves dependen del documento capturado y por tanto ser\xe1n diferentes entre distintos pa\xedses y modelos de documento."]}),"\n",(0,o.jsx)(a.p,{children:"El diccionario tambi\xe9n contiene claves con nombres m\xe1s gen\xe9ricos y que no llevan informaci\xf3n relativa a la ubicaci\xf3n. Estas claves contienen el dato m\xe1s completo de todos los le\xeddos para dicho campo."}),"\n",(0,o.jsx)(a.p,{children:"Estas claves son los siguientes:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"FirstName"}),": El valor asociado a esta clave contiene el nombre del usuario."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"LastName"}),": El valor asociado a esta clave contiene los apellidos del usuario."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DateOfBirth"}),": El valor asociado a esta clave contiene la fecha de nacimiento detectada en el documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"Gender"}),": El valor asociado a esta clave contiene el sexo del usuario detectado en el documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"Nationality"}),": El valor asociado a esta clave contiene la nacionalidad del usuario detectado en el documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DocumentNumber"}),": El valor asociado a esta clave contiene el n\xfamero de documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DateOfExpiry"}),": El valor asociado a esta clave contiene la fecha de expiraci\xf3n del documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"Issuer"}),": El valor asociado a esta clave contiene el editor del documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DateofIssue"}),": El valor asociado a esta clave contiene la fecha de expedici\xf3n del documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"PlaceOfBirth"}),": El valor asociado a esta clave contiene el lugar de nacimiento del usuario."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"Address"}),": El valor asociado a esta clave contiene la direcci\xf3n detectada en el documento."]}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Adicionalmente se a\xf1aden claves del propio objeto results para hacer m\xe1s f\xe1cil su b\xfasqueda:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DocumentCaptured"}),": Valor del modelo de documento que se ha capturado seg\xfan el .xml de modelos. Corresponde a la propiedad documentCaptured."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"MatchingSidesScore"}),": Valor que indica la correspondencia entre las caras leidas del documento. Corresponde a la propiedad matchingSidesScore."]}),"\n"]})]})}function u(e={}){const{wrapper:a}={...(0,d.R)(),...e.components};return a?(0,o.jsx)(a,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453(e,a,n){n.d(a,{R:()=>t,x:()=>r});var i=n(96540);const o={},d=i.createContext(o);function t(e){const a=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(d.Provider,{value:a},e.children)}}}]);