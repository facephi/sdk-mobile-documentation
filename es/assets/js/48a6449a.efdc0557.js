"use strict";(globalThis.webpackChunksdk_mobile_doc=globalThis.webpackChunksdk_mobile_doc||[]).push([[53040],{28453(e,n,a){a.d(n,{R:()=>l,x:()=>d});var i=a(96540);const s={},r=i.createContext(s);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:n},e.children)}},72191(e,n,a){a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Selphi_widget_android","title":"Selphi Widget Android","description":"1. Introducci\xf3n","source":"@site/i18n/es/docusaurus-plugin-content-docs-resources/current/Selphi_widget_android.md","sourceDirName":".","slug":"/Selphi_widget_android","permalink":"/sdk-mobile-documentation/es/docs/resources/Selphi_widget_android","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Recursos de Selphi","permalink":"/sdk-mobile-documentation/es/docs/resources/Selphi_resources"},"next":{"title":"Selphi Widget iOS","permalink":"/sdk-mobile-documentation/es/docs/resources/Selphi_widget_ios"}}');var s=a(74848),r=a(28453);const l={},d="Selphi Widget Android",o={},c=[{value:"1. Introducci\xf3n",id:"1-introducci\xf3n",level:2},{value:"1.1. Versi\xf3n del widget",id:"11-versi\xf3n-del-widget",level:3},{value:"1.2. Requerimientos m\xednimos",id:"12-requerimientos-m\xednimos",level:3},{value:"2. API (Interfaz de programaci\xf3n de aplicaciones)",id:"2-api-interfaz-de-programaci\xf3n-de-aplicaciones",level:2},{value:"2.1. Propiedades",id:"21-propiedades",level:3},{value:"2.1.1. ResourcesPath",id:"211-resourcespath",level:4},{value:"2.2. M\xe9todos",id:"22-m\xe9todos",level:3},{value:"2.2.0. setLicense",id:"220-setlicense",level:4},{value:"2.2.1. setLivenessMode",id:"221-setlivenessmode",level:4},{value:"2.2.2. setStabilizationMode",id:"222-setstabilizationmode",level:4},{value:"2.2.3. setQRFlag",id:"223-setqrflag",level:4},{value:"2.2.4. setUserTags",id:"224-setusertags",level:4},{value:"2.2.5. setResourcesPath",id:"225-setresourcespath",level:4},{value:"2.2.6 setLocale",id:"226-setlocale",level:4},{value:"2.2.7. setFullscreen",id:"227-setfullscreen",level:4},{value:"2.2.8. setCameraPreviewSize",id:"228-setcamerapreviewsize",level:4},{value:"2.2.9 setFrontFacingCameraAsPreferred",id:"229-setfrontfacingcameraaspreferred",level:4},{value:"2.2.10 setBackFacingCameraAsPreferred",id:"2210-setbackfacingcameraaspreferred",level:4},{value:"2.2.11 logImages",id:"2211-logimages",level:4},{value:"2.2.12 setTutorialFlag",id:"2212-settutorialflag",level:4},{value:"2.2.13 setDebug",id:"2213-setdebug",level:4},{value:"2.2.14 setVideoFilename",id:"2214-setvideofilename",level:4},{value:"2.2.15 generateTemplateRawFromBitmap",id:"2215-generatetemplaterawfrombitmap",level:4},{value:"2.2.16 generateTemplateRawFromByteArray",id:"2216-generatetemplaterawfrombytearray",level:4},{value:"2.2.17 getWidgetVersion",id:"2217-getwidgetversion",level:4},{value:"2.2.18 setShowAfterCapture",id:"2218-setshowaftercapture",level:4},{value:"2.2.19 setExtractionDuration",id:"2219-setextractionduration",level:4},{value:"2.2.20 setPreferredOrientation",id:"2220-setpreferredorientation",level:4},{value:"2.3. Integraci\xf3n del widget Android",id:"23-integraci\xf3n-del-widget-android",level:3},{value:"2.4. Respuesta del widget",id:"24-respuesta-del-widget",level:3},{value:"2.4.1. El interfaz IFPhiWidgetEventListener",id:"241-el-interfaz-ifphiwidgeteventlistener",level:4},{value:"2.5. Ejemplo recuperaci\xf3n datos del widget",id:"25-ejemplo-recuperaci\xf3n-datos-del-widget",level:3},{value:"3. Personalizaci\xf3n del Widget",id:"3-personalizaci\xf3n-del-widget",level:2},{value:"3.1. Descripci\xf3n b\xe1sica",id:"31-descripci\xf3n-b\xe1sica",level:3},{value:"3.1.1. Personalizaci\xf3n de textos",id:"311-personalizaci\xf3n-de-textos",level:4},{value:"3.1.2. Personalizaci\xf3n de im\xe1genes",id:"312-personalizaci\xf3n-de-im\xe1genes",level:4},{value:"3.1.3. Personalizaci\xf3n de colores",id:"313-personalizaci\xf3n-de-colores",level:4},{value:"3.1.4. Personalizaci\xf3n de tipo de fuente",id:"314-personalizaci\xf3n-de-tipo-de-fuente",level:4},{value:"3.2. Descripci\xf3n avanzada",id:"32-descripci\xf3n-avanzada",level:3},{value:"3.2.1. Widget.xml",id:"321-widgetxml",level:4},{value:"3.2.2. Carpeta strings",id:"322-carpeta-strings",level:4},{value:"3.2.3. Carpeta resources",id:"323-carpeta-resources",level:4},{value:"3.2.4. Elemento BACKGROUND",id:"324-elemento-background",level:4},{value:"3.2.5. Elemento BUTTON",id:"325-elemento-button",level:4},{value:"3.2.6. Elemento TEXT",id:"326-elemento-text",level:4},{value:"3.2.7. Elemento IMAGE",id:"327-elemento-image",level:4},{value:"3.2.8. Elemento VIDEO",id:"328-elemento-video",level:4},{value:"4. Integraci\xf3n en aplicaciones Android",id:"4-integraci\xf3n-en-aplicaciones-android",level:2},{value:"4.1. Requisitos m\xednimos",id:"41-requisitos-m\xednimos",level:3},{value:"4.2. Contenido suministrado",id:"42-contenido-suministrado",level:3},{value:"4.3. Configuraci\xf3n del widget Android",id:"43-configuraci\xf3n-del-widget-android",level:3}];function t(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"selphi-widget-android",children:"Selphi Widget Android"})}),"\n",(0,s.jsx)(n.h2,{id:"1-introducci\xf3n",children:"1. Introducci\xf3n"}),"\n",(0,s.jsx)(n.p,{children:"En este manual se documenta la configuraci\xf3n y funcionamiento de FacePhi Selphi Android Widget en aplicaciones desarrolladas para el sistema operativo Android, as\xed como su integraci\xf3n en proyectos para este sistema operativo.\nSe describen:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Propiedades, m\xe9todos y comunicaci\xf3n que integran este widget."}),"\n",(0,s.jsx)(n.li,{children:"Creaci\xf3n de un proyecto Android que integre el widget para cualquier aplicaci\xf3n Android."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"11-versi\xf3n-del-widget",children:"1.1. Versi\xf3n del widget"}),"\n",(0,s.jsx)(n.p,{children:"La versi\xf3n del widget se puede consultar, incluso estando ya integrado en una aplicaci\xf3n, de la siguiente manera:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Buscamos el fichero ",(0,s.jsx)(n.code,{children:"fphi-core-widget-android.aar"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Extraemos su contenido o accedemos a \xe9l como si fuera un archivo .zip."}),"\n",(0,s.jsxs)(n.li,{children:["En el interior encontraremos el fichero ",(0,s.jsx)(n.code,{children:"AndroidManifest.xml"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Lo abrimos como si fuera un documento de texto."}),"\n",(0,s.jsxs)(n.li,{children:["En el interior, en una de las primeras l\xedneas, encontramos el nombre de versi\xf3n (android",":versionName","=\u201dx.x.x.x\u201d). El n\xfamero de versi\xf3n del widget ser\xe1 el que se indica en esa l\xednea ",(0,s.jsx)(n.code,{children:"android:versionName=\u201dx.x.x.x\u201d"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"12-requerimientos-m\xednimos",children:"1.2. Requerimientos m\xednimos"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Android API level: 15"}),"\n",(0,s.jsx)(n.li,{children:"RAM: 2 GB"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Si se usa la caracteristica de Detecci\xf3n de Ataques de Inyecci\xf3n (IAD) entonces:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"API level 24"}),"\n",(0,s.jsx)(n.li,{children:"RAM: 3 GB"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-api-interfaz-de-programaci\xf3n-de-aplicaciones",children:"2. API (Interfaz de programaci\xf3n de aplicaciones)"}),"\n",(0,s.jsx)(n.h3,{id:"21-propiedades",children:"2.1. Propiedades"}),"\n",(0,s.jsxs)(n.p,{children:["El widget Android proporcionado es una clase de tipo ",(0,s.jsx)(n.code,{children:"Activity"})," que permite iniciar una extracci\xf3n de caracter\xedsticas faciales, as\xed como configurar el mismo con valores adecuados para la extracci\xf3n."]}),"\n",(0,s.jsxs)(n.p,{children:["El paso de argumentos entre la clase principal del proyecto y el widget se sucede mediante clases Parcelables. La clase que se usa para dicha comunicaci\xf3n es la clase ",(0,s.jsx)(n.code,{children:"WidgetConfiguration"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Cuando se crea un nuevo widget en una aplicaci\xf3n Android, se pueden establecer ciertas propiedades del mismo que indican el modo de funcionamiento del mismo.\nEsa configuraci\xf3n del widget se maneja mediante la clase ",(0,s.jsx)(n.code,{children:"WidgetConfiguration"}),". Esta clase contiene varios m\xe9todos que le permiten establecer las siguientes propiedades:"]}),"\n",(0,s.jsx)(n.h4,{id:"211-resourcespath",children:"2.1.1. ResourcesPath"}),"\n",(0,s.jsx)(n.p,{children:"Establece la ruta del archivo de recursos que utilizar\xe1 el widget para su configuraci\xf3n gr\xe1fica. La ruta de este archivo debe especificarse relativa a la carpeta \u2018assets\u2019 de la aplicaci\xf3n principal."}),"\n",(0,s.jsx)(n.h3,{id:"22-m\xe9todos",children:"2.2. M\xe9todos"}),"\n",(0,s.jsxs)(n.p,{children:["Dispone de los siguientes m\xe9todos para configurar el widget, en la clase ",(0,s.jsx)(n.code,{children:"WidgetConfiguration"}),":"]}),"\n",(0,s.jsx)(n.h4,{id:"220-setlicense",children:"2.2.0. setLicense"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setLicense(String license)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Establece el contenido de licencia que deber\xe1 utilizarse para acceder a algunas caracteristicas del widget."}),"\n",(0,s.jsx)(n.h4,{id:"221-setlivenessmode",children:"2.2.1. setLivenessMode"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setLivenessMode(WidgetLivenessMode liveness)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Establece el modo liveness del widget.\nLos valores permitidos son:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"LIVENESS_NONE"}),": Indica que no debe activarse el modo detecci\xf3n de foto en los procesos de autenticaci\xf3n."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"LIVENESS_MOVE"}),": Indica que debe activarse el modo de deteccion de movimiento activo."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"LIVENESS_PASSIVE"}),': Indica que la prueba de vida pasiva se realiza en el servidor, enviando para tal fin la "BestImage" o el "TemplateRaw" correspondiente.']}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"222-setstabilizationmode",children:"2.2.2. setStabilizationMode"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setStabilizationMode(boolean sm)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Establece un modo de estabilizaci\xf3n previo a cualquier proceso de autenticaci\xf3n en el widget. Con este modo se obliga al widget a no empezar ning\xfan proceso si el usuario no se encuentra con la cabeza mirando al frente y sin moverla."}),"\n",(0,s.jsx)(n.h4,{id:"223-setqrflag",children:"2.2.3. setQRFlag"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setQRFlag(boolean qr)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Indica si se quiere o no activar la lectura de QR previo al proceso de autenticaci\xf3n."}),"\n",(0,s.jsx)(n.h4,{id:"224-setusertags",children:"2.2.4. setUserTags"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setUserTags(byte[] uTags)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Establece 4 bytes con datos que pueden ser configurados por la aplicaci\xf3n principal y que ser\xe1n incorporados a las plantillas generadas por el extractor."}),"\n",(0,s.jsx)(n.h4,{id:"225-setresourcespath",children:"2.2.5. setResourcesPath"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setResourcesPath(String path)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Establece la ruta donde se encuentra el archivo de recursos del widget. Este archivo contiene tanto los recursos gr\xe1ficos como los recursos de localizaci\xf3n.\nEsta ruta debe especificarse relativa a la carpeta \u2018assets\u2019 de la aplicaci\xf3n principal."}),"\n",(0,s.jsx)(n.h4,{id:"226-setlocale",children:"2.2.6 setLocale"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setLocale(String locale)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Fuerza al widget a utilizar la configuraci\xf3n de idioma indicado por el par\xe1metro locale.\nEste par\xe1metro acepta tanto un c\xf3digo de idioma (p. ej. \u2018en\u2019) como un c\xf3digo de identificaci\xf3n regional (p. ej. \u2018en_US\u2019). Si el archivo de recursos del widget no tuviera una localizaci\xf3n para el \u2018locale\u2019 seleccionado su configuraci\xf3n pasar\xeda a utilizar el idioma por defecto."}),"\n",(0,s.jsx)(n.h4,{id:"227-setfullscreen",children:"2.2.7. setFullscreen"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setFullscreen(boolean fs)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Establece si se desea que el widget se arranque en modo pantalla completa, ocultando el status bar de Android."}),"\n",(0,s.jsx)(n.h4,{id:"228-setcamerapreviewsize",children:"2.2.8. setCameraPreviewSize"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setCameraPreviewSize(Point cameraPreviewSize)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Establece la resoluci\xf3n de c\xe1mara pasando un objeto que contiene el ancho y alto en p\xedxels de la imagen."}),"\n",(0,s.jsx)(n.h4,{id:"229-setfrontfacingcameraaspreferred",children:"2.2.9 setFrontFacingCameraAsPreferred"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setFrontFacingCameraAsPreferred()\n"})}),"\n",(0,s.jsx)(n.p,{children:"Establece como c\xe1mara preferida para los procesos de autenticaci\xf3n la c\xe1mara frontal del dispositivo."}),"\n",(0,s.jsx)(n.h4,{id:"2210-setbackfacingcameraaspreferred",children:"2.2.10 setBackFacingCameraAsPreferred"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setBackFacingCameraAsPreferred()\n"})}),"\n",(0,s.jsx)(n.p,{children:"Establece como c\xe1mara preferida para los procesos de autenticaci\xf3n la c\xe1mara trasera del dispositivo."}),"\n",(0,s.jsx)(n.h4,{id:"2211-logimages",children:"2.2.11 logImages"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void logImages(boolean logImages)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Activa o no el retorno de la lista de im\xe1genes que se han capturado durante la ejecuci\xf3n de proceso de extracci\xf3n. Si el par\xe1metro de entrada se encuentra a ",(0,s.jsx)(n.code,{children:"true"}),", a la hora de ejecutar el m\xe9todo ",(0,s.jsx)(n.code,{children:"getImages()"})," se devolver\xe1 la lista de im\xe1genes procesadas. En caso contrario, devolver\xe1 una lista vac\xeda.\nEn el caso de no utilizar im\xe1genes, se recomienda mantener este modo desactivado con el fin de conseguir mejorar el rendimiento de memoria en los dispositivos."]}),"\n",(0,s.jsx)(n.h4,{id:"2212-settutorialflag",children:"2.2.12 setTutorialFlag"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setTutorialFlag (boolean debug)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Establece la opci\xf3n de mostrar un tutorial del proceso que se va a realizar a continuaci\xf3n. Una vez concluya el tutorial, el widget continuar\xe1 con el proceso configurado."}),"\n",(0,s.jsx)(n.h4,{id:"2213-setdebug",children:"2.2.13 setDebug"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setDebug(boolean debug)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Establece el modo de depuraci\xf3n del widget."}),"\n",(0,s.jsx)(n.h4,{id:"2214-setvideofilename",children:"2.2.14 setVideoFilename"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setVideoFilename(String filename)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Establece la ruta absoluta del nombre del archivo en el que se grabar\xe1 un video del proceso de autenticaci\xf3n. La aplicaci\xf3n es la responsable de solicitar los permisos necesarios al tel\xe9fono en caso de que esa ruta requiera de permisos adicionales. El widget, por defecto, no realizar\xe1 ning\xfan proceso de grabaci\xf3n a menos que se especifique una ruta de archivo mediante este m\xe9todo."}),"\n",(0,s.jsx)(n.h4,{id:"2215-generatetemplaterawfrombitmap",children:"2.2.15 generateTemplateRawFromBitmap"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public static byte[] generateTemplateRawFromBitmap(Bitmap img)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Genera un templateRaw a partir de una imagen nativa de Android. Esta llamada es est\xe1tica por lo que no requiere del lanzamiento del widget para realizar esta operaci\xf3n."}),"\n",(0,s.jsx)(n.h4,{id:"2216-generatetemplaterawfrombytearray",children:"2.2.16 generateTemplateRawFromByteArray"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public static byte[] generateTemplateRawFromByteArray(byte[] img)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Genera un templateRaw a partir de una imagen en formato array de bytes. Este array debe contener la representaci\xf3n de la imagen en formato jpg o png. Esta llamada es est\xe1tica por lo que no requiere del lanzamiento del widget para realizar esta operaci\xf3n."}),"\n",(0,s.jsx)(n.h4,{id:"2217-getwidgetversion",children:"2.2.17 getWidgetVersion"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public static String getWidgetVersion()\n"})}),"\n",(0,s.jsx)(n.p,{children:"Devuelve la version actual del widget en formato cadena. Esta llamada es est\xe1tica por lo que no requiere del lanzamiento del widget para realizar esta operaci\xf3n."}),"\n",(0,s.jsx)(n.h4,{id:"2218-setshowaftercapture",children:"2.2.18 setShowAfterCapture"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setShowAfterCapture(boolean value)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Activa una preview de la selfie obtenida para que el usuario pueda aceptar la captura o repetirla."}),"\n",(0,s.jsx)(n.h4,{id:"2219-setextractionduration",children:"2.2.19 setExtractionDuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setExtractionDuration(FPhiWidgetExtractionDuration extractionDuration)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Configura la cantidad de tiempo que el widget permanecer\xe1 extrayendo las caracteristicas faciales del usuario."}),"\n",(0,s.jsx)(n.p,{children:"Los valores posibles son:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Short"}),": Duraci\xf3n de la extracci\xf3n de 1 segundo. (Por defecto)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Medium"}),": Duraci\xf3n de la extracci\xf3n de 2 segundos."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Long"}),": Duraci\xf3n de la extracci\xf3n de 3 segundos."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"2220-setpreferredorientation",children:"2.2.20 setPreferredOrientation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void setPreferredOrientation(WidgetOrientation value)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Configura las orientaciones que el widget permitir\xe1 en la ejecuci\xf3n."}),"\n",(0,s.jsx)(n.p,{children:"Los posibles valores son:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FULL_SENSOR"}),": Todas las orientaciones son permitidas."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FULL_SENSOR_NO_REVERSE"}),": Todas las orientaciones excepto portrait invertido son permitidas."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PORTRAIT"}),": Portrait permitida. (Por defecto)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"LANDSCAPE_LEFT"}),": Landscape izquierda permitida."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"LANDSCAPE_RIGHT"}),": Landscape derecha permitida."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PORTRAIT_REVERSE"}),": Portrait invertido permitida."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PORTRAIT_SENSOR"}),": Portrait y portrait invertido permitidas."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"LANDSCAPE_SENSOR"}),": Landscape izquierda y derecha permitidas."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"LOCKED"}),": Todas las orientaciones permitidas pero el widget no cambiar\xe1 de orientaci\xf3n din\xe1micamente."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"23-integraci\xf3n-del-widget-android",children:"2.3. Integraci\xf3n del widget Android"}),"\n",(0,s.jsx)(n.p,{children:"El siguiente ejemplo de c\xf3digo ilustra la forma de integrar el widget en una aplicaci\xf3n Android:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    /**\n    * Creates an intent that invokes the widget.\n    */\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        setContentView(R.layout.main);\n\n        Intent intent = new Intent(this, Widget.class);\n        startActivityForResult(intent, 1);\n    } \n"})}),"\n",(0,s.jsxs)(n.p,{children:["En el c\xf3digo proporcionado, se crea un objeto ",(0,s.jsx)(n.code,{children:"Intent"}),", el cual nos va a permitir cambiar entre activities. Este objeto se genera llamando a la clase del widget de Android:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    Intent intent = new Intent(this, Widget.class);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Para poder ejecutar un ",(0,s.jsx)(n.code,{children:"Activity"})," desde nuestra aplicaci\xf3n principal, en nuestro ",(0,s.jsx)(n.code,{children:"AndroidManifest.xml"})," debemos declarar nuestras actividades."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'    <activity\n    android:name="com.facephi.selphi.Widget"\n    android:label="Your app name"\n    android:screenOrientation="portrait">\n    </activity>\n'})}),"\n",(0,s.jsx)(n.p,{children:"Se le deben conceder permisos a la c\xe1mara para poder hacer uso de ella:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'    <uses-permission android:name="android.permission.CAMERA" />\n    <uses-feature android:name="android.hardware.camera" />\n'})}),"\n",(0,s.jsx)(n.p,{children:"Es necesario establecer el archivo de donde se va a obtener la personalizacion gr\xe1fica del widget."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'    Intent intent = new Intent(this, Widget.class);\n    WidgetConfiguration conf = new WidgetConfiguration("fphi-widget-resources-SelphiLive-1.2.zip");\n    intent.putExtra("configuration", conf);\n    startActivityForResult(intent, 1);\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Se genera un objeto de tipo ",(0,s.jsx)(n.code,{children:"WidgetConfiguration"})," que nos va a servir para la comunicaci\xf3n con el widget e indicarle la configuraci\xf3n que va a tener el extractor. La instrucci\xf3n para pasarle la configuraci\xf3n al extractor es la siguiente:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'    intent.putExtra("configuration", conf);\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Donde ",(0,s.jsx)(n.code,{children:"conf"})," es nuestro objeto ",(0,s.jsx)(n.code,{children:"WidgetConfiguration"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Es indispensable que el primer par\xe1metro del m\xe9todo ",(0,s.jsx)(n.code,{children:"putExtra(\u2026, \u2026)"})," sea un ",(0,s.jsx)(n.code,{children:"String"}),' cuyo contenido sea "configuration", tal y como se indica en el ejemplo, ya que el widget espera recibir esta cadena en su llamada. En caso contrario, la comunicaci\xf3n no se va a realizar.\nEl siguiente paso ser\xe1 inicializar la ',(0,s.jsx)(n.code,{children:"Activity"})," usando el m\xe9todo ",(0,s.jsx)(n.code,{children:"startActivityForResult()"}),". Este m\xe9todo lanzar\xe1 la ",(0,s.jsx)(n.code,{children:"Activity"})," del widget y esperar\xe1 respuesta del mismo. La llamada ser\xe1 la siguiente:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    startActivityForResult(intent, 1);\n"})}),"\n",(0,s.jsx)(n.p,{children:"Se le pasa como primer par\xe1metro el intent al que le habremos insertado la configuraci\xf3n del extractor. Como segundo par\xe1metro se le pasa una constante utilizada para saber desde d\xf3nde se ha realizado esta llamada, cada llamada deber\xe1 de usar una constante diferente para poder diferenciar el flujo de la aplicaci\xf3n."}),"\n",(0,s.jsx)(n.h3,{id:"24-respuesta-del-widget",children:"2.4. Respuesta del widget"}),"\n",(0,s.jsx)(n.p,{children:"Cuando una actividad que ha sido llamada termina y vuelve a otra, se produce un evento llamado \u201conActivityResult(\u2026)\u201d. Cuando el proceso de extracci\xf3n de patrones haya finalizado en el widget, este evento se lanzar\xe1, devolviendo la informaci\xf3n necesaria para su comunicaci\xf3n."}),"\n",(0,s.jsx)(n.p,{children:"Par\xe1metros recibidos:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"requestCode"}),": C\xf3digo tipo entero que coincide con la constante que le hayamos pasado a la actividad principal como segundo par\xe1metro en ",(0,s.jsx)(n.code,{children:"startActivityForResult()"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"resultCode"}),": El widget devolver\xe1 result_canceled o result_ok seg\xfan si el proceso entero ha generado alg\xfan fallo durante la extracci\xf3n, se ha cancelado de forma manual o si, por el contrario, termina de forma exitosa."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"data"}),": El widget al finalizar su proceso devuelve un ",(0,s.jsx)(n.code,{children:"Intent"})," con su resultado final."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Ejemplo de c\xf3digo:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        if (data == null) return;\n    \n        WidgetResult result = data.getParcelableExtra("result");\n        if (result == null){\n            Toast.makeText(getBaseContext(), getResources().getString(R.string.message_no_results),Toast.LENGTH_LONG).show();\n            return;\n        }\n\n        // 1. La extracci\xf3n finaliza con errores\n        if (resultCode == RESULT_CANCELED) {\n            if (result.getException() != null){\n                if(result.getException().getExceptionType() != null) {\n                    String exc_message = "";\n                    switch(result.getException().getExceptionType()) {\n                        case StoppedManually:\n                            exc_message = getResources().getString (R.string.message_user_stopped_manually);\n                            break;\n                        case Timeout:\n                            exc_message = getResources().getString(R.string.message_timeout_error);\n                            break;\n                        case CameraPermissionDenied:\n                            exc_message = getResources().getString(R.string.message_camera_permission_error);\n                            break;\n                        case SettingsPermissionDenied:\n                            exc_message = getResources().getString(R.string.message_settings_permission_error);\n                            break;\n                        default:\n                            exc_message = getResources().getString(R.string.message_unexpected_error);\n                            break;\n                    }\n                } \n                Toast.makeText(getBaseContext(),exc_message, Toast.LENGTH_LONG).show();\n            }\n        }\n    }\n\n    // 2. La extracci\xf3n ha finalizado con \xe9xito. \n    // La aplicaci\xf3n puede recuperar la informaci\xf3n del "templateRaw".\n    byte[] templateRaw = result.getTemplateRaw();\n'})}),"\n",(0,s.jsxs)(n.p,{children:["En cualquier modo utilizado (Authenticate, Register) se obtiene el resultado de la extracci\xf3n en un objeto de la clase ",(0,s.jsx)(n.code,{children:"WidgetResult"}),".\nPara obtener la plantilla resultante de la extracci\xf3n, usar la siguiente llamada:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'    WidgetResult wResult = data.getParcelableExtra("result");\n    byte[] templateRaw = wResult.getTemplateRaw();\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Cada ",(0,s.jsx)(n.code,{children:"WidgetResult"})," contiene la siguiente informaci\xf3n:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"getTemplateRaw()"}),": Devuelve la plantilla en bruto que se genera despu\xe9s del proceso de extracci\xf3n."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"getImages()"}),": Si el flag logImages() se activ\xf3, devuelve las im\xe1genes que se obtienen durante el proceso de extracci\xf3n. Las im\xe1genes se devuelven ordenadas por el instante de tiempo en el que se obtubieron."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"getBestImage()"}),": Devuelve la mejor imagen extra\xedda del proceso de autenticaci\xf3n. Esta imagen es la imagen con el tama\xf1o original extra\xedda de la c\xe1mara."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"getBestImageCropped()"}),': Devuelve una imagen recortada centrada en la cara del usuario. Esta imagen se obtiene a partir de la "bestImage". \xc9sta es la imagen que se deber\xe1 utilizar como imagen caracter\xedstica del usuario que realiz\xf3 el proceso a modo de \u2018avatar\u2019']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"getLivenessDiagnostic()"}),": Devuelve el diagn\xf3stico final de la ejecuci\xf3n del proceso de liveness."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"getQRData()"}),": Devuelve los datos del c\xf3digo QR capturado."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"getIADBundle()"}),": Devuelve los datos encriptados del analisis de deteccion de ataques de inyecci\xf3n de video."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"getException()"}),": Devuelve la excepci\xf3n generada desde el widget."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["El m\xe9todo ",(0,s.jsx)(n.code,{children:"getException()"})," devuelve un objeto de tipo WidgetException que contiene tanto el mensaje de la excepci\xf3n ",(0,s.jsx)(n.code,{children:"getMessage()"})," como el tipo de excepci\xf3n ",(0,s.jsx)(n.code,{children:"getExceptionType()"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Los posibles valores para el tipo de excepci\xf3n son:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"WidgetExceptionType.StoppedManually"}),": Excepci\xf3n que se produce cuando el usuario para la extracci\xf3n de forma manual."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"WidgetExceptionType.Timeout"}),": Excepci\xf3n que se produce cuando transcurre un tiempo m\xe1ximo sin conseguir finalizar la extracci\xf3n con \xe9xito."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"WidgetExceptionType.CameraPermissionDenied"}),": Excepci\xf3n que se produce cuando el widget no tiene permiso de acceso a la c\xe1mara."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"WidgetExceptionType.SettingsPermissionDenied"}),": Excepci\xf3n que se produce cuando el widget no tiene permiso para modificar ajustes de configuraci\xf3n."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Otros Valores"}),": Otras excepciones producidas en el widget."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"241-el-interfaz-ifphiwidgeteventlistener",children:"2.4.1. El interfaz IFPhiWidgetEventListener"}),"\n",(0,s.jsx)(n.p,{children:"Este interfaz permite que el widget se comunique con la aplicaci\xf3n principal en tiempo real y notifique sobre eventos importantes que ocurran durante el transcurso de la ejecuci\xf3n."}),"\n",(0,s.jsx)(n.p,{children:"Para esto ser\xe1 necesario que la aplicaci\xf3n cree una clase que implemente este interfaz el cual consta de un \xfanico m\xe9todo:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    public void onEvent(long time, @NonNull String type, @NonNull String info)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Esta funci\xf3n recibe como par\xe1metros el tiempo en el que se lanz\xf3 el evento, codificado como UnixTime en milisegundos, el tipo de evento que se ha producido y la informaci\xf3n adicional asociada a dicho evento."}),"\n",(0,s.jsx)(n.p,{children:"Los eventos recibidos son principalmente de 3 tipos:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Eventos relacionados con cambios de pantalla o de estados en los que se encuentra el widget."}),"\n",(0,s.jsx)(n.li,{children:"Eventos de usuario como pueden ser pulsaciones de botones o movimientos tipo swipe."}),"\n",(0,s.jsx)(n.li,{children:"Eventos relacionados con los procesos que se est\xe1n llevando acabo, como pueden ser errores por ausencia de cara, por movimientos incorrectos, o por no hacer caso a las indicaciones que se reciben, entre otros."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Mediante estos eventos se comunica a la aplicaci\xf3n principal aquellos datos que puedan ser de inter\xe9s a la hora de analizar el comportamiento de los usuarios cuando usan la tecnolog\xeda.\nUna vez creada la clase que implementa este interfaz, la aplicaci\xf3n llamar\xe1 al m\xe9todo del objeto de configuraci\xf3n:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'    conf.setIFPhiWidgetEventListener_classname("nombre.clase.interfaz")\n'})}),"\n",(0,s.jsx)(n.p,{children:"Pas\xe1ndole el nombre completo de la clase que implementa dicho interfaz."}),"\n",(0,s.jsx)(n.h3,{id:"25-ejemplo-recuperaci\xf3n-datos-del-widget",children:"2.5. Ejemplo recuperaci\xf3n datos del widget"}),"\n",(0,s.jsx)(n.p,{children:"En el siguiente c\xf3digo se muestra al usuario el correcto uso para la recuperaci\xf3n de la informaci\xf3n proveniente del widget:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'    // Recoge la respuesta del widget\n    WidgetResult result = data.getParcelableExtra("result");\n'})}),"\n",(0,s.jsxs)(n.p,{children:["La clase ",(0,s.jsx)(n.code,{children:"WidgetResult"})," contiene informaci\xf3n acerca del resultado de extracci\xf3n, cualquier excepci\xf3n que pueda suceder y una lista de im\xe1genes para cada paso."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    // Devuelve un objeto de excepci\xf3n que contiene el mensaje y su tipo.\n    result.getException(); \n    // Devuelve la lista de im\xe1genes\n    result.getImages();\n    // Devuelve plantilla obtenida en la extracci\xf3n.\n    result.getTemplateRaw();\n"})}),"\n",(0,s.jsxs)(n.p,{children:["El m\xe9todo ",(0,s.jsx)(n.code,{children:"getImages()"})," devuelve una lista de ",(0,s.jsx)(n.code,{children:"FPhiImage"})," guardadas en la memoria nativa del dispositivo.\nPara transformar este tipo de objeto a Bitmap, usar el m\xe9todo est\xe1tico del widget ",(0,s.jsx)(n.code,{children:"FPhiWidgetAndroid.GetBitmap(width, height, config)"})]}),"\n",(0,s.jsxs)(n.p,{children:["NOTA IMPORTANTE: Para poder devolver las im\xe1genes del usuario, en la configuraci\xf3n del widget se debe establecer la propiedad ",(0,s.jsx)(n.code,{children:"logImages"})," a ",(0,s.jsx)(n.code,{children:"true"}),".\nDada la importante carga de memoria que se produce al procesar las im\xe1genes desde c\xe1mara, se requiere activar la propiedad ",(0,s.jsx)(n.code,{children:"largeHeap"})," para las actividades de Android en su ",(0,s.jsx)(n.code,{children:"AndroidManifest.xml"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'    <application android:largeHeap="true">\n        ...\n    </application>\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-personalizaci\xf3n-del-widget",children:"3. Personalizaci\xf3n del Widget"}),"\n",(0,s.jsxs)(n.p,{children:["El widget permite la personalizaci\xf3n de textos, im\xe1genes, fuentes de letra y colores. La personalizaci\xf3n se realiza mediante el archivo .zip suministrado con el widget. Este zip est\xe1 compuesto de un fichero llamado ",(0,s.jsx)(n.code,{children:"widget.xml"})," que contiene la definici\xf3n de todas las pantallas del widget, cada una de ellas con una serie de elementos los cuales permiten realizar la personalizaci\xf3n. El archivo zip tambi\xe9n contiene una carpeta con recursos gr\xe1ficos y otra carpeta con las traducciones de los textos."]}),"\n",(0,s.jsx)(n.h3,{id:"31-descripci\xf3n-b\xe1sica",children:"3.1. Descripci\xf3n b\xe1sica"}),"\n",(0,s.jsx)(n.h4,{id:"311-personalizaci\xf3n-de-textos",children:"3.1.1. Personalizaci\xf3n de textos"}),"\n",(0,s.jsx)(n.p,{children:"La personalizaci\xf3n de textos se realiza editando los textos de los archivos de traducciones existentes en el .zip de recursos."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    /strings/strings.es.xml\n    /strings/strings.xml\n"})}),"\n",(0,s.jsx)(n.h4,{id:"312-personalizaci\xf3n-de-im\xe1genes",children:"3.1.2. Personalizaci\xf3n de im\xe1genes"}),"\n",(0,s.jsx)(n.p,{children:"Para personalizar las im\xe1genes que usa el widget se deben a\xf1adir las im\xe1genes en el .zip de recursos. En el zip vienen 3 carpetas:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    /resources/163dpi\n    /resources/326dpi\n    /resources/489dpi\n"})}),"\n",(0,s.jsx)(n.p,{children:"Estas carpetas corresponden a las diferentes densidades de pantalla y se pueden crear tantas carpetas de densidad como se desee. En estas carpetas est\xe1n las versiones de las im\xe1genes para cada una de las resoluciones."}),"\n",(0,s.jsxs)(n.p,{children:["Es necesario a\xf1adir las im\xe1genes en todas las carpetas, ya que una vez determinada la resoluci\xf3n \xf3ptima para el dispositivo, el widget s\xf3lo carga im\xe1genes de la carpeta con la resoluci\xf3n elegida.\nLas im\xe1genes son referenciadas desde el archivo ",(0,s.jsx)(n.code,{children:"widget.xml"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"313-personalizaci\xf3n-de-colores",children:"3.1.3. Personalizaci\xf3n de colores"}),"\n",(0,s.jsxs)(n.p,{children:["La personalizaci\xf3n de los colores de los botones se realiza desde el archivo ",(0,s.jsx)(n.code,{children:"widget.xml"}),". En \xe9l se puede personalizar cualquier color de cualquier elemento gr\xe1fico que aparece en el widget. Simplemente basta con modificar el color de la propiedad deseada."]}),"\n",(0,s.jsx)(n.h4,{id:"314-personalizaci\xf3n-de-tipo-de-fuente",children:"3.1.4. Personalizaci\xf3n de tipo de fuente"}),"\n",(0,s.jsxs)(n.p,{children:["Los archivos de tipograf\xeda deben colocarse en la carpeta ",(0,s.jsx)(n.code,{children:"/resources/163dpi"})," y una vez ah\xed pueden ser referenciados desde el archivo ",(0,s.jsx)(n.code,{children:"widget.xml"}),". Para cambiar el tipo de letra de un elemento de texto bastar\xeda con modificar la propiedad \u2018font\u2019 y poner el nombre del archivo correspondiente."]}),"\n",(0,s.jsx)(n.p,{children:"En el siguiente apartado se ampliar\xe1 la informaci\xf3n acerca del contenido del bundle de recursos y el modo de modificar."}),"\n",(0,s.jsx)(n.h3,{id:"32-descripci\xf3n-avanzada",children:"3.2. Descripci\xf3n avanzada"}),"\n",(0,s.jsx)(n.h4,{id:"321-widgetxml",children:"3.2.1. Widget.xml"}),"\n",(0,s.jsx)(n.p,{children:"Este fichero contiene la definici\xf3n de todas las propiedades que son configurables en los procesos de autenticaci\xf3n. Est\xe1 dividido por pantallas de navegaci\xf3n y dentro de cada etiqueta de pantalla se encuentran todas las propiedades que pueden modificarse."}),"\n",(0,s.jsx)(n.h4,{id:"322-carpeta-strings",children:"3.2.2. Carpeta strings"}),"\n",(0,s.jsxs)(n.p,{children:["Esta carpeta contiene un fichero ",(0,s.jsx)(n.code,{children:"strings.xml"})," por cada traducci\xf3n que se desee soportar. El nombre debe estar formado de la siguiente manera:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    strings.(idioma).xml\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Siendo (idioma) el c\xf3digo del idioma. Por ejemplo, ",(0,s.jsx)(n.code,{children:"strings.es.xml"})," ser\xeda la traducci\xf3n en castellano, ",(0,s.jsx)(n.code,{children:"strings.en.xml"})," la traducci\xf3n en ingl\xe9s, ",(0,s.jsx)(n.code,{children:"strings.es_ES.xml"})," el espa\xf1ol de Espa\xf1a o ",(0,s.jsx)(n.code,{children:"strings.es_AR.xml"})," el espa\xf1ol de Argentina."]}),"\n",(0,s.jsx)(n.p,{children:"Se puede forzar el idioma o dejar que el widget lo escoja en funci\xf3n de la configuraci\xf3n del dispositivo. A la hora de decidir cu\xe1l es el idioma a aplicar se sigue el siguiente orden:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'Buscar por c\xf3digo de localizaci\xf3n (por ejemplo, "es_AR").'}),"\n",(0,s.jsx)(n.li,{children:'Si no encuentra ninguna que coincida, buscar\xeda uno para el idioma gen\xe9rico (es decir, en este caso ser\xeda "es").'}),"\n",(0,s.jsx)(n.li,{children:"Si tampoco existiese ning\xfan resultado, entonces usar\xeda el idioma por defecto."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:'A nivel de c\xf3digo es posible seleccionar la localizaci\xf3n mediante la propiedad locale. Este par\xe1metro acepta un string con el c\xf3digo de lenguaje que se desea utilizar (por ejemplo, "es" o "es_ES").'}),"\n",(0,s.jsx)(n.h4,{id:"323-carpeta-resources",children:"3.2.3. Carpeta resources"}),"\n",(0,s.jsx)(n.p,{children:"Contiene las carpetas con todos los recursos necesarios para poder modificarse, divididos en densidades. Es obligatorio generar las im\xe1genes en todas las densidades ya que el widget espera encontrarlas en la carpeta correspondiente a la densidad del dispositivo. Tambi\xe9n se pueden crear nuevas carpetas con la densidad deseada."}),"\n",(0,s.jsx)(n.h4,{id:"324-elemento-background",children:"3.2.4. Elemento BACKGROUND"}),"\n",(0,s.jsxs)(n.p,{children:["El elemento ",(0,s.jsx)(n.code,{children:"background"})," se compone de 4 segmentos a los que se puede dar color independientemente:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"top"}),": define el color de fondo el segmento o panel superior."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"middle_top"}),": define el color de fondo del segmento o panel donde est\xe1 situada la imagen de la c\xe1mara."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"middle_bottom"}),": define el color de fondo el segmento o panel situado debajo de la imagen de la c\xe1mara."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"bottom"}),": define el color de fondo el segmento o panel inferior."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Tambi\xe9n se pueden configurar ciertas propiedades que se usan solo en pantallas espec\xedficas. A continuaci\xf3n, las enumeramos haciendo referencia a las pantallas en la que son utilizadas:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"pagination_separator (RegistrationTips, FaceMovementTips)"}),": define el color de la separaci\xf3n entre el panel inferior y el panel de debajo de la c\xe1mara."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"mirror_border_color (RegistrationTips, FaceMovementTips)"}),": define el color del borde del c\xedrculo que rodea a la imagen de la c\xe1mara o del video de los consejos de registro. A este elemento tambi\xe9n se le llama mirror o espejo."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"mirror_border_width (RegistrationTips, FaceMovementTips)"}),": define el ancho del borde del c\xedrculo que rodea a la imagen de la c\xe1mara o del video de los consejos de registro. Si no dese\xe1ramos mostrar un borde, tendr\xedamos que asignar un valor de 0.0 a esta propiedad."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"mirror_mist_color (StartExtractor)"}),": define el color del c\xedrculo central en la pantalla previa a la extracci\xf3n. Este color deber\xe1 tener siempre un valor de transparencia ya que debemos dejar ver la imagen de la c\xe1mara para que el usuario pueda colocarse correctamente antes de empezar con la extracci\xf3n. El formato del color cuando se incluye un valor de transparencia es RGBA (El valor de alpha se indicar\xe1 con el \xfaltimo byte)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"mirror_color (Results)"}),": define el color de fondo del c\xedrculo que muestra los resultados del proceso de registro."]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"325-elemento-button",children:"3.2.5. Elemento BUTTON"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"background"}),": define el color de fondo el bot\xf3n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"decorator"}),": define el color de la sombra del bot\xf3n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"foreground"}),": define el color de la fuente del bot\xf3n en caso de que el contenido sea un texto"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"content_type"}),": define el tipo de contenido del bot\xf3n. Existen 2 tipos diferentes:"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"resource_id"}),": Content debe contener el nombre de un archivo en el bundle de recursos"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"text_id"}),": Content debe contener el identificador de un literal del fichero de traducciones del bundle de recursos"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"content"}),": define el contenido del bot\xf3n. Puede ser tanto una imagen como el identificador de un literal."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"align"}),": Define la alienaci\xf3n del contenido del bot\xf3n, ya sea una imagen o un texto"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"font"}),": Define el tipo de letra utilizado si el contenido del bot\xf3n es un texto"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"font_size"}),": Define el tama\xf1o de la letra si el contenido del bot\xf3n es un texto"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"326-elemento-text",children:"3.2.6. Elemento TEXT"}),"\n",(0,s.jsxs)(n.p,{children:["Los elementos ",(0,s.jsx)(n.code,{children:"text"})," se utilizan para definir el aspecto gr\xe1fico de los textos de cada una de las pantallas del widget. Estas son las propiedades que se pueden modificar:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"color"}),": define el color del texto."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"font"}),": define el tipo de fuente utilizado para mostrar el texto."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"font_size"}),": define el tama\xf1o de la fuente."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Hay que tener en cuenta que en la pantalla de resultados del registro los dos textos que definen la calidad del registro tienen forzado su color al color de la barra que indica la puntuaci\xf3n."}),"\n",(0,s.jsx)(n.h4,{id:"327-elemento-image",children:"3.2.7. Elemento IMAGE"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"value"}),": define el nombre del archivo que contiene la imagen a mostrar."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Los elementos ",(0,s.jsx)(n.code,{children:"image"})," solo tienen la propiedad que define el archivo donde se encuentra la imagen f\xedsicamente en el bundle de recursos. Las im\xe1genes se obtienen del bundle buscando en la carpeta apropiada de acuerdo con la densidad del dispositivo."]}),"\n",(0,s.jsx)(n.h4,{id:"328-elemento-video",children:"3.2.8. Elemento VIDEO"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"value"}),": define el nombre del archivo que contiene el video a mostrar."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Los elementos ",(0,s.jsx)(n.code,{children:"video"})," solo tienen la propiedad que define el archivo donde se encuentra el video f\xedsicamente en el bundle de recursos."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4-integraci\xf3n-en-aplicaciones-android",children:"4. Integraci\xf3n en aplicaciones Android"}),"\n",(0,s.jsx)(n.h3,{id:"41-requisitos-m\xednimos",children:"4.1. Requisitos m\xednimos"}),"\n",(0,s.jsx)(n.p,{children:"Para la correcta integraci\xf3n del widget de reconocimiento facial en una aplicaci\xf3n Android, es necesario disponer de la siguiente versi\xf3n del sistema operativo Android:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"API level 15 (Android 4.0.3)"}),"\n",(0,s.jsx)(n.li,{children:"RAM: 2 GB"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Si se usa la caracteristica de Detecci\xf3n de Ataques de Inyecci\xf3n (IAD) entonces:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"API level 24 (Android 7.0)"}),"\n",(0,s.jsx)(n.li,{children:"RAM: 3 GB"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"En cuanto a la arquitectura del dispositivo m\xf3vil:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"armeabi-v7, x86, arm64 y x64"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"42-contenido-suministrado",children:"4.2. Contenido suministrado"}),"\n",(0,s.jsx)(n.p,{children:"Los elementos que se proporcionan con la SDK para la integraci\xf3n del widget se componen de:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Android Studio: Las librer\xedas de archivos de Android (Android Archive Library) llamadas ",(0,s.jsx)(n.code,{children:"fphi-core-widget-android.aar"})," y ",(0,s.jsx)(n.code,{children:"fphi-selphi-widget-android.aar"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Adicionalmente, se entrega un archivo zip que contiene la configuraci\xf3n gr\xe1fica y de localizaci\xf3n del widget, mediante el cual se puede personalizar la apariencia f\xedsica del widget para una mejor integraci\xf3n con la aplicaci\xf3n final que lo va a contener.\nAdem\xe1s, junto con la SDK se proporciona un ejemplo de programaci\xf3n para Android Studio que ayuda al integrador a consumir el widget en una aplicaci\xf3n Android."}),"\n",(0,s.jsx)(n.h3,{id:"43-configuraci\xf3n-del-widget-android",children:"4.3. Configuraci\xf3n del widget Android"}),"\n",(0,s.jsx)(n.p,{children:"Resumen de los m\xe9todos para configurar el widget:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"    //Crear el objeto de configuraci\xf3n con todos los valores anteriores.\n    WidgetConfiguration conf = new WidgetConfiguration();\n\n    //Establecer la ruta del archivo de recursos gr\xe1ficos y de localizaci\xf3n\n    conf.setResourcesPath(path);\n\n    //Establecer el modo de liveness de extracci\xf3n (LIVENESS_NONE, LIVENESS_PASSIVE)\n    conf.setLivenessMode(mode);\n\n    //Establecer si se quiere o no que el widget obligue a la lectura de un QR antes del proceso de autenticaci\xf3n\n    conf.setQRFlag(QRflag);\n        \n    //Establecer la resoluci\xf3n de la c\xe1mara \n    conf.setCameraPreviewSize(cameraPreviewSize);\n"})}),"\n",(0,s.jsx)(n.p,{children:"El widget Android proporcionado por FacePhi es el responsable de realizar la extracci\xf3n de las caracter\xedsticas faciales del usuario, y de esta forma generar una plantilla facial (template) representativa del mismo. Esta plantilla facial debe ser enviada a un servidor web para realizar el registro de los usuarios mediante el rostro, la autenticaci\xf3n y la identificaci\xf3n de usuarios."}),"\n",(0,s.jsx)(n.p,{children:"Por tanto, la aplicaci\xf3n Android que integra el widget debe consultar un servicio web que estar\xe1 publicado en un servidor accesible mediante Internet.\nEn el lado del servidor, la aplicaci\xf3n web utiliza las librer\xedas de reconocimiento facial de FacePhi para realizar los procesos que impliquen el registro y mejora de usuarios y la comparaci\xf3n de plantillas faciales."})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}}}]);