"use strict";(globalThis.webpackChunksdk_mobile_doc=globalThis.webpackChunksdk_mobile_doc||[]).push([[16364],{28453(e,n,a){a.d(n,{R:()=>r,x:()=>s});var i=a(96540);const l={},o=i.createContext(l);function r(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(o.Provider,{value:n},e.children)}},81852(e,n,a){a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Video_Call_Component","title":"Videollamada","description":"1. Introducci\xf3n","source":"@site/i18n/es/docusaurus-plugin-content-docs-android/version-2.5.X/Video_Call_Component.md","sourceDirName":".","slug":"/Video_Call_Component","permalink":"/sdk-mobile-documentation/es/docs/android/Video_Call_Component","draft":false,"unlisted":false,"tags":[],"version":"2.5.X","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Captura de NFC","permalink":"/sdk-mobile-documentation/es/docs/android/NFC_Component"},"next":{"title":"V\xeddeo identificaci\xf3n","permalink":"/sdk-mobile-documentation/es/docs/android/Video_Id_Component"}}');var l=a(74848),o=a(28453);const r={},s="Videollamada",c={},d=[{value:"1. Introducci\xf3n",id:"1-introducci\xf3n",level:2},{value:"2. Dependencia",id:"2-dependencia",level:2},{value:"3. Controladores disponibles",id:"3-controladores-disponibles",level:2},{value:"4. Lanzamiento simplificado",id:"4-lanzamiento-simplificado",level:2},{value:"5. Configuraci\xf3n b\xe1sica",id:"5-configuraci\xf3n-b\xe1sica",level:2},{value:"6. Recepci\xf3n del resultado",id:"6-recepci\xf3n-del-resultado",level:2},{value:"6.1. Recepci\xf3n de errores",id:"61-recepci\xf3n-de-errores",level:3},{value:"6.2. Recepci\xf3n del resultado correcto - <em>data</em>",id:"62-recepci\xf3n-del-resultado-correcto---data",level:3},{value:"7. Informaci\xf3n avanzada",id:"7-informaci\xf3n-avanzada",level:2},{value:"7.1.  Configuraci\xf3n avanzada del componente",id:"71--configuraci\xf3n-avanzada-del-componente",level:3},{value:"7.2. Compartir pantalla",id:"72-compartir-pantalla",level:3},{value:"8. Personalizaci\xf3n del componente",id:"8-personalizaci\xf3n-del-componente",level:2},{value:"8.1. Textos",id:"81-textos",level:3},{value:"8.2. Colores",id:"82-colores",level:3},{value:"8.3. Animaciones",id:"83-animaciones",level:3},{value:"8.4 Vistas externas",id:"84-vistas-externas",level:3},{value:"9. Logs",id:"9-logs",level:2}];function t(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"videollamada",children:"Videollamada"})}),"\n",(0,l.jsx)(n.h2,{id:"1-introducci\xf3n",children:"1. Introducci\xf3n"}),"\n",(0,l.jsxs)(n.p,{children:["La captura facial se realiza con el ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.em,{children:"VideoCall Component"})}),"."]}),"\n",(0,l.jsx)(n.p,{children:"Este componente se encarga de gestionar la comunicaci\xf3n\nentre un usuario y un agente (videoasistencia). Sus principales procesos son:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Gesti\xf3n interna de c\xe1maras, micro y permisos."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Conexi\xf3n con los servicios."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["En el apartado de ",(0,l.jsx)(n.a,{href:"./Mobile_SDK",children:"Lanzamiento simplificado"})," se detallan los pasos necesarios para la integraci\xf3n b\xe1sica del SDK. En esta secci\xf3n se a\xf1ade la informaci\xf3n para el lanzamiento de este componente."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"2-dependencia",children:"2. Dependencia"}),"\n",(0,l.jsx)(n.p,{children:"La dependencia espec\xedfica del componente es:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'implementation "com.facephi.androidsdk:videocall_component:$version"\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"3-controladores-disponibles",children:"3. Controladores disponibles"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"Controlador"})}),(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"Descripci\xf3n"})})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"VideoCallController"}),(0,l.jsx)(n.td,{children:"Controlador principal de videollamada"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"StopVideoCallController"}),(0,l.jsx)(n.td,{children:"Detener la compartici\xf3n de pantalla y la llamada en curso"})]})]})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"4-lanzamiento-simplificado",children:"4. Lanzamiento simplificado"}),"\n",(0,l.jsx)(n.p,{children:"Una vez iniciado el SDK y creada una nueva operaci\xf3n se podr\xe1 lanzar el componente.\nSe podr\xe1 hacer uso de cualquiera de sus controladores para ejecutar su funcionalidad."}),"\n",(0,l.jsx)(n.p,{children:"Lanzamiento:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'val response = SDKController.launch(\n    VideoCallController(VideoCallConfigurationData(...))\n)\nwhen (response) {\n    is SdkResult.Error -> Napier.d("ERROR - ${response.error.name}")\n    is SdkResult.Success -> response.data\n}\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"5-configuraci\xf3n-b\xe1sica",children:"5. Configuraci\xf3n b\xe1sica"}),"\n",(0,l.jsxs)(n.p,{children:["Para lanzar el componente actual, se deber\xe1 crear un objeto ",(0,l.jsx)(n.em,{children:"VideoCallConfigurationData"})," que ser\xe1 la configuraci\xf3n del\ncontrolador del componente."]}),"\n",(0,l.jsx)(n.p,{children:"La configuraci\xf3n b\xe1sica necesaria no necesitar\xe1 ning\xfan par\xe1metro:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"VideoCallConfigurationData()\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"6-recepci\xf3n-del-resultado",children:"6. Recepci\xf3n del resultado"}),"\n",(0,l.jsx)(n.p,{children:"El lanzamiento devolver\xe1 la informaci\xf3n en formato SdkResult. Pudiendo diferenciarse entre un lanzamiento correcto y uno incorrecto:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'when (response) {\n    is SdkResult.Error -> Napier.d("ERROR - ${response.error}")\n    is SdkResult.Success -> response.data\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"61-recepci\xf3n-de-errores",children:"6.1. Recepci\xf3n de errores"}),"\n",(0,l.jsx)(n.p,{children:"Los errores se devolver\xe1n como un objeto 'VideoCallError'."}),"\n",(0,l.jsx)(n.p,{children:"Lista de errores:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"ACTIVITY_RESULT_MSG_ERROR: El resultado de la actividad es incorrecto"}),"\n",(0,l.jsx)(n.li,{children:"APPLICATION_CONTEXT_ERROR: El contexto de aplicaci\xf3n necesario es nulo"}),"\n",(0,l.jsx)(n.li,{children:"CANCEL_BY_USER: El usuario ha cancelado el proceso"}),"\n",(0,l.jsx)(n.li,{children:"CANCEL_LAUNCH: Se ha hecho una cancelaci\xf3n general del SDK"}),"\n",(0,l.jsx)(n.li,{children:"COMPONENT_LICENSE_ERROR: La licencia del componente no es correcta"}),"\n",(0,l.jsx)(n.li,{children:"EMPTY_LICENSE: El String de licencia est\xe1 vac\xedo"}),"\n",(0,l.jsx)(n.li,{children:"FACE_DETECTION_TIMEOUT: No se ha detectado cara"}),"\n",(0,l.jsx)(n.li,{children:"FETCH_DATA_ERROR: Error en la recogida del resultado"}),"\n",(0,l.jsx)(n.li,{children:"FLOW_ERROR: Error en el proceso de flow"}),"\n",(0,l.jsx)(n.li,{children:"INITIALIZATION_ERROR: Error de inicializaci\xf3n"}),"\n",(0,l.jsx)(n.li,{children:"MANAGER_NOT_INITIALIZED: Los managers son nulos"}),"\n",(0,l.jsx)(n.li,{children:"NETWORK_CONNECTION: Error en la conexi\xf3n a internet"}),"\n",(0,l.jsx)(n.li,{children:"NO_DATA_ERROR: Los datos de entrada son nulos"}),"\n",(0,l.jsx)(n.li,{children:"OPERATION_NOT_CREATED: No hay ninguna operaci\xf3n en curso"}),"\n",(0,l.jsx)(n.li,{children:"PERMISSION_DENIED: El usuario ha rechazado los permisos"}),"\n",(0,l.jsx)(n.li,{children:"SOCKET_ERROR: Error en la conexi\xf3nde los servicios"}),"\n",(0,l.jsx)(n.li,{children:"TIMEOUT: Timeout en el proceso"}),"\n",(0,l.jsx)(n.li,{children:"VIDEO_ERROR: Error en el procesamiento del v\xeddeo"}),"\n",(0,l.jsx)(n.li,{children:"UNKNOWN_ERROR: Error desconocido"}),"\n",(0,l.jsx)(n.li,{children:"VIDEO_RECORDING_ACTIVE: No se puede iniciar porque el proceso de v\xeddeo grabaci\xf3n est\xe1 activo"}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"62-recepci\xf3n-del-resultado-correcto---data",children:["6.2. Recepci\xf3n del resultado correcto - ",(0,l.jsx)(n.em,{children:"data"})]}),"\n",(0,l.jsxs)(n.p,{children:["En la parte de SdkResult.Success - ",(0,l.jsx)(n.em,{children:"data"}),", dispondremos de la clase  ",(0,l.jsx)(n.em,{children:"VideoCallResult"})," que tendr\xe1 una \xfanica propiedad."]}),"\n",(0,l.jsxs)(n.p,{children:["Cuando el resultado sea Success y est\xe9 activo el flag ",(0,l.jsx)(n.em,{children:"sharingScreen"})," se podr\xe1 activar compartir pantalla."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"7-informaci\xf3n-avanzada",children:"7. Informaci\xf3n avanzada"}),"\n",(0,l.jsx)(n.p,{children:"Este apartado ampl\xeda la informaci\xf3n del componente."}),"\n",(0,l.jsx)(n.h3,{id:"71--configuraci\xf3n-avanzada-del-componente",children:"7.1.  Configuraci\xf3n avanzada del componente"}),"\n",(0,l.jsxs)(n.p,{children:["Para lanzar el componente actual, se deber\xe1 crear un objeto ",(0,l.jsx)(n.em,{children:"VideoCallConfigurationData"}),"\nque ser\xe1 la configuraci\xf3n del controlador del componente."]}),"\n",(0,l.jsx)(n.p,{children:"A continuaci\xf3n se detallan todos los campos que forman parte de esta clase."}),"\n",(0,l.jsxs)(n.p,{children:["Los campos incluidos en la configuraci\xf3n, normalmente ",(0,l.jsx)(n.strong,{children:"no es necesario\nque sean informados"})," ya que se completan internamente a trav\xe9s de la\nlicencia usada."]}),"\n",(0,l.jsxs)(n.p,{children:["Estos campos suelen informarse ",(0,l.jsx)(n.strong,{children:"solo"})," cuando el ",(0,l.jsx)(n.strong,{children:"servidor"})," es\n",(0,l.jsx)(n.strong,{children:"OnPremise"}),"."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"url"}),": Ruta al socket de video."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"apiKey"}),": ApiKey necesaria para la conexi\xf3n con el socket de video."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"tenantId"}),": Identificador del tenant que hace referencia al cliente actual,\nnecesario para la conexi\xf3n con el servicio de video."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"activateScreenSharing"}),": Activar la opci\xf3n de compartir pantalla en la llamada."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"timeout"}),": Tiempo de espera para que un agente coja la llamada (ms)."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"72-compartir-pantalla",children:"7.2. Compartir pantalla"}),"\n",(0,l.jsx)(n.p,{children:'Cuando el usuario active la funcionalidad de compartir pantalla se recibir\xe1 en el controlador el resultado con "sharingScreen = true". Esto indica que la llamada sigue en curso.'}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'val result = SDKController.launch(\n    VideoCallController(VideoCallConfigurationData(activateScreenSharing = true)))\n\nwhen (result) {\n    is SdkResult.Error -> {\n        Napier.d("VideoCall: ERROR - ${result.error.name}")\n    }\n\n    is SdkResult.Success -> {\n            Napier.d("VideoCall: OK - ScreenSharing: ${result.data.sharingScreen}")\n        }\n    }\n\n'})}),"\n",(0,l.jsx)(n.p,{children:"Para detener la llamada se har\xe1 uso del controlador StopVideoCallController."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'val controller = StopVideoCallController()\n\ncontroller.setOutput { state ->\n    Napier.d { "VIDEOCALL: SCREEN SHARING STATE: ${state.name}" }\n}\nviewModelScope.launch {\n    SDKController.launch(controller)\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"Los posibles estados son:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"AGENT_HANGUP,\nPERMISSION_ERROR,\nNETWORK_CONNECTION_ERROR,\nUNKNOWN_ERROR,\nSHARING,\nCANCEL_BY_USER,\nFINISH\n"})}),"\n",(0,l.jsx)(n.p,{children:"El estado que indica la finalizaci\xf3n completa de la llamada es FINISH."}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"8-personalizaci\xf3n-del-componente",children:"8. Personalizaci\xf3n del componente"}),"\n",(0,l.jsxs)(n.p,{children:["Aparte de los cambios que se pueden realizar a nivel de SDK (los cuales\nse explican en el documento de ",(0,l.jsx)(n.a,{href:"./Mobile_SDK_advanced",children:"Ajustes avanzados"}),"), este componente en concreto permite la\nmodificaci\xf3n de su interfaz."]}),"\n",(0,l.jsx)(n.h3,{id:"81-textos",children:"8.1. Textos"}),"\n",(0,l.jsxs)(n.p,{children:["Si se desea modificar los textos de la SDK habr\xeda que incluir el\nsiguiente fichero XML en la aplicaci\xf3n del cliente, y modificar el valor\nde cada ",(0,l.jsx)(n.em,{children:"String"})," por el deseado."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'    \x3c!-- Waiting --\x3e\n    <string name="video_call_component_text_waiting_agent_title">Conectando con un asistente\u2026</string>\n    \x3c!-- Process --\x3e\n    <string name="video_call_component_agent">Asistente</string>\n    <string name="video_call_component_local">T\xfa</string>\n    <string name="video_call_component_exit">Salir</string>\n    <string name="video_call_component_text_finish">La video asistencia ha finalizado</string>\n    <string name="video_call_component_accesibility_phone">Tel\xe9fono</string>\n    <string name="video_call_component_accesibility_switch">Cambiar c\xe1mara</string>\n    \x3c!-- Diagnostic --\x3e\n    <string name="video_call_component_restart">Repetir llamada</string>\n    <string name="video_call_component_timeout_title">Tiempo superado</string>\n    <string name="video_call_component_timeout_desc">No se ha podido contactar con un asistente.</string>\n    <string name="video_call_component_internal_error_title">Hubo un problema t\xe9cnico</string>\n    <string name="video_call_component_internal_error_desc">No se ha podido contactar con un asistente.</string>\n    \n'})}),"\n",(0,l.jsx)(n.h3,{id:"82-colores",children:"8.2. Colores"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<color name="colorVideoCallActionsBackground">#30333d</color>\n<color name="colorVideoCallButtonBackground">#FF526080</color>\n'})}),"\n",(0,l.jsx)(n.h3,{id:"83-animaciones",children:"8.3. Animaciones"}),"\n",(0,l.jsx)(n.p,{children:"Si se desea modificar las animaciones (lottie) de la SDK habr\xeda que incluir las animaciones con el mismo nombre en la carpeta res/raw/ de la aplicaci\xf3n."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"video_call_anim_waiting.json\n"})}),"\n",(0,l.jsx)(n.h3,{id:"84-vistas-externas",children:"8.4 Vistas externas"}),"\n",(0,l.jsx)(n.p,{children:"Es posible modificar completamente las pantallas del componente manteniendo su funcionalidad y navegaci\xf3n. Para ello deben implementarse los interfaces siguientes:"}),"\n",(0,l.jsx)(n.p,{children:"Pantalla de diagn\xf3stico de error:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"\ninterface IVideoCallErrorDiagnosticView {\n    @Composable\n    fun Content(\n        error: VideoCallError,\n        onRetry: () -> Unit,\n        onClose: () -> Unit,\n    )\n}\n\n"})}),"\n",(0,l.jsx)(n.p,{children:'Una vez creadas las clases que implementan los interfaces, en el lanzamiento del componente se podr\xe1 a\xf1adir el par\xe1metro "customViews" para que se utilicen en el SDK.'}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"9-logs",children:"9. Logs"}),"\n",(0,l.jsx)(n.p,{children:'Para visualizar en consola los logs de este componente se podr\xe1 usar el filtro: "VIDEO_CALL:"'}),"\n",(0,l.jsx)(n.hr,{})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(t,{...e})}):t(e)}}}]);