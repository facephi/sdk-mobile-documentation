"use strict";(globalThis.webpackChunksdk_mobile_doc=globalThis.webpackChunksdk_mobile_doc||[]).push([[94877],{23245(e,a,n){n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"SelphID_widget_ios","title":"SelphID Widget iOS","description":"1. \xbfQu\xe9 es el widget?","source":"@site/i18n/es/docusaurus-plugin-content-docs-resources/current/SelphID_widget_ios.md","sourceDirName":".","slug":"/SelphID_widget_ios","permalink":"/sdk-mobile-documentation/es/docs/resources/SelphID_widget_ios","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"SelphID Widget Android","permalink":"/sdk-mobile-documentation/es/docs/resources/SelphID_widget_android"}}');var o=n(74848),d=n(28453);const r={},s="SelphID Widget iOS",l={},c=[{value:"1. \xbfQu\xe9 es el widget?",id:"1-qu\xe9-es-el-widget",level:2},{value:"2. \xbfC\xf3mo se integra el widget?",id:"2-c\xf3mo-se-integra-el-widget",level:2},{value:"2.1. Librer\xedas Requeridas",id:"21-librer\xedas-requeridas",level:3},{value:"2.2. Instalaci\xf3n del plugin SelphID iOS Widget",id:"22-instalaci\xf3n-del-plugin-selphid-ios-widget",level:3},{value:"2.2.1. Integraci\xf3n de los frameworks",id:"221-integraci\xf3n-de-los-frameworks",level:4},{value:"2.2.2. Integraci\xf3n de los recursos",id:"222-integraci\xf3n-de-los-recursos",level:4},{value:"3. Configurar el widget",id:"3-configurar-el-widget",level:2},{value:"3.1. Propiedad ScanType",id:"31-propiedad-scantype",level:4},{value:"3.2. Propiedad ScanSide",id:"32-propiedad-scanside",level:4},{value:"3.3. Propiedad ScanMode",id:"33-propiedad-scanmode",level:4},{value:"3.4. Propiedad SpecificData (string)",id:"34-propiedad-specificdata-string",level:4},{value:"3.5. Propiedad WizardMode",id:"35-propiedad-wizardmode",level:4},{value:"3.6. Propiedad ShowAfterCapture",id:"36-propiedad-showaftercapture",level:4},{value:"3.7. Propiedad PreviousCaptureData",id:"37-propiedad-previouscapturedata",level:4},{value:"3.8. Propiedad Locale (string)",id:"38-propiedad-locale-string",level:4},{value:"3.9. Propiedad Timeout",id:"39-propiedad-timeout",level:4},{value:"3.10 Propiedad VideoFilename",id:"310-propiedad-videofilename",level:4},{value:"3.11 Propiedad DocumentModels",id:"311-propiedad-documentmodels",level:4},{value:"3.12 Propiedad GenerateRawImages",id:"312-propiedad-generaterawimages",level:4},{value:"3.13 M\xe9todo getWidgetVersion",id:"313-m\xe9todo-getwidgetversion",level:4},{value:"4. Crear el widget",id:"4-crear-el-widget",level:2},{value:"4.1. Clase FPhiSelphIDWidget",id:"41-clase-fphiselphidwidget",level:3},{value:"4.1.1. Argumento bundlePathForResouce (string)",id:"411-argumento-bundlepathforresouce-string",level:4},{value:"4.1.2. Argumento license (string)",id:"412-argumento-license-string",level:4},{value:"4.2. Protocolo FPhiSelphIDWidgetProtocol",id:"42-protocolo-fphiselphidwidgetprotocol",level:3},{value:"4.2.1. CaptureFinished",id:"421-capturefinished",level:4},{value:"4.2.2. CaptureFailed",id:"422-capturefailed",level:4},{value:"4.2.3. CaptureCancelled",id:"423-capturecancelled",level:4},{value:"4.2.4. CaptureTimeout",id:"424-capturetimeout",level:4},{value:"4.2.5. onEvent",id:"425-onevent",level:4},{value:"5. Recepci\xf3n del resultado.",id:"5-recepci\xf3n-del-resultado",level:2},{value:"5.1. Propiedad results",id:"51-propiedad-results",level:3},{value:"5.1.1. Propiedades frontDocument / tokenFrontDocument",id:"511-propiedades-frontdocument--tokenfrontdocument",level:4},{value:"5.1.2. Propiedades backDocument / tokenBackDocument",id:"512-propiedades-backdocument--tokenbackdocument",level:4},{value:"5.1.3. Propiedades faceImage / tokenFaceImage",id:"513-propiedades-faceimage--tokenfaceimage",level:4},{value:"5.1.4. Propiedades documentCaptured, countryCaptured y documentTypeCaptured",id:"514-propiedades-documentcaptured-countrycaptured-y-documenttypecaptured",level:4},{value:"5.1.5. Propiedades matchingSidesScore, matchingFrontScore y matchingBackScore",id:"515-propiedades-matchingsidesscore-matchingfrontscore-y-matchingbackscore",level:4},{value:"5.1.6. Propiedad captureProgress",id:"516-propiedad-captureprogress",level:4},{value:"5.1.7. Propiedad timeoutDiagnostic",id:"517-propiedad-timeoutdiagnostic",level:4},{value:"5.2. Diccionario ocrResults",id:"52-diccionario-ocrresults",level:3}];function t(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.header,{children:(0,o.jsx)(a.h1,{id:"selphid-widget-ios",children:"SelphID Widget iOS"})}),"\n",(0,o.jsx)(a.h2,{id:"1-qu\xe9-es-el-widget",children:"1. \xbfQu\xe9 es el widget?"}),"\n",(0,o.jsx)(a.p,{children:"FacePhi SelphID iOS Widget es una utilidad con la que se podr\xe1n realizar las funciones de captura de documentos que ofrece la tecnolog\xeda de FacePhi.\nLas funciones que facilita este widget son:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"Gesti\xf3n interna de c\xe1maras y resoluciones."}),"\n",(0,o.jsx)(a.li,{children:"Asistente en los procesos de captura de la parte frontal y trasera del documento."}),"\n",(0,o.jsx)(a.li,{children:"Extracci\xf3n de la informaci\xf3n contenida en el documento."}),"\n",(0,o.jsx)(a.li,{children:"Obtenci\xf3n de las im\xe1genes de la parte frontal, trasera y otros datos relevantes."}),"\n"]}),"\n",(0,o.jsx)(a.hr,{}),"\n",(0,o.jsx)(a.h2,{id:"2-c\xf3mo-se-integra-el-widget",children:"2. \xbfC\xf3mo se integra el widget?"}),"\n",(0,o.jsx)(a.h3,{id:"21-librer\xedas-requeridas",children:"2.1. Librer\xedas Requeridas"}),"\n",(0,o.jsx)(a.p,{children:"FacePhi distribuye las librer\xedas necesarias para integrar el widget en un proyecto de iOS. Se distribuyen tanto librer\xedas (frameworks), como recursos para el componente, las cuales se encuentran en el directorio lib."}),"\n",(0,o.jsx)(a.p,{children:"Frameworks:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:(0,o.jsx)(a.code,{children:"FPhiSelphIDWidgetiOS.framework"})}),"\n",(0,o.jsx)(a.li,{children:(0,o.jsx)(a.code,{children:"Microblink.xcframework"})}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Recursos:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:(0,o.jsx)(a.code,{children:"fphi-selphid-widget-resources-SelphID-1.0.zip"})}),"\n"]}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"Solicitud de licencias al departamento de soporte."}),"\n"]}),"\n",(0,o.jsx)(a.h3,{id:"22-instalaci\xf3n-del-plugin-selphid-ios-widget",children:"2.2. Instalaci\xf3n del plugin SelphID iOS Widget"}),"\n",(0,o.jsx)(a.p,{children:"La instalaci\xf3n del plugin se realizar\xe1 una vez se completen las siguientes acciones en su IDE XCode:"}),"\n",(0,o.jsx)(a.h4,{id:"221-integraci\xf3n-de-los-frameworks",children:"2.2.1. Integraci\xf3n de los frameworks"}),"\n",(0,o.jsxs)(a.p,{children:["Incluir ",(0,o.jsx)(a.code,{children:"FPhiSelphIDWidgetiOS.framework"})," y ",(0,o.jsx)(a.code,{children:"Microblink.xcframework"})," en Embedded Binaries y s\xf3lo ",(0,o.jsx)(a.code,{children:"Microblink.xcframework"})," en Linked Frameworks and Libraries."]}),"\n",(0,o.jsx)(a.h4,{id:"222-integraci\xf3n-de-los-recursos",children:"2.2.2. Integraci\xf3n de los recursos"}),"\n",(0,o.jsxs)(a.p,{children:["Incluir ",(0,o.jsx)(a.code,{children:"fphi-selphid-widget-resources-SelphID-1.0.zip"})," (sin descomprimir) en Copy bundle Resources, dentro de la secci\xf3n Build Phases."]}),"\n",(0,o.jsx)(a.hr,{}),"\n",(0,o.jsx)(a.h2,{id:"3-configurar-el-widget",children:"3. Configurar el widget"}),"\n",(0,o.jsxs)(a.p,{children:["El widget de SelphID para iOS contiene una serie de atributos que le permiten configurar el comportamiento del mismo. A continuaci\xf3n, se muestran cada una de las propiedades configurables en la clase ",(0,o.jsx)(a.code,{children:"FPhiSelphIDWidget"})]}),"\n",(0,o.jsx)(a.h4,{id:"31-propiedad-scantype",children:"3.1. Propiedad ScanType"}),"\n",(0,o.jsx)(a.p,{children:"Los valores permitidos son los siguientes:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DTIDCard"}),": El widget queda configurado para realizar la captura de documentos de identidad."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DTPassport"}),": El widget queda configurado para realizar la captura de pasaportes."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DTVisa"}),": El widget queda configurado para realizar la captura de visados."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DTDriversLicense"}),": El widget queda configurado para realizar la captura de licencias de conducci\xf3n."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DTForeignCard"}),": El widget queda configurado para realizar la captura de documentos extranjeros."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DTCreditCard"}),": El widget queda configurado para realizar la captura de tarjetas de cr\xe9dito."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DTCustom"}),": El widget queda configurado para realizar la captura de otro tipo de documentos que no corresponden a ninguna de las categorias anteriores."]}),"\n"]}),"\n",(0,o.jsx)(a.h4,{id:"32-propiedad-scanside",children:"3.2. Propiedad ScanSide"}),"\n",(0,o.jsx)(a.p,{children:"Los valores permitidos son los siguientes:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DSFront"}),": El widget queda configurado para realizar la captura de la parte frontal del documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DSBack"}),": El widget queda configurado para realizar la captura de la parte trasera del documento."]}),"\n"]}),"\n",(0,o.jsx)(a.h4,{id:"33-propiedad-scanmode",children:"3.3. Propiedad ScanMode"}),"\n",(0,o.jsx)(a.p,{children:"Indica el modo de escaneo OCR de los documentos. Dependiendo de la elecci\xf3n, se escanear\xe1n y buscar\xe1n varios tipos de documentos o uno en concreto. Este modo puede ser de tres tipos:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"SMGeneric"}),": El modo gen\xe9rico que permite escanear cualquier tipo de documento independiente del pa\xeds o el tipo de documento. El resultado de este modo no es tan preciso como los siguientes pero permite escanear varios documentos est\xe1ndar."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"SMSearch"}),': El modo de b\xfasqueda permitir\xe1 utilizar una whitelist y blacklist, y buscar\xe1 en los documentos que cumplan dichas condiciones. Estas condiciones se indican en la variable "specificData". De este modo se permite realizar la b\xfasqueda acotando el n\xfamero de plantillas, y haciendo que la b\xfasqueda sea mucho m\xe1s afinada que en el caso gen\xe9rico.']}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"SMSpecific"}),': B\xfasqueda de un documento espec\xedfico. Estas condiciones se indican en la propiedad "specificData" que se muestra en lo sucesivo.']}),"\n"]}),"\n",(0,o.jsx)(a.h4,{id:"34-propiedad-specificdata-string",children:"3.4. Propiedad SpecificData (string)"}),"\n",(0,o.jsx)(a.p,{children:"Esta propiedad permite definir qu\xe9 documentos se escanear\xe1n durante el proceso, en caso de declarar el modo de escaneo (scanMode) a SMSearch o SMSpecific.\nUn ejemplo de configuraci\xf3n que permita escanear todos los documentos de nacionalidad espa\xf1ola ser\xeda el siguiente:"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-objc",children:'    // Search mode definition\n    _selphidWidget.scanMode = SMSearch;\n    _selphidwidget.specificData = "ES|<ALL>"; // C\xf3digo ISO de Espa\xf1a (ES)\n'})}),"\n",(0,o.jsx)(a.h4,{id:"35-propiedad-wizardmode",children:"3.5. Propiedad WizardMode"}),"\n",(0,o.jsx)(a.p,{children:"Indica si el widget queda configurado para realizar la captura de ambas partes (frontal y trasera) del documento una a continuaci\xf3n de la otra. En este modo el widget solo se lanzar\xeda una vez y al terminar de capturar el front, continuar\xeda seguidamente con el back."}),"\n",(0,o.jsx)(a.h4,{id:"36-propiedad-showaftercapture",children:"3.6. Propiedad ShowAfterCapture"}),"\n",(0,o.jsx)(a.p,{children:"Indica si mostrar o no una pantalla con la imagen capturada del documento despu\xe9s del proceso de an\xe1lisis. En esta pantalla se le da al usuario la posibilidad de repetir el proceso de captura si la imagen que se obtuvo del documento no fuera correcta."}),"\n",(0,o.jsx)(a.h4,{id:"37-propiedad-previouscapturedata",children:"3.7. Propiedad PreviousCaptureData"}),"\n",(0,o.jsx)(a.p,{children:"Cuando la captura del documento se realiza en 2 llamadas, esta propiedad permite pasar un diccionario con la informaci\xf3n de la captura previa. De esta manera el widget puede combinar los resultados de ambas lecturas de una manera inteligente y as\xed devolver la informaci\xf3n combinada de ambas capturas. Tambi\xe9n permite al widget calcular un grado de similitud de los datos de ambas caras.\nEn el caso que la captura de ambas caras del documento se realice en una \xfanica llamada esto no es necesario ya que el widget internamente hace este proceso."}),"\n",(0,o.jsx)(a.h4,{id:"38-propiedad-locale-string",children:"3.8. Propiedad Locale (string)"}),"\n",(0,o.jsx)(a.p,{children:"Es un string que permite cambiar la localizaci\xf3n y el idioma del widget. Ejemplos de valores que pueden tener son los siguientes:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:'"es" para espa\xf1ol.'}),"\n",(0,o.jsx)(a.li,{children:'"en" para ingl\xe9s.'}),"\n",(0,o.jsx)(a.li,{children:'"fr" para franc\xe9s.'}),"\n"]}),"\n",(0,o.jsxs)(a.p,{children:["En definitiva, depender\xe1 del nombre que aparezca en el fichero ",(0,o.jsx)(a.code,{children:"strings.xml"})," del lenguaje que se desee seleccionar (",(0,o.jsx)(a.code,{children:"strings-es.xml"}),", ",(0,o.jsx)(a.code,{children:"strings-en.xml"}),", ",(0,o.jsx)(a.code,{children:"strings-fr.xml"}),").\nEn el zip de recursos, el cual se encuentra dentro de la carpeta strings, se pueden a\xf1adir los ficheros ",(0,o.jsx)(a.code,{children:"strings-xx.xml"})," correspondientes a cada localizaci\xf3n que se requiere incorporar en el widget."]}),"\n",(0,o.jsx)(a.h4,{id:"39-propiedad-timeout",children:"3.9. Propiedad Timeout"}),"\n",(0,o.jsx)(a.p,{children:"Es un enumerado que define el timeout de la captura de un lado del documento. Tiene 3 posibles valores:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"TShort: 15 segundos."}),"\n",(0,o.jsx)(a.li,{children:"TMedium: 20 segundos."}),"\n",(0,o.jsx)(a.li,{children:"TLong: 25 segundos."}),"\n",(0,o.jsx)(a.li,{children:"TVeryLong: 60 segundos."}),"\n"]}),"\n",(0,o.jsx)(a.h4,{id:"310-propiedad-videofilename",children:"3.10 Propiedad VideoFilename"}),"\n",(0,o.jsx)(a.p,{children:"Establece la ruta absoluta del nombre del archivo en el que se grabar\xe1 un video del proceso de captura. La aplicaci\xf3n es la responsable de solicitar los permisos necesarios al tel\xe9fono en caso de que esa ruta requiera de permisos adicionales. El widget, por defecto, no realizar\xe1 ning\xfan proceso de grabaci\xf3n a menos que se especifique una ruta de archivo mediante este m\xe9todo."}),"\n",(0,o.jsx)(a.h4,{id:"311-propiedad-documentmodels",children:"3.11 Propiedad DocumentModels"}),"\n",(0,o.jsx)(a.p,{children:"Esta propiedad permite, mediante una cadena en formato xml, configurar modelado de los documentos que el widget va a tratar de capturar. La definici\xf3n de este modelado se encentra, por defecto, en un .xml de modelos que se encuentra en el .zip de recursos. Con esta propiedad se permite a una aplicaci\xf3n actualizar, en caliente, los modelados de los documentos."}),"\n",(0,o.jsx)(a.p,{children:"Nota: Esta propiedad no altera el contenido del archivo de recursos."}),"\n",(0,o.jsx)(a.h4,{id:"312-propiedad-generaterawimages",children:"3.12 Propiedad GenerateRawImages"}),"\n",(0,o.jsxs)(a.p,{children:["Esta propiedad configura el widget para devolver la imagen completa de la c\xe1mara que se utiliz\xf3 para capturar el documento. Estas im\xe1genes se devuelven en las propiedades ",(0,o.jsx)(a.code,{children:"rawFrontDocument"})," y ",(0,o.jsx)(a.code,{children:"rawBackDocument"})," del objeto ",(0,o.jsx)(a.code,{children:"results"})," respectivamente."]}),"\n",(0,o.jsx)(a.h4,{id:"313-m\xe9todo-getwidgetversion",children:"3.13 M\xe9todo getWidgetVersion"}),"\n",(0,o.jsx)(a.p,{children:"Este m\xe9todo devuelve la version actual del widget en formato cadena. Esta llamada es est\xe1tica por lo que no requiere del lanzamiento del widget para realizar esta operaci\xf3n."}),"\n",(0,o.jsx)(a.hr,{}),"\n",(0,o.jsx)(a.h2,{id:"4-crear-el-widget",children:"4. Crear el widget"}),"\n",(0,o.jsx)(a.h3,{id:"41-clase-fphiselphidwidget",children:"4.1. Clase FPhiSelphIDWidget"}),"\n",(0,o.jsxs)(a.p,{children:[(0,o.jsx)(a.code,{children:"FPhiSelphIDWidget"})," es la clase que se encarga de la comunicaci\xf3n entre la aplicaci\xf3n y el widget. Para poder ejecutar el mismo deber\xe1 realizarse la llamada al m\xe9todo ",(0,o.jsx)(a.code,{children:"StartExtraction"}),".\nEn el siguiente ejemplo de c\xf3digo Objective C se muestra la configuraci\xf3n e instancia del widget:"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-objc",children:'    (IBAction)takeButtonTapped:(id)sender {\n\n        NSLog(@"Widget - Capture Document Back");\n        NSString *license = [self readLicense:LICENSE_PATH];\n        NSError *error = nil;\n        NSBundle *bundle = [NSBundle bundleForClass:[BackViewController class]];\n\n        _selphidWidget = [[FPhiSelphIDWidget alloc] initWithFrontCameraIfAvailable :true resources:[bundle pathForResource:RESOURCES_PATH ofType:@"zip"] delegate:self license:license:error&error];\n\n        if (error != nil) {\n            switch (error.code) {\n                case FWMEUnknown:\n                    NSLog(@"Widget - construction error. Unknown error");\n                    break;\n                case FWMECameraPermission: \n                    NSLog(@"Widget - construction error. Camera permission denied");\n                    break;\n            }\n        \n            return;\n        }\n\n        _selphidWidget.scanSide = DSBack;\n        _selphidWidget.scanMode = SMSearch;\n        _selphidWidget.specificData = @"ES|<All>";\n        _selphidWidget.wizardMode = false;\n        _selphidWidget.showAfterCapture = true;\n\n        if (_selphidWidget.wizardMode) self.previousData = nil;\n        _selphidWidget.tokenPreviousCaptureData = self.previousData;\n\n        [_selphidWidget StartExtraction];\n        [self presentViewController:_selphidWidget animated:true completion:nil];\n    }\n'})}),"\n",(0,o.jsx)(a.p,{children:"A continuaci\xf3n, se comentan los par\xe1metros requeridos en la instanciaci\xf3n:"}),"\n",(0,o.jsx)(a.h4,{id:"411-argumento-bundlepathforresouce-string",children:"4.1.1. Argumento bundlePathForResouce (string)"}),"\n",(0,o.jsxs)(a.p,{children:["Existe un fichero .zip (a\xf1adida en la carpeta ra\xedz del plugin) que contiene todos los recursos de la UI del widget para abstraerlos de la l\xf3gica y facilitar su personalizaci\xf3n por parte del cliente. Simplemente habr\xe1 que modificar la variable ",(0,o.jsx)(a.code,{children:"bundlePathForResource"})," con el nombre sin la extensi\xf3n del fichero comprimido y el widget ser\xe1 capaz de localizarlo y aplicarlo."]}),"\n",(0,o.jsx)(a.h4,{id:"412-argumento-license-string",children:"4.1.2. Argumento license (string)"}),"\n",(0,o.jsx)(a.p,{children:"Contiene la licencia de las librer\xedas de SelphID. En el ejemplo de programaci\xf3n se muestra una forma de gestionar esta licencia seg\xfan la plataforma utilizada. Si el argumento license no se usa de forma correcta, tendremos una excepci\xf3n a la hora de invocar el widget, en la que se pueden dar los siguientes mensajes de error:"}),"\n",(0,o.jsxs)(a.ol,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:'"License not parsed properly"'}),": No se ha obtenido bien la ruta donde se almacena la licencia, o la licencia en s\xed no est\xe1 bien formada."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:'"License package name mismatch"'}),": El bundle identifier de la aplicaci\xf3n, no es el mismo que el de la licencia."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:'"License expired"'}),": La fecha de la licencia a expirado."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:'"License content not valid"'}),": La licencia no es correcta, o no esta bien formada."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:'"Unknown"'}),": Desconocido."]}),"\n"]}),"\n",(0,o.jsx)(a.h3,{id:"42-protocolo-fphiselphidwidgetprotocol",children:"4.2. Protocolo FPhiSelphIDWidgetProtocol"}),"\n",(0,o.jsx)(a.h4,{id:"421-capturefinished",children:"4.2.1. CaptureFinished"}),"\n",(0,o.jsx)(a.p,{children:"Se ejecuta cuando el proceso de captura ha terminado de forma satisfactoria."}),"\n",(0,o.jsx)(a.h4,{id:"422-capturefailed",children:"4.2.2. CaptureFailed"}),"\n",(0,o.jsx)(a.p,{children:"Se ejecuta cuando en el proceso de captura se ha producido alg\xfan error inesperado."}),"\n",(0,o.jsx)(a.h4,{id:"423-capturecancelled",children:"4.2.3. CaptureCancelled"}),"\n",(0,o.jsx)(a.p,{children:"Se ejecuta cuando el proceso de captura ha sido interrumpido por el usuario."}),"\n",(0,o.jsx)(a.h4,{id:"424-capturetimeout",children:"4.2.4. CaptureTimeout"}),"\n",(0,o.jsx)(a.p,{children:"Se ejecuta cuando se ha superado el tiempo m\xe1ximo permitido para el proceso de captura."}),"\n",(0,o.jsx)(a.h4,{id:"425-onevent",children:"4.2.5. onEvent"}),"\n",(0,o.jsx)(a.p,{children:"Se ejecuta cada vez que el widget tiene que comunicar eventos importantes que ocurren durante el transcurso de los procesos de captura de documentos.\nEsta funci\xf3n recibe como par\xe1metros el tiempo en el que se lanz\xf3 el evento, codificado como un NSDate, el tipo de evento que se ha producido y la informaci\xf3n adicional asociada a dicho evento."}),"\n",(0,o.jsx)(a.p,{children:"Los eventos recibidos son principalmente de 3 tipos:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"Eventos relacionados con cambios de pantalla o de estados en los que se encuentra el widget"}),"\n",(0,o.jsx)(a.li,{children:"Eventos de usuario como pueden ser pulsaciones de botones o movimientos tipo swipe."}),"\n",(0,o.jsx)(a.li,{children:"Eventos relacionados con los procesos de captura del documento que se est\xe1n llevando acabo, como pueden ser errores por ausencia de informaci\xf3n, por mala calidad de las im\xe1genes, o no hacer caso a las indicaciones que se reciben, entre otros."}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Mediante estos eventos se comunica a la aplicaci\xf3n principal aquellos datos que puedan ser de inter\xe9s a la hora de analizar el comportamiento de los usuarios cuando usan la tecnolog\xeda."}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-objc",children:"    (void)onEvent:(NSDate *)time type:(NSString *)type info:(NSString *)info {\n    }\n"})}),"\n",(0,o.jsx)(a.hr,{}),"\n",(0,o.jsx)(a.h2,{id:"5-recepci\xf3n-del-resultado",children:"5. Recepci\xf3n del resultado."}),"\n",(0,o.jsxs)(a.p,{children:["Al finalizar la llamada del plugin, es posible obtener toda la informaci\xf3n obtenida de la captura del documento (ya sea la parte frontal, trasera o ambas a la vez). Para ello es necesario implementar el delegado ",(0,o.jsx)(a.code,{children:"FPhiSelphIDWidgetProtocol"})," y la siguiente funci\xf3n:"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{children:'    (void)CaptureFinished {\n\n        NSLog(@"Widget - Extraction finished");\n\n        if (_selphidWidget.wizardMode)\n        self.previousData = nil;\n        else\n        self.previousData = _selphidWidget.results.tokenOCR;\n        _backImageView.image = _selphidWidget.results.backDocument;\n        _nextButton.enabled = true;\n\n        // If you prefer: [self getAllValues];\n        // Or\n        [self getIndividualValues];    \n    }\n'})}),"\n",(0,o.jsxs)(a.p,{children:["Es importante rese\xf1ar que la informaci\xf3n obtenida en este objeto se devuelve duplicada, mostr\xe1ndola a su vez en abierto (por ejemplo, ",(0,o.jsx)(a.code,{children:"frontDocumentImage"})," para la imagen de la captura frontal del documento), como tokenizado y encriptado (por ejemplo, ",(0,o.jsx)(a.code,{children:"tokenFrontDocumentImage"})," para la imagen de la captura frontal del documento)."]}),"\n",(0,o.jsx)(a.p,{children:"Dependiendo del tipo de licencia utilizada se podr\xe1n obtener un tipo de par\xe1metros o ambos. La informaci\xf3n tokenizada es recomendable utilizarla para enviarla de forma segura al servidor donde est\xe9 instalada la SDK de SelphID, mientras que los datos en abierto deben utilizarse \xfanicamente en fases de desarrollo y test."}),"\n",(0,o.jsx)(a.h3,{id:"51-propiedad-results",children:"5.1. Propiedad results"}),"\n",(0,o.jsx)(a.p,{children:"Contiene todas las im\xe1genes y tokens generados por el widget, enumerados a continuaci\xf3n:"}),"\n",(0,o.jsx)(a.h4,{id:"511-propiedades-frontdocument--tokenfrontdocument",children:"5.1.1. Propiedades frontDocument / tokenFrontDocument"}),"\n",(0,o.jsx)(a.p,{children:"La imagen frontal del documento procesada, limpiada y recortada por los bordes y su token correspondiente."}),"\n",(0,o.jsx)(a.h4,{id:"512-propiedades-backdocument--tokenbackdocument",children:"5.1.2. Propiedades backDocument / tokenBackDocument"}),"\n",(0,o.jsx)(a.p,{children:"La imagen trasera del documento procesada, limpiada y recortada por los bordes y su token asociado."}),"\n",(0,o.jsx)(a.h4,{id:"513-propiedades-faceimage--tokenfaceimage",children:"5.1.3. Propiedades faceImage / tokenFaceImage"}),"\n",(0,o.jsx)(a.p,{children:"La imagen del rostro que se ha encontrado en el documento, en caso de que exista y su token asociado."}),"\n",(0,o.jsx)(a.h4,{id:"514-propiedades-documentcaptured-countrycaptured-y-documenttypecaptured",children:"5.1.4. Propiedades documentCaptured, countryCaptured y documentTypeCaptured"}),"\n",(0,o.jsx)(a.p,{children:"Estas propiedades indican el modelo de documento, el pais y el tipo de documento, respectivamente, que se ha capturado."}),"\n",(0,o.jsx)(a.h4,{id:"515-propiedades-matchingsidesscore-matchingfrontscore-y-matchingbackscore",children:"5.1.5. Propiedades matchingSidesScore, matchingFrontScore y matchingBackScore"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"La propiedad 'matchingSidesScore' devuelve un c\xe1lculo de la similitud de los datos le\xeddos entre el front y el back del documento. El c\xe1lculo se realiza comprobando la similitud entre los campos comunes le\xeddos en ambas caras. El resultado del c\xe1lculo ser\xe1 un valor entre 0.0 y 1.0 para el caso de que existan campos comunes en el documento. Cuanto mayor es el valor, m\xe1s similares son los datos comparados."}),"\n",(0,o.jsx)(a.li,{children:"La propiedad 'matchingFrontScore' devuelve un c\xe1lculo de la similitud de los datos le\xeddos del front del documento. El c\xe1lculo se realiza comprobando la similitud entre los campos comunes le\xeddos en el frontal del document. El resultado del c\xe1lculo ser\xe1 un valor entre 0.0 y 1.0 para el caso de que existan campos comunes en el frontal. Cuanto mayor es el valor, m\xe1s similares son los datos comparados."}),"\n",(0,o.jsx)(a.li,{children:"La propiedad 'matchingBackScore' devuelve un c\xe1lculo de la similitud de los datos le\xeddos del back del documento. El c\xe1lculo se realiza comprobando la similitud entre los campos comunes le\xeddos en el dorsal del document. El resultado del c\xe1lculo ser\xe1 un valor entre 0.0 y 1.0 para el caso de que existan campos comunes en el dorsal. Cuanto mayor es el valor, m\xe1s similares son los datos comparados."}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Si el c\xe1lculo devuelve -1.0 es que el documento no contiene campos comunes o a\xfan no se tiene informaci\xf3n de las dos caras."}),"\n",(0,o.jsx)(a.h4,{id:"516-propiedad-captureprogress",children:"5.1.6. Propiedad captureProgress"}),"\n",(0,o.jsx)(a.p,{children:"Esta propiedad devuelve el estado en el que se encontraba el proceso de captura cuando el widget termin\xf3. Estos son los posibles valores:"}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{children:"    Front_Detection_None = 0\n    Front_Detection_Uncertain = 1\n    Front_Detection_Completed = 2\n    Front_Document_Analyzed = 3\n    Back_Detection_None = 4\n    Back_Detection_Uncertain = 5\n    Back_Detection_Completed = 6\n    Back_Document_Analyzed = 7\n"})}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"0"}),": En la lectura del Front, el widget termin\xf3 sin poder haber detectado nada. Generalmente cuando no se pone ning\xfan documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"1"}),": En la lectura del Front, el widget termin\xf3 habiendo detectado parcialmente un documento. En este caso algunos de los elementos esperados se han conseguido detectar, pero no todos los necesarios."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"2"}),": En la lectura del Front, el widget termin\xf3 habiendo completado la detecci\xf3n de todos los elementos del documento. Si el widget acaba en este estado es porque el an\xe1lisis de OCR no se ha podido completar con \xe9xito"]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"3"}),": En la lectura del Front, el widget termin\xf3 habiendo analizado y extra\xeddo todo el OCR del documento. Este es el estado en el que acabar\xeda una lectura correcta del Front de un documento."]}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Los estados del 4 al 7 son exactamente iguales solo que se refieren al resultado del proceso cuando se analiza el back."}),"\n",(0,o.jsx)(a.h4,{id:"517-propiedad-timeoutdiagnostic",children:"5.1.7. Propiedad timeoutDiagnostic"}),"\n",(0,o.jsx)(a.p,{children:"Esta propiedad devuelve una cadena de texto donde se explica cu\xe1l ha sido el motivo de que el widget haya terminado por timeout. Dicha cadena de texto puede ser utilizada en una posterior pantalla de timeout donde la aplicaci\xf3n principal puede dar m\xe1s informaci\xf3n al usuario sobre lo que ocurri\xf3 durante la captura del documento."}),"\n",(0,o.jsx)(a.h3,{id:"52-diccionario-ocrresults",children:"5.2. Diccionario ocrResults"}),"\n",(0,o.jsxs)(a.p,{children:["Este diccionario contiene todos los datos detectados en el documento. Las claves de cada campo est\xe1n codificadas de tal forma que la propia clave contiene informaci\xf3n de donde se ha obtenido el valor. As\xed, por ejemplo, la clave ",(0,o.jsx)(a.code,{children:"Front/MRZ/DocumentNumber"})," indica el valor del DocumentNumber que se ha le\xeddo en el Front del documento y en la regi\xf3n del MRZ. Estas claves dependen del documento capturado y por tanto ser\xe1n diferentes entre distintos pa\xedses y modelos de documento."]}),"\n",(0,o.jsx)(a.p,{children:"El diccionario tambi\xe9n contiene claves con nombres m\xe1s gen\xe9ricos y que no llevan informaci\xf3n relativa a la ubicaci\xf3n. Estas claves contienen el dato m\xe1s completo de todos los le\xeddos para dicho campo."}),"\n",(0,o.jsx)(a.p,{children:"Estas claves son los siguientes:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"FirstName"}),": El valor asociado a esta clave contiene el nombre del usuario."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"LastName"}),": El valor asociado a esta clave contiene los apellidos del usuario."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DateOfBirth"}),": El valor asociado a esta clave contiene la fecha de nacimiento detectada en el documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"Gender"}),": El valor asociado a esta clave contiene el sexo del usuario detectado en el documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"Nationality"}),": El valor asociado a esta clave contiene la nacionalidad del usuario detectado en el documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DocumentNumber"}),": El valor asociado a esta clave contiene el n\xfamero de documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DateOfExpiry"}),": El valor asociado a esta clave contiene la fecha de expiraci\xf3n del documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"Issuer"}),": El valor asociado a esta clave contiene el editor del documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DateofIssue"}),": El valor asociado a esta clave contiene la fecha de expedici\xf3n del documento."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"PlaceOfBirth"}),": El valor asociado a esta clave contiene el lugar de nacimiento del usuario."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"Address"}),": El valor asociado a esta clave contiene la direcci\xf3n detectada en el documento."]}),"\n"]}),"\n",(0,o.jsx)(a.p,{children:"Adicionalmente se a\xf1aden claves del propio objeto results para hacer m\xe1s f\xe1cil su b\xfasqueda:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"DocumentCaptured"}),": Valor del modelo de documento que se ha capturado seg\xfan el .xml de modelos. Corresponde a la propiedad documentCaptured."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"MatchingSidesScore"}),": Valor que indica la correspondencia entre las caras leidas del documento. Corresponde a la propiedad matchingSidesScore."]}),"\n"]})]})}function u(e={}){const{wrapper:a}={...(0,d.R)(),...e.components};return a?(0,o.jsx)(a,{...e,children:(0,o.jsx)(t,{...e})}):t(e)}},28453(e,a,n){n.d(a,{R:()=>r,x:()=>s});var i=n(96540);const o={},d=i.createContext(o);function r(e){const a=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(d.Provider,{value:a},e.children)}}}]);