"use strict";(self.webpackChunksdk_mobile_doc=self.webpackChunksdk_mobile_doc||[]).push([[6751],{28453:(e,n,l)=>{l.d(n,{R:()=>a,x:()=>i});var r=l(96540);const o={},s=r.createContext(o);function a(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(s.Provider,{value:n},e.children)}},55876:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"Flow_Component","title":"Flow - Lanzamiento continuo","description":"1. Introducci\xf3n","source":"@site/i18n/es/docusaurus-plugin-content-docs-android/version-2.3.X/Flow_Component.md","sourceDirName":".","slug":"/Flow_Component","permalink":"/sdk-mobile-documentation/es/docs/android/Flow_Component","draft":false,"unlisted":false,"tags":[],"version":"2.3.X","frontMatter":{},"sidebar":"sidebar","previous":{"title":"V\xeddeo grabaci\xf3n","permalink":"/sdk-mobile-documentation/es/docs/android/Video_Recording_Component"},"next":{"title":"Personalizaci\xf3n del SDK","permalink":"/sdk-mobile-documentation/es/docs/android/Customization"}}');var o=l(74848),s=l(28453);const a={},i="Flow - Lanzamiento continuo",d={},t=[{value:"1. Introducci\xf3n",id:"1-introducci\xf3n",level:2},{value:"2. Dependencias requeridas para la integraci\xf3n",id:"2-dependencias-requeridas-para-la-integraci\xf3n",level:2},{value:"3. Controladores disponibles",id:"3-controladores-disponibles",level:2},{value:"3.1. Controladores de componentes con flow",id:"31-controladores-de-componentes-con-flow",level:3},{value:"4. Inicializaci\xf3n del SDK con flow",id:"4-inicializaci\xf3n-del-sdk-con-flow",level:2},{value:"5. Uso del componente",id:"5-uso-del-componente",level:2},{value:"5.1 Lanzamiento de un flujo publicado",id:"51-lanzamiento-de-un-flujo-publicado",level:4},{value:"5.2 Lanzamiento de un flujo pendiente de publicar",id:"52-lanzamiento-de-un-flujo-pendiente-de-publicar",level:4},{value:"5.3 Recoger resultados en la aplicaci\xf3n",id:"53-recoger-resultados-en-la-aplicaci\xf3n",level:4},{value:"6. Recepci\xf3n del resultado",id:"6-recepci\xf3n-del-resultado",level:2},{value:"6.1. Recepci\xf3n de errores",id:"61-recepci\xf3n-de-errores",level:3},{value:"6.2. Recepci\xf3n de ejecuci\xf3n correcta - <em>data</em>",id:"62-recepci\xf3n-de-ejecuci\xf3n-correcta---data",level:3}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"flow---lanzamiento-continuo",children:"Flow - Lanzamiento continuo"})}),"\n",(0,o.jsx)(n.h2,{id:"1-introducci\xf3n",children:"1. Introducci\xf3n"}),"\n",(0,o.jsxs)(n.p,{children:["Flow es una funcionalidad que conecta la secci\xf3n de ",(0,o.jsx)(n.strong,{children:"Design Studio"})," de\nla ",(0,o.jsx)(n.strong,{children:"Plataforma"})," con el SDK y la implementaci\xf3n que realiza el cliente.\nA trav\xe9s de un identificador de Flow, podr\xe1 lanzar un flujo dise\xf1ado en\nla web, que puede contener de 1 a N pasos de los componentes existentes\nen el SDK."]}),"\n",(0,o.jsxs)(n.p,{children:["En el apartado de ",(0,o.jsx)(n.a,{href:"./Mobile_SDK",children:"Lanzamiento simplificado"})," se detallan los pasos necesarios para la integraci\xf3n b\xe1sica del SDK. En esta secci\xf3n se a\xf1ade la informaci\xf3n para el lanzamiento de este componente."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"2-dependencias-requeridas-para-la-integraci\xf3n",children:"2. Dependencias requeridas para la integraci\xf3n"}),"\n",(0,o.jsxs)(n.p,{children:["No es necesaria ",(0,o.jsx)(n.strong,{children:"ninguna dependencia extra"})," para utilizar Flow."]}),"\n",(0,o.jsxs)(n.p,{children:["Se ",(0,o.jsx)("u",{children:"deber\xe1n a\xf1adir las dependencias requeridas de cada componente"}),"\nque se quiera lanzar dentro del Flow. Si se quiere lanzar\n",(0,o.jsx)(n.strong,{children:"reconocimiento facial,"})," deber\xe1 ser ",(0,o.jsx)(n.strong,{children:"necesario"})," instalar el\n",(0,o.jsx)(n.strong,{children:"componente de Selphi"}),", y as\xed sucesivamente con el resto de\ncomponentes."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"3-controladores-disponibles",children:"3. Controladores disponibles"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Controlador"})}),(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Descripci\xf3n"})})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"FlowController"}),(0,o.jsx)(n.td,{children:"Controlador principal de Flow. Lanzamiento de flujos publicados."})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"FlowPreviewController"}),(0,o.jsx)(n.td,{children:"Controlador para el lanzamiento de flujos pendientes de publicar (pruebas)"})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"31-controladores-de-componentes-con-flow",children:"3.1. Controladores de componentes con flow"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Controlador"})}),(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Descripci\xf3n"})})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"FSelphiController"}),(0,o.jsx)(n.td,{children:"Reconocimiento facial"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"FSelphIDController"}),(0,o.jsx)(n.td,{children:"Reconocimiento documental"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"FVoiceController"}),(0,o.jsx)(n.td,{children:"Captura de voz"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"FPhingersController"}),(0,o.jsx)(n.td,{children:"Captura de huellas"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"FNfcController"}),(0,o.jsx)(n.td,{children:"Lectura de NFC"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"FQrReaderController"}),(0,o.jsx)(n.td,{children:"Lectura de QR"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"FPhacturasReaderController"}),(0,o.jsx)(n.td,{children:"Captura de facturas"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"FVideoIdController"}),(0,o.jsx)(n.td,{children:"Video Identificaci\xf3n"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"FVideoCallController"}),(0,o.jsx)(n.td,{children:"Video Asistencia"})]})]})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"4-inicializaci\xf3n-del-sdk-con-flow",children:"4. Inicializaci\xf3n del SDK con flow"}),"\n",(0,o.jsxs)(n.p,{children:["La funci\xf3n de inicializaci\xf3n del SDK tiene el par\xe1metro ",(0,o.jsx)(n.em,{children:"activateFlow"}),"\npara gestionar su activaci\xf3n:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"val sdkConfig = SdkConfigurationData(\n    ...\n    activateFlow = true,\n    ...\n)\n\nval result = SDKController.initSdk(sdkConfig)\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"5-uso-del-componente",children:"5. Uso del componente"}),"\n",(0,o.jsx)(n.h4,{id:"51-lanzamiento-de-un-flujo-publicado",children:"5.1 Lanzamiento de un flujo publicado"}),"\n",(0,o.jsxs)(n.p,{children:["Se usar\xe1 el ",(0,o.jsx)(n.em,{children:"FlowController"})," para lanzar un flujo que el cliente tiene publicado en la plataforma:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'val flowController = FlowController (\n     FlowConfigurationData(\n            id = "flowId",\n            controllers = listOf(FSelphiController(), FSelphIDController()),\n            customerId = "customerId",\n        ))\n\n SDKController.launch(flowController)\n\n'})}),"\n",(0,o.jsx)(n.h4,{id:"52-lanzamiento-de-un-flujo-pendiente-de-publicar",children:"5.2 Lanzamiento de un flujo pendiente de publicar"}),"\n",(0,o.jsxs)(n.p,{children:["Se usar\xe1 el ",(0,o.jsx)(n.em,{children:"FlowPreviewController"})," para probar un flujo que el cliente tiene pendiente de publicar en la plataforma:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'val flowController = FlowPreviewController (\n     FlowConfigurationData(\n            id = "flowId",\n            controllers = listOf(FSelphiController(), FSelphIDController()),\n            customerId = "customerId",\n        ))\n\nSDKController.launch(flowController)\n\n'})}),"\n",(0,o.jsx)(n.h4,{id:"53-recoger-resultados-en-la-aplicaci\xf3n",children:"5.3 Recoger resultados en la aplicaci\xf3n"}),"\n",(0,o.jsx)(n.p,{children:"Los resultados de cada paso del flujo se env\xedan directamente a la plataforma. Si en alg\xfan caso se quieren recoger en la aplicaci\xf3n se deber\xe1 a\xf1adir:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'\n     flowController.stateFlow.collect { flowResult ->\n          Napier.d("APP: FLOW STEP ID ${flowResult.step?.id}")\n\n          when (flowResult.step?.key) {\n          FlowKeys.EXTERNAL_STEP.name -> {\n               delay(DELAY_EXTERNAL_STEP)\n               flowController.launchNextStep()\n          }\n\n          FlowKeys.SELPHI_COMPONENT.name -> {\n               when (val sdkResult = flowResult.result) {\n                    is SdkResult.Error -> {\n                         Napier.d("APP: Selphi FLOW ERROR: ${sdkResult.error.getSelphiError().name}")\n                    }\n\n                    is SdkResult.Success -> {\n                         val result = sdkResult.data.getSelphiResult()\n                         Napier.d("APP: Selphi OK ${result.bestImage?.bitmap?.byteCount}")\n                    }\n               }\n          }\n\n          FlowKeys.SELPHID_COMPONENT.name -> {\n               when (val sdkResult = flowResult.result) {\n                    is SdkResult.Error -> {\n                         Napier.d("APP: SelphID FLOW ERROR: ${sdkResult.error.getSelphiError().name}")\n                    }\n\n                    is SdkResult.Success -> {\n                         val result = sdkResult.data.getSelphIDResult()\n                         Napier.d("APP: SelphID OK ${result.documentCaptured}")\n                    }\n               }\n          }\n          }\n\n          if (flowResult.flowFinish) {\n          Napier.d("APP: FLOW FINISH")\n          }\n     }\n\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"6-recepci\xf3n-del-resultado",children:"6. Recepci\xf3n del resultado"}),"\n",(0,o.jsx)(n.p,{children:"El resultado del flow tendr\xe1 3 campos:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"step: Informaci\xf3n del paso del flujo que se ha realizado. Con el\nvalor de \u201ckey\u201d se podr\xe1 identificar el componente ejecutado en el\npaso."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["result: Resultado del paso en formato SdkResult. M\xe1s informaci\xf3n en\nla secci\xf3n de ",(0,o.jsx)("a",{href:"Mobile_SDK#6-retorno-de-resultado",rel:"nofollow",children:"6. Retorno de resultado"})," del Android Mobile SDK."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"flowFinish: Flag que indicar\xe1 si ha terminado el proceso"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"61-recepci\xf3n-de-errores",children:"6.1. Recepci\xf3n de errores"}),"\n",(0,o.jsxs)(n.p,{children:["En la parte del error, dentro de ",(0,o.jsx)(n.em,{children:"SdkResult.Error"})," dispondremos\n",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"flowResult.step.key"})})," para identificar que componente ha fallado y\nel ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"flowResult.result.error"})})," que contiene el error que ha ocurrido."]}),"\n",(0,o.jsxs)(n.h3,{id:"62-recepci\xf3n-de-ejecuci\xf3n-correcta---data",children:["6.2. Recepci\xf3n de ejecuci\xf3n correcta - ",(0,o.jsx)(n.em,{children:"data"})]}),"\n",(0,o.jsx)(n.p,{children:"En la ejecuci\xf3n correcta de un flujo, se lanzar\xe1n los componentes\ncorrespondientes hasta la finalizaci\xf3n del mismo o hasta obtener un\nerror."}),"\n",(0,o.jsxs)(n.p,{children:["Si el resultado de un paso lanzado es SdkResult.Success, se podr\xe1\nlocalizar, por un lado, la ",(0,o.jsx)(n.em,{children:"key"})," que identifica al componente y por otro\nlado el ",(0,o.jsx)(n.em,{children:"data"})," con el resultado del componente, como es un resultado\ngen\xe9rico, dentro del SDK, se ha creado un conversor para cada tipo de\nresultado. Ej:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'flowController.stateFlow.collect { flowResult ->\n     Napier.d("APP: FLOW STEP ID ${flowResult.step?.id}")\n\n     when (flowResult.step?.key) {\n     FlowKeys.EXTERNAL_STEP.name -> {\n          delay(DELAY_EXTERNAL_STEP)\n          flowController.launchNextStep()\n     }\n\n     FlowKeys.SELPHI_COMPONENT.name -> {\n          when (val sdkResult = flowResult.result) {\n               is SdkResult.Error -> {\n                    Napier.d("APP: Selphi FLOW ERROR: ${sdkResult.error.getSelphiError().name}")\n               }\n\n               is SdkResult.Success -> {\n                    val result = sdkResult.data.getSelphiResult()\n                    Napier.d("APP: Selphi OK ${result.bestImage?.bitmap?.byteCount}")\n               }\n          }\n     }\n\n     FlowKeys.SELPHID_COMPONENT.name -> {\n          when (val sdkResult = flowResult.result) {\n               is SdkResult.Error -> {\n                    Napier.d("APP: SelphID FLOW ERROR: ${sdkResult.error.getSelphiError().name}")\n               }\n\n               is SdkResult.Success -> {\n                    val result = sdkResult.data.getSelphIDResult()\n                    Napier.d("APP: SelphID OK ${result.documentCaptured}")\n               }\n          }\n     }\n     }\n\n     if (flowResult.flowFinish) {\n          Napier.d("APP: FLOW FINISH")\n     }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"Tras comprobar los resultados, deberemos revisar si el flow ha\nfinalizado o a\xfan quedan pasos, para poder gestionar los siguientes pasos\nfuera del SDK."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'if (flowResult.flowFinish) {\n    Napier.d("APP: FLOW FINISH")\n}\n'})}),"\n",(0,o.jsx)(n.hr,{})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);