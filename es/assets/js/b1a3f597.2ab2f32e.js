"use strict";(globalThis.webpackChunksdk_mobile_doc=globalThis.webpackChunksdk_mobile_doc||[]).push([[64615],{58846(e,n,l){l.r(n),l.d(n,{assets:()=>t,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"Flow_Component","title":"Flow Component","description":"0. Requisitos base de SDK Mobile","source":"@site/i18n/es/docusaurus-plugin-content-docs-ios/version-2.3.X/Flow_Component.md","sourceDirName":".","slug":"/Flow_Component","permalink":"/sdk-mobile-documentation/es/docs/ios/2.3.X/Flow_Component","draft":false,"unlisted":false,"tags":[],"version":"2.3.X","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Capture Component","permalink":"/sdk-mobile-documentation/es/docs/ios/2.3.X/Capture_Component"},"next":{"title":"Status Component","permalink":"/sdk-mobile-documentation/es/docs/ios/2.3.X/Status_Component"}}');var r=l(74848),i=l(28453);const a={},s="Flow Component",t={},d=[{value:"0. Requisitos base de SDK Mobile",id:"0-requisitos-base-de-sdk-mobile",level:2},{value:"1. Introducci\xf3n",id:"1-introducci\xf3n",level:2},{value:"2. Integraci\xf3n del componente",id:"2-integraci\xf3n-del-componente",level:2},{value:"2.1. Dependencies required for integration",id:"21-dependencies-required-for-integration",level:3},{value:"3. Iniciar una nueva operaci\xf3n",id:"3-iniciar-una-nueva-operaci\xf3n",level:2},{value:"Al iniciar el lanzamiento de una operaci\xf3n Flow, se genera internamente una nueva operaci\xf3n de forma totalmente transparente.\n<strong><u>No es necesario</u></strong> realizar una nueva operaci\xf3n previamente.",id:"al-iniciar-el-lanzamiento-de-una-operaci\xf3n-flow-se-genera-internamente-una-nueva-operaci\xf3n-de-forma-totalmente-transparenteno-es-necesario-realizar-una-nueva-operaci\xf3n-previamente",level:2},{value:"4. Controladores disponibles",id:"4-controladores-disponibles",level:2},{value:"4.1. Controladores disponibles par flow",id:"41-controladores-disponibles-par-flow",level:3},{value:"5. Inicializaci\xf3n SDK con Flow",id:"5-inicializaci\xf3n-sdk-con-flow",level:2},{value:"6. Uso del componente",id:"6-uso-del-componente",level:2},{value:"6.1 Launching a published stream",id:"61-launching-a-published-stream",level:4},{value:"7. Recepci\xf3n del resultado",id:"7-recepci\xf3n-del-resultado",level:2},{value:"7.1. Recepci\xf3n de errores",id:"71-recepci\xf3n-de-errores",level:3},{value:"7.2. Recepci\xf3n de la ejecuci\xf3n con \xe9xito - <em>data</em>",id:"72-recepci\xf3n-de-la-ejecuci\xf3n-con-\xe9xito---data",level:3}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"flow-component",children:"Flow Component"})}),"\n",(0,r.jsx)(n.h2,{id:"0-requisitos-base-de-sdk-mobile",children:"0. Requisitos base de SDK Mobile"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"SDK Mobile"})," es un conjunto de librer\xedas (",(0,r.jsx)(n.strong,{children:"Componentes"}),") que ofrece\nuna serie de funcionalidades y servicios, permitiendo a su vez su\nintegraci\xf3n en una aplicaci\xf3n Mobile de forma sencilla y totalmente\nescalable. Dependiendo del caso de uso que se requiera, se deber\xe1\nrealizar la instalaci\xf3n de unos determinados componentes. Su alto nivel\nde modularidad permite que, en un futuro, se puedan a\xf1adir otros\ncomponentes nuevos sin afectar en absoluto a los ya integrados en el\nproyecto."]}),"\n",(0,r.jsxs)(n.p,{children:["Para m\xe1s informaci\xf3n sobre la configuraci\xf3n base, vaya a la secci\xf3n de\n",(0,r.jsx)(n.a,{href:"./Mobile_SDK#11-requisitos-m%C3%ADnimos",children:"Primeros Pasos"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-introducci\xf3n",children:"1. Introducci\xf3n"}),"\n",(0,r.jsxs)(n.p,{children:["Este documento Flow es un ",(0,r.jsx)(n.strong,{children:"anexo"})," al ",(0,r.jsx)(n.strong,{children:"SDK"})," com\xfan, ya que esta funcionalidad est\xe1 contenida en el propio componente ",(0,r.jsx)(n.strong,{children:"SDK"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Flow es una funcionalidad que conecta la secci\xf3n ",(0,r.jsx)(n.strong,{children:"Design Studio"})," de la ",(0,r.jsx)(n.strong,{children:"Plataforma"})," con el SDK y la implementaci\xf3n realizada por la ",(0,r.jsx)(n.strong,{children:"Plataforma"})," con el SDK y la implementaci\xf3n del cliente."]}),"\n",(0,r.jsx)(n.p,{children:"A trav\xe9s de un identificador Flow, podr\xe1s lanzar un flujo dise\xf1ado en la web, que puede contener hasta que puede contener de 1 a N pasos de los componentes existentes en el SDK."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-integraci\xf3n-del-componente",children:"2. Integraci\xf3n del componente"}),"\n",(0,r.jsx)("div",{class:"warning",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)("span",{class:"warning",children:"\u26a0\ufe0f"}),"\nAntes de integrar este componente se recomienda leer la documentaci\xf3n de ",(0,r.jsx)(n.a,{href:"./Mobile_SDK#2-integraci%C3%B3n-inicial",children:"Integraci\xf3n Inicial"})," y seguir las instrucciones indicadas en dicho documento."]})}),"\n",(0,r.jsx)(n.p,{children:"En esta secci\xf3n se explicar\xe1 paso a paso c\xf3mo integrar el componente actual en un proyecto ya existente."}),"\n",(0,r.jsx)(n.h3,{id:"21-dependencies-required-for-integration",children:"2.1. Dependencies required for integration"}),"\n",(0,r.jsxs)(n.p,{children:["No se requiere ",(0,r.jsx)(n.strong,{children:"ninguna dependencia adicional"})," para utilizar Flow."]}),"\n",(0,r.jsxs)(n.p,{children:["Usted ",(0,r.jsx)("u",{children:"debe a\xf1adir las dependencias requeridas de cada componente"})," que quieras lanzar dentro de Flow. Si quieres lanzar ",(0,r.jsx)(n.strong,{children:"reconocimiento facial,"})," deber\xeda ser ",(0,r.jsx)(n.strong,{children:"necesario"})," instalar el  componente ",(0,r.jsx)(n.strong,{children:"Selphi"}),", y as\xed sucesivamente con el resto de componentes."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-iniciar-una-nueva-operaci\xf3n",children:"3. Iniciar una nueva operaci\xf3n"}),"\n",(0,r.jsxs)(n.h2,{id:"al-iniciar-el-lanzamiento-de-una-operaci\xf3n-flow-se-genera-internamente-una-nueva-operaci\xf3n-de-forma-totalmente-transparenteno-es-necesario-realizar-una-nueva-operaci\xf3n-previamente",children:["Al iniciar el lanzamiento de una operaci\xf3n Flow, se genera internamente una nueva operaci\xf3n de forma totalmente transparente.\n",(0,r.jsx)(n.strong,{children:(0,r.jsx)("u",{children:"No es necesario"})})," realizar una nueva operaci\xf3n previamente."]}),"\n",(0,r.jsx)(n.h2,{id:"4-controladores-disponibles",children:"4. Controladores disponibles"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Controller"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Description"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"FlowController"}),(0,r.jsx)(n.td,{children:"Flow controlador principal. Lanzamiento de flujos publicados."})]})})]}),"\n",(0,r.jsx)(n.h3,{id:"41-controladores-disponibles-par-flow",children:"4.1. Controladores disponibles par flow"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Controlador"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Descripci\xf3n"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"SelphiController"}),(0,r.jsx)(n.td,{children:"Reconocimiento facial"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"SelphIDController"}),(0,r.jsx)(n.td,{children:"Reconocimiento documental"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"VoiceController"}),(0,r.jsx)(n.td,{children:"Captura de voz"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"PhingersController"}),(0,r.jsx)(n.td,{children:"Captura de huellas"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"NfcController"}),(0,r.jsx)(n.td,{children:"Lectura de NFC"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"QrReaderController"}),(0,r.jsx)(n.td,{children:"Lectura de QR"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"QrGeneratorController"}),(0,r.jsx)(n.td,{children:"Generador de QR"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"InvoiceReaderController"}),(0,r.jsx)(n.td,{children:"Captura de facturas"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"VideoIdController"}),(0,r.jsx)(n.td,{children:"Video Identificaci\xf3n"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"VideoCallController"}),(0,r.jsx)(n.td,{children:"Video Asistencia"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"VideoRecordingController"}),(0,r.jsx)(n.td,{children:"Video ScreenSharing"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-inicializaci\xf3n-sdk-con-flow",children:"5. Inicializaci\xf3n SDK con Flow"}),"\n",(0,r.jsxs)(n.p,{children:["La funci\xf3n de inicializaci\xf3n SDK dispone del par\xe1metro ",(0,r.jsx)(n.em,{children:"activateFlow"})," para gestionar su activaci\xf3n:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"SDKController.shared.initSdk(\n     ...\n     activateFlow: true,\n     ...\n)\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-uso-del-componente",children:"6. Uso del componente"}),"\n",(0,r.jsx)(n.h4,{id:"61-launching-a-published-stream",children:"6.1 Launching a published stream"}),"\n",(0,r.jsxs)(n.p,{children:["Utilizar\xe1 el ",(0,r.jsx)(n.em,{children:"FlowController"})," para lanzar un flujo que el cliente ha publicado en la plataforma, se deber\xe1 indicar el flowID en el objeto FlowConfigurationData:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public func launchFlow(customerId: String, viewController: UIViewController, output: @escaping (SdkResult<String>) -> Void, offline: Bool = false) {\n\n        let selphidController = SelphIDController(data: nil, output: {\n            print("SelphidController output: \\($0.errorType)")\n        }, viewController: viewController)\n        \n        let selphiController = SelphiController(data: nil, output: {\n            print("SelphiController output: \\($0.errorType)")\n        }, viewController: viewController)\n        \n        let externalStepController = ExternalStepController(output: {\n            print("externalStepController output")\n        })\n        \n        let controllers: [IFlowableController] =\n        [selphidController, selphiController, selphixController, nfcController, qrReaderController,\n         invoiceReaderController, phingersController, videoIdController, videoCallController, voiceController, externalStepController]\n        \n        let flowConfigurationData = FlowConfigurationData(\n            id: "flowId",\n            controllers: controllers,\n            customerId: customerId)\n        \n        let flowOutput: (SdkFlowResult) -> Void = { sdkFlowResult in\n            print("FlowController: STEP - \\(sdkFlowResult.step)")\n            print("FlowController: FLOW FINISH: \\(sdkFlowResult.flowFinish)")\n            print("FlowController: SDKResult: ERROR=\\(sdkFlowResult.result.errorType) - DATA=\\(sdkFlowResult.result.data)")\n\n            switch (sdkFlowResult.result.data) {\n            case (let data as SelphIDResult):\n                break\n            case (let data as SelphiResult):\n                break\n            default: break\n            }\n        }\n        \n        let flowController = offline\n        ? FlowOfflineController(flowConfigurationData: flowConfigurationData, output: flowOutput)\n        : FlowController(flowConfigurationData: flowConfigurationData, output: flowOutput)\n        \n        self.flowController = flowController\n        SDKController.shared.launch(controller: flowController)\n    }\n\n     func flowNextStep() {\n        self.flowController?.launchNextStep()\n    }\n    \n    func cancelFlow() {\n        self.flowController?.cancelFlow()\n        self.flowController = nil\n    }\n\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-recepci\xf3n-del-resultado",children:"7. Recepci\xf3n del resultado"}),"\n",(0,r.jsx)(n.p,{children:"El resultado del flujo tendr\xe1 3 campos:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:'step: Informaci\xf3n sobre el paso de flujo que se ha realizado. Con el valor\nvalor de "key" se podr\xe1 identificar el componente ejecutado en el paso.'}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["result: Los controllers devolver\xe1n la informaci\xf3n necesaria en formato SdkResult. M\xe1s informaci\xf3n en la secci\xf3n de ",(0,r.jsx)(n.a,{href:"./Mobile_SDK#6-result-return",children:"Retorno de Resultado"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"flowFinish: Flag que indica si el proceso ha finalizado."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"71-recepci\xf3n-de-errores",children:"7.1. Recepci\xf3n de errores"}),"\n",(0,r.jsxs)(n.p,{children:["En el resultado, dentro de ",(0,r.jsx)(n.em,{children:"sdkFlowResult"})," tendremos\nel ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"sdkFlowResult.step"})})," para identificar qu\xe9 componente ha fallado, y\nel ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"sdkFlowResult.result.errorType"})})," que contiene el error que se ha producido."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'print("FlowController: STEP - \\(sdkFlowResult.step)")\nprint("FlowController: SDKResult: ERROR=\\(sdkFlowResult.result.errorType) - DATA=\\(sdkFlowResult.result.data)")\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"72-recepci\xf3n-de-la-ejecuci\xf3n-con-\xe9xito---data",children:["7.2. Recepci\xf3n de la ejecuci\xf3n con \xe9xito - ",(0,r.jsx)(n.em,{children:"data"})]}),"\n",(0,r.jsx)(n.p,{children:"En caso de ejecuci\xf3n correcta de un flujo, los componentes correspondientes se lanzar\xe1n hasta la finalizaci\xf3n del flujo o hasta que se produzca un error.\ncomponentes se lanzar\xe1n hasta la finalizaci\xf3n o hasta que se produzca un error."}),"\n",(0,r.jsx)(n.p,{children:"Tras comprobar los resultados, deberemos comprobar si el flujo ha finalizado o a\xfan quedan pasos, para poder gestionar los siguientes pasos fuera del SDK."}),"\n",(0,r.jsx)(n.p,{children:"Ejemplo:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'let flowOutput: (SdkFlowResult) -> Void = { sdkFlowResult in\n    print("FlowController: STEP - \\(sdkFlowResult.step)")\n    print("FlowController: FLOW FINISH: \\(sdkFlowResult.flowFinish)")\n    print("FlowController: SDKResult: ERROR=\\(sdkFlowResult.result.errorType) - DATA=\\(sdkFlowResult.result.data)")\n\n    switch (sdkFlowResult.result.data) {\n    case (let data as SelphIDResult):\n        break\n    case (let data as SelphiResult):\n        break\n    case (let data as SelphixResult):\n        break\n    default: break\n    }\n    }\n'})}),"\n",(0,r.jsx)(n.p,{children:"Despu\xe9s de comprobar los resultados, debemos comprobar si el flujo se ha finalizado o a\xfan quedan pasos, para poder gestionar los siguientes pasos fuera del SDK."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'print("FlowController: FLOW FINISH: \\(sdkFlowResult.flowFinish)")\n'})}),"\n",(0,r.jsxs)(n.p,{children:["En caso de que haya un paso externo, al final de este paso se debe llamar al m\xe9todo ",(0,r.jsx)(n.em,{children:"launchNextStep"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"func flowNextStep() {\n     self.flowController?.launchNextStep()\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Si desea cancelarlo, debe llamar a ",(0,r.jsx)(n.em,{children:"cancelFlow"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"func cancelFlow() {\n     self.flowController?.cancelFlow()\n     self.flowController = nil\n}\n"})}),"\n",(0,r.jsx)(n.hr,{})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453(e,n,l){l.d(n,{R:()=>a,x:()=>s});var o=l(96540);const r={},i=o.createContext(r);function a(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);