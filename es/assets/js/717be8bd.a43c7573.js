"use strict";(globalThis.webpackChunksdk_mobile_doc=globalThis.webpackChunksdk_mobile_doc||[]).push([[74877],{2696(e,n,a){a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Voice_Component","title":"Captura de voz","description":"1. Introducci\xf3n","source":"@site/i18n/es/docusaurus-plugin-content-docs-android/version-2.3.X/Voice_Component.md","sourceDirName":".","slug":"/Voice_Component","permalink":"/sdk-mobile-documentation/es/docs/android/2.3.X/Voice_Component","draft":false,"unlisted":false,"tags":[],"version":"2.3.X","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Captura de huellas","permalink":"/sdk-mobile-documentation/es/docs/android/2.3.X/Phingers_Component"},"next":{"title":"Captura de NFC","permalink":"/sdk-mobile-documentation/es/docs/android/2.3.X/NFC_Component"}}');var o=a(74848),s=a(28453);const r={},l="Captura de voz",c={},d=[{value:"1. Introducci\xf3n",id:"1-introducci\xf3n",level:2},{value:"2. Dependencia",id:"2-dependencia",level:2},{value:"3. Controladores disponibles",id:"3-controladores-disponibles",level:2},{value:"4. Lanzamiento simplificado",id:"4-lanzamiento-simplificado",level:2},{value:"5. Configuraci\xf3n b\xe1sica",id:"5-configuraci\xf3n-b\xe1sica",level:2},{value:"6. Recepci\xf3n del resultado",id:"6-recepci\xf3n-del-resultado",level:2},{value:"6.1. Recepci\xf3n de errores",id:"61-recepci\xf3n-de-errores",level:3},{value:"6.2. Recepci\xf3n del resultado correcto - <em>data</em>",id:"62-recepci\xf3n-del-resultado-correcto---data",level:3},{value:"6.2.1 <em>audios</em>",id:"621-audios",level:4},{value:"6.2.2 <em>tokenizedAudios</em>",id:"622-tokenizedaudios",level:4},{value:"7. Informaci\xf3n avanzada",id:"7-informaci\xf3n-avanzada",level:2},{value:"7.1  Configuraci\xf3n avanzada del componente",id:"71--configuraci\xf3n-avanzada-del-componente",level:3},{value:"8. Personalizaci\xf3n del componente",id:"8-personalizaci\xf3n-del-componente",level:2},{value:"8.1 Textos",id:"81-textos",level:3},{value:"8.2. Animaciones",id:"82-animaciones",level:3},{value:"8.3 Vistas externas",id:"83-vistas-externas",level:3},{value:"9. Logs",id:"9-logs",level:2}];function t(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"captura-de-voz",children:"Captura de voz"})}),"\n",(0,o.jsx)(n.h2,{id:"1-introducci\xf3n",children:"1. Introducci\xf3n"}),"\n",(0,o.jsxs)(n.p,{children:["La captura facial se realiza con el ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"Voice Component"})}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Este componente se encarga de realizar la captura de voz del\nusuario y la posterior extracci\xf3n de las plantillas correspondientes.\nSus principales procesos son:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Gesti\xf3n interna del micr\xf3fono y permisos."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Entrada de cierto n\xfamero de frases para posteriormente leer cada una\nen un paso."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"An\xe1lisis de los silencios."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"An\xe1lisis del progreso."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Asistente en los procesos de captura."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Generaci\xf3n de las plantillas con las caracter\xedsticas de la voz y\npuntuaciones."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["En el apartado de ",(0,o.jsx)(n.a,{href:"./Mobile_SDK",children:"Lanzamiento simplificado"})," se detallan los pasos necesarios para la integraci\xf3n b\xe1sica del SDK. En esta secci\xf3n se a\xf1ade la informaci\xf3n para el lanzamiento de este componente."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"2-dependencia",children:"2. Dependencia"}),"\n",(0,o.jsx)(n.p,{children:"La dependencia espec\xedfica del componente es:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'implementation "com.facephi.androidsdk:voice_component:$version"\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"3-controladores-disponibles",children:"3. Controladores disponibles"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Controlador"})}),(0,o.jsx)(n.th,{children:(0,o.jsx)(n.strong,{children:"Descripci\xf3n"})})]})}),(0,o.jsx)(n.tbody,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"VoiceController"}),(0,o.jsx)(n.td,{children:"Controlador principal de captura de voz"})]})})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"4-lanzamiento-simplificado",children:"4. Lanzamiento simplificado"}),"\n",(0,o.jsx)(n.p,{children:"Una vez iniciado el SDK y creada una nueva operaci\xf3n se podr\xe1 lanzar el componente.\nSe podr\xe1 hacer uso de cualquiera de sus controladores para ejecutar su funcionalidad."}),"\n",(0,o.jsx)(n.p,{children:"Lanzamiento de la captura:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'val response = SDKController.launch(\n    VoiceController(VoiceConfigurationData(...))\n)\nwhen (response) {\n    is SdkResult.Error -> Napier.d("ERROR - ${response.error.name}")\n    is SdkResult.Success -> response.data\n}\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"5-configuraci\xf3n-b\xe1sica",children:"5. Configuraci\xf3n b\xe1sica"}),"\n",(0,o.jsxs)(n.p,{children:["Para lanzar el componente actual, se deber\xe1 crear un objeto ",(0,o.jsx)(n.em,{children:"VoiceConfigurationData"})," que ser\xe1 la configuraci\xf3n del\ncontrolador del componente."]}),"\n",(0,o.jsx)(n.p,{children:"La configuraci\xf3n b\xe1sica necesaria para es la siguiente:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'VoiceConfigurationData(\n  phrases = arrayOf(\n            "Tu nombre complet y tu direcci\xf3n",\n            "Tu n\xfamero de documento con letra",\n        )\n)\n'})}),"\n",(0,o.jsx)(n.p,{children:"Se puede editar el listado de frases que se van a mostrar al usuario."}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"6-recepci\xf3n-del-resultado",children:"6. Recepci\xf3n del resultado"}),"\n",(0,o.jsx)(n.p,{children:"El lanzamiento devolver\xe1 la informaci\xf3n en formato SdkResult. Pudiendo diferenciarse entre un lanzamiento correcto y uno incorrecto:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'when (response) {\n    is SdkResult.Error -> Napier.d("ERROR - ${response.error}")\n    is SdkResult.Success -> response.data\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"61-recepci\xf3n-de-errores",children:"6.1. Recepci\xf3n de errores"}),"\n",(0,o.jsx)(n.p,{children:"Los errores se devolver\xe1n como un objeto 'VoiceError'."}),"\n",(0,o.jsx)(n.p,{children:"Listado de errores:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"VOC_ACTIVITY_RESULT_MSG_ERROR: El resultado de la actividad es incorrecto"}),"\n",(0,o.jsx)(n.li,{children:"VOC_APPLICATION_CONTEXT_ERROR: El contexto de aplicaci\xf3n necesario es nulo"}),"\n",(0,o.jsx)(n.li,{children:"VOC_CANCEL_BY_USER: El usuario ha cancelado el proceso"}),"\n",(0,o.jsx)(n.li,{children:"VOC_CANCEL_LAUNCH: Se ha hecho una cancelaci\xf3n general del SDK"}),"\n",(0,o.jsx)(n.li,{children:"VOC_COMPONENT_LICENSE_ERROR: La licencia del componente no es correcta"}),"\n",(0,o.jsx)(n.li,{children:"VOC_EMPTY_LICENSE: El String de licencia est\xe1 vac\xedo"}),"\n",(0,o.jsx)(n.li,{children:"VOC_FETCH_DATA_ERROR: Error en la recogida del resultado"}),"\n",(0,o.jsx)(n.li,{children:"VOC_FLOW_ERROR: Error en el proceso de flow"}),"\n",(0,o.jsx)(n.li,{children:"VOC_INITIALIZATION_ERROR: Error de inicializaci\xf3n"}),"\n",(0,o.jsx)(n.li,{children:"VOC_INTERNAL_LICENSE_ERROR: Error interno relacionado con la licencia"}),"\n",(0,o.jsx)(n.li,{children:"VOC_MANAGER_NOT_INITIALIZED: Los managers son nulos"}),"\n",(0,o.jsx)(n.li,{children:"VOC_NO_DATA_ERROR: Los datos de entrada son nulos"}),"\n",(0,o.jsx)(n.li,{children:"VOC_OPERATION_NOT_CREATED: No hay ninguna operaci\xf3n en curso"}),"\n",(0,o.jsx)(n.li,{children:"VOC_PERMISSION_DENIED: El usuario ha rechazado los permisos"}),"\n",(0,o.jsx)(n.li,{children:"VOC_TIMEOUT: Timeout en el proceso"}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"62-recepci\xf3n-del-resultado-correcto---data",children:["6.2. Recepci\xf3n del resultado correcto - ",(0,o.jsx)(n.em,{children:"data"})]}),"\n",(0,o.jsxs)(n.p,{children:["En la parte de SdkResult.Success - ",(0,o.jsx)(n.em,{children:"data"}),", dispondremos de la clase  ",(0,o.jsx)(n.em,{children:"VoiceResult"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Los campos devueltos en el resultado son los siguientes:"}),"\n",(0,o.jsxs)(n.h4,{id:"621-audios",children:["6.2.1 ",(0,o.jsx)(n.em,{children:"audios"})]}),"\n",(0,o.jsx)(n.p,{children:"Contiene un listado de audios capturados en formato ByteArray."}),"\n",(0,o.jsxs)(n.h4,{id:"622-tokenizedaudios",children:["6.2.2 ",(0,o.jsx)(n.em,{children:"tokenizedAudios"})]}),"\n",(0,o.jsx)(n.p,{children:"Contiene el listado de audios capturados en formato tokenizado de\nFacephi."}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"7-informaci\xf3n-avanzada",children:"7. Informaci\xf3n avanzada"}),"\n",(0,o.jsx)(n.p,{children:"Este apartado ampl\xeda la informaci\xf3n del componente."}),"\n",(0,o.jsx)(n.h3,{id:"71--configuraci\xf3n-avanzada-del-componente",children:"7.1  Configuraci\xf3n avanzada del componente"}),"\n",(0,o.jsxs)(n.p,{children:["Para lanzar el componente actual, se deber\xe1 crear un objeto ",(0,o.jsx)(n.em,{children:"VoiceConfigurationData"}),"\nque ser\xe1 la configuraci\xf3n del controlador del componente."]}),"\n",(0,o.jsx)(n.p,{children:"A continuaci\xf3n se detallan todos los campos que forman parte de esta clase."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"phrases"}),": Indica la/las frases necesarias para capturar.."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"vibrationEnabled"}),": Indica la activaci\xf3n de la vibraci\xf3n cuando el widget termine satisfactoriamente."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"showTutorial"}),": Indica si el componente activa la pantalla de tutorial. En esta vista se explica de forma intuitiva c\xf3mo se realiza la captura."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"extractionTimeout"}),": Establece el tiempo m\xe1ximo que se puede realizar la captura."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"showDiagnostic"}),": Mostrar pantallas de diagn\xf3stico al final del proceso."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"enableQualityCheck"}),": Activa o desactiva la comprobaci\xf3n de calidad del audio. Se recomienda tenerla siempre activa."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"showPreviousTip"}),": Muestra una pantalla previa al lanzamiento de la captura con informaci\xf3n sobre el proceso a realizar y un bot\xf3n para el lanzamiento."]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"8-personalizaci\xf3n-del-componente",children:"8. Personalizaci\xf3n del componente"}),"\n",(0,o.jsxs)(n.p,{children:["Aparte de los cambios que se pueden realizar a nivel de SDK (los cuales\nse explican en el documento de ",(0,o.jsx)(n.a,{href:"./Mobile_SDK_advanced",children:"Ajustes avanzados"}),"), este componente en concreto permite la\nmodificaci\xf3n de su interfaz."]}),"\n",(0,o.jsx)(n.h3,{id:"81-textos",children:"8.1 Textos"}),"\n",(0,o.jsxs)(n.p,{children:["Si se desea modificar los textos de la SDK habr\xeda que incluir el\nsiguiente fichero XML en la aplicaci\xf3n del cliente, y modificar el valor\nde cada ",(0,o.jsx)(n.em,{children:"String"})," por el deseado."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'    \x3c!-- Previous Tip --\x3e\n    <string name="voice_component_tip_message">Habla claro y en voz alta. &lt;br&gt;&lt;br&gt; Aseg\xfarate de estar en un entorno silencioso</string>\n    <string name="voice_component_tip_title">Reconocimiento de voz</string>\n    <string name="voice_component_tip_button">Comenzar</string>\n    \x3c!-- Process --\x3e\n    <string name="voice_component_success_message">Grabaci\xf3n registrada</string>\n    <string name="voice_component_speech_message">Sin pulsar nada, habla claro y cercano al micr\xf3fono</string>\n    <string name="voice_component_speech_more_message">Contin\xfae hablando</string>\n    <string name="voice_component_read_message">Di en voz alta:</string>\n    <string name="voice_component_speech_noisy_message">Demasiado ruido. Busca un entorno silencioso</string>\n    <string name="voice_component_success_records_message">grabaciones exitosas</string>\n    \x3c!-- Diagnostic --\x3e\n    <string name="voice_component_timeout_title">Tiempo superado</string>\n    <string name="voice_component_timeout_desc">No hemos podido identificarte. Int\xe9ntalo de nuevo.</string>\n    <string name="voice_component_internal_error_title">Hubo un problema t\xe9cnico</string>\n    <string name="voice_component_internal_error_desc">Pedimos disculpas. No se ha podido hacer la captura</string>\n    \n'})}),"\n",(0,o.jsx)(n.h3,{id:"82-animaciones",children:"8.2. Animaciones"}),"\n",(0,o.jsx)(n.p,{children:"Si se desea modificar las animaciones (lottie) de la SDK habr\xeda que incluir las animaciones con el mismo nombre en la carpeta res/raw/ de la aplicaci\xf3n."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"voice_anim_enroll_ko.json\nvoice_anim_enroll_ok.json\nvoice_anim_enroll_progress.json\nvoice_anim_intro.json\n"})}),"\n",(0,o.jsx)(n.h3,{id:"83-vistas-externas",children:"8.3 Vistas externas"}),"\n",(0,o.jsx)(n.p,{children:"Es posible modificar completamente las pantallas del componente manteniendo su funcionalidad y navegaci\xf3n. Para ello deben implementarse los interfaces siguientes:"}),"\n",(0,o.jsx)(n.p,{children:"Pantalla de tip previo:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kotlin",children:"\ninterface IVoicePreviousTipView {\n    @Composable\n    fun Content(\n        onContinue: () -> Unit,\n        onClose: () -> Unit\n    )\n}\n\n"})}),"\n",(0,o.jsx)(n.p,{children:"Pantalla de diagn\xf3stico de error:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kotlin",children:"\ninterface IVoiceErrorDiagnosticView {\n    @Composable\n    fun Content(\n        error: VoiceError,\n        onRetry: () -> Unit,\n        onClose: () -> Unit,\n    )\n}\n\n"})}),"\n",(0,o.jsx)(n.p,{children:"Pantallas de captura:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kotlin",children:"\ninterface IVoiceEnrollRecordingView {\n    @Composable\n    fun Content(\n        phrase: String,\n        numberRecordedPhrases: Int,\n        numberTotalPhrases: Int,\n        voiceAmplitude: Float,\n        recordingProgress: Int,\n        onClose: () -> Unit,\n    )\n}\n\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kotlin",children:"\ninterface IVoiceEnrollSuccessView {\n    @Composable\n    fun Content(\n        phrase: String,\n        numberRecordedPhrases: Int,\n        numberTotalPhrases: Int,\n        onClose: () -> Unit,\n    )\n}\n\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kotlin",children:"\ninterface IVoiceEnrollErrorView {\n    @Composable\n    fun Content(\n        phrase: String,\n        numberRecordedPhrases: Int,\n        numberTotalPhrases: Int,\n        onClose: () -> Unit,\n    )\n}\n\n"})}),"\n",(0,o.jsx)(n.p,{children:'Una vez creadas las clases que implementan los interfaces, en el lanzamiento del componente se podr\xe1 a\xf1adir el par\xe1metro "customViews" para que se utilicen en el SDK.'}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"9-logs",children:"9. Logs"}),"\n",(0,o.jsx)(n.p,{children:'Para visualizar en consola los logs de este componente se podr\xe1 usar el filtro: "VOICE:"'}),"\n",(0,o.jsx)(n.hr,{})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(t,{...e})}):t(e)}},28453(e,n,a){a.d(n,{R:()=>r,x:()=>l});var i=a(96540);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);