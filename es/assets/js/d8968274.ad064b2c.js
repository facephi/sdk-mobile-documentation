"use strict";(globalThis.webpackChunksdk_mobile_doc=globalThis.webpackChunksdk_mobile_doc||[]).push([[53197],{13021(e,i,n){n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"Selphi_widget_ios","title":"Selphi Widget iOS","description":"1. \xbfQu\xe9 es el widget?","source":"@site/i18n/es/docusaurus-plugin-content-docs-resources/current/Selphi_widget_ios.md","sourceDirName":".","slug":"/Selphi_widget_ios","permalink":"/sdk-mobile-documentation/es/docs/resources/Selphi_widget_ios","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Selphi Widget Android","permalink":"/sdk-mobile-documentation/es/docs/resources/Selphi_widget_android"},"next":{"title":"Recursos de SelphID","permalink":"/sdk-mobile-documentation/es/docs/resources/SelphID_resources"}}');var r=n(74848),l=n(28453);const s={},o="Selphi Widget iOS",d={},t=[{value:"1. \xbfQu\xe9 es el widget?",id:"1-qu\xe9-es-el-widget",level:2},{value:"1.1. Requerimientos m\xednimos",id:"11-requerimientos-m\xednimos",level:3},{value:"2. \xbfC\xf3mo se integra el widget?",id:"2-c\xf3mo-se-integra-el-widget",level:2},{value:"2.1. Librer\xedas requeridas y configuraci\xf3n",id:"21-librer\xedas-requeridas-y-configuraci\xf3n",level:3},{value:"2.2. Integraci\xf3n del widget",id:"22-integraci\xf3n-del-widget",level:3},{value:"3. Configurar el widget",id:"3-configurar-el-widget",level:2},{value:"3.1. ResourcesPath",id:"31-resourcespath",level:3},{value:"3.2. Propiedades",id:"32-propiedades",level:3},{value:"3.2.1. livenessMode",id:"321-livenessmode",level:4},{value:"3.2.2. stabilizationMode",id:"322-stabilizationmode",level:4},{value:"3.2.3. qrMode",id:"323-qrmode",level:4},{value:"3.2.4. userTags",id:"324-usertags",level:4},{value:"3.2.5. locale",id:"325-locale",level:4},{value:"3.2.6. logImages",id:"326-logimages",level:4},{value:"3.2.7. tutorialFlag",id:"327-tutorialflag",level:4},{value:"3.2.8. debugMode",id:"328-debugmode",level:4},{value:"3.2.9. videoFilename",id:"329-videofilename",level:4},{value:"3.2.10. showAfterCapture",id:"3210-showaftercapture",level:4},{value:"3.2.11 extractionDuration",id:"3211-extractionduration",level:4},{value:"3.2.11 preferredOrientation",id:"3211-preferredorientation",level:4},{value:"3.3. M\xe9todos",id:"33-m\xe9todos",level:3},{value:"3.3.0. setLicense",id:"330-setlicense",level:4},{value:"3.3.1. generateTemplateRawFromUIImage:(UIImage *)img",id:"331-generatetemplaterawfromuiimageuiimage-img",level:4},{value:"3.3.2. generateTemplateRawFromNSData:(NSData *)img",id:"332-generatetemplaterawfromnsdatansdata-img",level:4},{value:"3.3.3 widgetVersion",id:"333-widgetversion",level:4},{value:"4. Personalizaci\xf3n del Widget",id:"4-personalizaci\xf3n-del-widget",level:2},{value:"4.1. Descripci\xf3n b\xe1sica",id:"41-descripci\xf3n-b\xe1sica",level:3},{value:"4.1.1. Personalizaci\xf3n de textos",id:"411-personalizaci\xf3n-de-textos",level:4},{value:"4.1.2. Personalizaci\xf3n de im\xe1genes",id:"412-personalizaci\xf3n-de-im\xe1genes",level:4},{value:"4.1.3. Personalizaci\xf3n de colores",id:"413-personalizaci\xf3n-de-colores",level:4},{value:"4.1.4. Personalizaci\xf3n de tipo de fuente de letra",id:"414-personalizaci\xf3n-de-tipo-de-fuente-de-letra",level:4},{value:"4.2. Descripci\xf3n avanzada",id:"42-descripci\xf3n-avanzada",level:3},{value:"4.2.1. Widget.xml",id:"421-widgetxml",level:4},{value:"4.2.2. Carpeta strings",id:"422-carpeta-strings",level:4},{value:"4.2.3. Carpeta resources",id:"423-carpeta-resources",level:4},{value:"4.2.4. Elemento BACKGROUND",id:"424-elemento-background",level:4},{value:"4.2.5. Elemento BUTTON",id:"425-elemento-button",level:4},{value:"4.2.6. Elemento TEXT",id:"426-elemento-text",level:4},{value:"4.2.7. Elemento IMAGE",id:"427-elemento-image",level:4},{value:"4.2.8. Elemento VIDEO",id:"428-elemento-video",level:4},{value:"5. Mensajes del widget",id:"5-mensajes-del-widget",level:2},{value:"5.1. Eventos del protocolo",id:"51-eventos-del-protocolo",level:3},{value:"5.1.1. Evento ExtractionFinished",id:"511-evento-extractionfinished",level:4},{value:"5.1.2. Evento ExtractionFailed",id:"512-evento-extractionfailed",level:4},{value:"5.1.3. Evento ExtractionCancelled",id:"513-evento-extractioncancelled",level:4},{value:"5.1.4. Evento ExtractionTimeout",id:"514-evento-extractiontimeout",level:4},{value:"5.1.5. Evento onEvent",id:"515-evento-onevent",level:4}];function c(e){const i={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"selphi-widget-ios",children:"Selphi Widget iOS"})}),"\n",(0,r.jsx)(i.h2,{id:"1-qu\xe9-es-el-widget",children:"1. \xbfQu\xe9 es el widget?"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"FacePhi Selphi iOS Widget"})," es una utilidad dise\xf1ada mediante Objective C con la que poder realizar las funciones de reconocimiento facial que ofrece la tecnolog\xeda de FacePhi. Se trata de una herramienta dise\xf1ada para facilitar a los desarrolladores la integraci\xf3n de esta tecnolog\xeda en las aplicaciones de reconocimiento facial."]}),"\n",(0,r.jsx)(i.p,{children:"Las utilidades disponibles en este widget son:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Gesti\xf3n interna de c\xe1maras y resoluciones"}),"\n",(0,r.jsx)(i.li,{children:"Asistente en los procesos de autenticaci\xf3n"}),"\n",(0,r.jsx)(i.li,{children:"Extracci\xf3n de patrones faciales de forma transparente para el integrador"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"11-requerimientos-m\xednimos",children:"1.1. Requerimientos m\xednimos"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"iOS Deployment target: 13"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"2-c\xf3mo-se-integra-el-widget",children:"2. \xbfC\xf3mo se integra el widget?"}),"\n",(0,r.jsx)(i.h3,{id:"21-librer\xedas-requeridas-y-configuraci\xf3n",children:"2.1. Librer\xedas requeridas y configuraci\xf3n"}),"\n",(0,r.jsx)(i.p,{children:'Para a\xf1adir las librer\xedas necesarias, desde la pesta\xf1a "Build Phases", a\xf1adir las siguientes librer\xedas en el apartado "Embedded binaries":'}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Librer\xeda del extractor: ",(0,r.jsx)(i.code,{children:"FPBExtractoriOS.framework"})]}),"\n",(0,r.jsxs)(i.li,{children:["Librer\xeda del widget selphi: ",(0,r.jsx)(i.code,{children:"FPhiWidgetSelphi.framework"})]}),"\n",(0,r.jsxs)(i.li,{children:["Librer\xeda del widget core: ",(0,r.jsx)(i.code,{children:"FPhiWidgetCore.framework"})]}),"\n",(0,r.jsxs)(i.li,{children:["Libreria ZipZap: ",(0,r.jsx)(i.code,{children:"ZipZap.xcframework"})]}),"\n",(0,r.jsxs)(i.li,{children:["Librer\xeda nativa: ",(0,r.jsx)(i.code,{children:"libc++.tbd"})]}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:['En el apartado "Copy bundle resources" hay que a\xf1adir los recursos del widget que se encuentran en el archivo ',(0,r.jsx)(i.code,{children:"fphi-widget-resources-SelphiLive-1.2.zip"}),"."]}),"\n",(0,r.jsx)(i.p,{children:"Desde la versi\xf3n de iOS 10.0, si la aplicaci\xf3n hace uso de la c\xe1mara, es necesario a\xf1adir la descripci\xf3n del motivo para el que se accede a ella. Para esto hay que modificar el archivo info.plist de la aplicaci\xf3n a\xf1adiendo la descripci\xf3n a la clave NSCameraUsageDescription:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-xml",children:"    <key>NSCameraUsageDescription</key>\n    <string>Description</string>\n"})}),"\n",(0,r.jsx)(i.h3,{id:"22-integraci\xf3n-del-widget",children:"2.2. Integraci\xf3n del widget"}),"\n",(0,r.jsx)(i.p,{children:"Para integrar el widget desde un controlador, una vez est\xe1n enlazadas las librer\xedas necesarias, hay que realizar las siguientes acciones:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Importar el fichero de cabeceras: ",(0,r.jsx)(i.code,{children:'#import "FPhiWidgetSelphi/FPhiWidgetSelphi.h"'})]}),"\n",(0,r.jsxs)(i.li,{children:["Declarar una variable para el widget, de tipo ",(0,r.jsx)(i.code,{children:"FPhiWidget"}),": ",(0,r.jsx)(i.code,{children:"@property FPhiWidget *widget;"})]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Instanciar el widget:"})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-objc",children:'    // Reserva de memoria para la clase y llama al m\xe9todo init. (Constructor)\n    NSError *error = nil;\n    NSBundle *bundle = [NSBundle bundleForClass:[AddUserViewController class]];\n    _widget = [[SelphiWidget alloc] initWithFrontCameraIfAvailable:true resources:[bundle pathForResource:@"fphi-widget-resources-SelphiLive-1.2" ofType:@"zip"] delegate:self error:&error];\n    \n    // Evaluar problemas con permisos de la c\xe1mara y otras situaciones \n    if (error != nil) {\n        switch (error.code) {\n            case FWEUnknown:\n                NSLog(@"Widget - construction error. Unknown error");\n                break;\n                   \n            case FWECameraPermission:\n                NSLog(@"Widget - construction error. Camera permission denied");\n                break;\n        }\n        return;\n    }\n\n    // Inicializaci\xf3n de la c\xe1mara y comienzo del ciclo de extracci\xf3n.\n    [_widget StartExtraction];\n\n    // Carga de la vista del Widget y oculta la vista actual.\n    [self presentViewController:_widget animated:true completion:nil];\n'})}),"\n",(0,r.jsxs)(i.p,{children:["Durante la llamada al constructor se especifica en su primer par\xe1metro la c\xe1mara a utilizar, siendo ",(0,r.jsx)(i.code,{children:"true"})," el valor para usar la c\xe1mara delantera y ",(0,r.jsx)(i.code,{children:"false"})," para la c\xe1mara trasera. El segundo par\xe1metro contiene la clase que implementa los eventos del protocolo de la clase. El tercer par\xe1metro ",(0,r.jsx)(i.code,{children:"error"})," se utiliza para consultar posibles problemas en la creaci\xf3n del widget, como, por ejemplo, no disponer de los permisos de c\xe1mara requeridos."]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"3-configurar-el-widget",children:"3. Configurar el widget"}),"\n",(0,r.jsx)(i.p,{children:"Puedes usar las siguientes propiedades para configurar el widget:"}),"\n",(0,r.jsx)(i.h3,{id:"31-resourcespath",children:"3.1. ResourcesPath"}),"\n",(0,r.jsx)(i.p,{children:"Establece la ruta del archivo de recursos que utilizar\xe1 el widget para su configuraci\xf3n gr\xe1fica."}),"\n",(0,r.jsx)(i.h3,{id:"32-propiedades",children:"3.2. Propiedades"}),"\n",(0,r.jsx)(i.p,{children:"Dispone de las siguientes propiedades para configurar el widget:"}),"\n",(0,r.jsx)(i.h4,{id:"321-livenessmode",children:"3.2.1. livenessMode"}),"\n",(0,r.jsx)(i.p,{children:"Establece el modo liveness del widget.\nLos valores permitidos son:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"LMLivenessNone"}),": Indica que no debe activarse el modo detecci\xf3n de foto en los procesos de autenticaci\xf3n."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"LMLivenessMove"}),": Indica que debe activarse el modo de deteccion de movimiento activo."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"LMLivenessPassive"}),': Indica que la prueba de vida se realizar\xe1 en el servidor, enviando la "BestImage" o el correspondiente "tokenTemplateRaw"']}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"322-stabilizationmode",children:"3.2.2. stabilizationMode"}),"\n",(0,r.jsx)(i.p,{children:"Establece un modo de estabilizaci\xf3n previo a cualquier proceso del widget. Con este modo se obliga al widget a no empezar ning\xfan proceso si el usuario no se encuentra con la cabeza mirando al frente y sin moverla."}),"\n",(0,r.jsx)(i.h4,{id:"323-qrmode",children:"3.2.3. qrMode"}),"\n",(0,r.jsx)(i.p,{children:"Indica si se quiere o no activar la lectura de QR previo al proceso de autenticaci\xf3n."}),"\n",(0,r.jsx)(i.h4,{id:"324-usertags",children:"3.2.4. userTags"}),"\n",(0,r.jsx)(i.p,{children:"Establece 4 bytes con datos que pueden ser configurados por la aplicaci\xf3n principal y que ser\xe1n incorporados a las plantillas generadas por el extractor."}),"\n",(0,r.jsx)(i.h4,{id:"325-locale",children:"3.2.5. locale"}),"\n",(0,r.jsx)(i.p,{children:"Fuerza al widget a utilizar la configuraci\xf3n de idioma indicado por el par\xe1metro locale.\nEste par\xe1metro acepta tanto un c\xf3digo de idioma (p. ej. \u2018en\u2019) como un c\xf3digo de identificaci\xf3n regional (p. ej. \u2018en_US\u2019). Si el archivo de recursos del widget no tuviera una localizaci\xf3n para el \u2018locale\u2019 seleccionado su configuraci\xf3n pasar\xeda a utilizar el idioma por defecto."}),"\n",(0,r.jsx)(i.h4,{id:"326-logimages",children:"3.2.6. logImages"}),"\n",(0,r.jsxs)(i.p,{children:["Activa o no el retorno de la lista de im\xe1genes que se han capturado durante la ejecuci\xf3n de proceso de extracci\xf3n. Si el par\xe1metro de entrada se encuentra a ",(0,r.jsx)(i.code,{children:"true"}),", se devolver\xe1 la lista de im\xe1genes procesadas. En caso contrario, devolver\xe1 una lista vac\xeda."]}),"\n",(0,r.jsx)(i.h4,{id:"327-tutorialflag",children:"3.2.7. tutorialFlag"}),"\n",(0,r.jsx)(i.p,{children:"Establece la opci\xf3n de mostrar un tutorial del proceso que se va a realizar a continuaci\xf3n. Una vez concluya el tutorial, el widget continuar\xe1 con el proceso configurado."}),"\n",(0,r.jsx)(i.h4,{id:"328-debugmode",children:"3.2.8. debugMode"}),"\n",(0,r.jsx)(i.p,{children:"Establece el modo de depuraci\xf3n del widget."}),"\n",(0,r.jsx)(i.h4,{id:"329-videofilename",children:"3.2.9. videoFilename"}),"\n",(0,r.jsx)(i.p,{children:"Establece la ruta absoluta del nombre del archivo en el que se grabar\xe1 un video del proceso de autenticaci\xf3n. La aplicaci\xf3n es la responsable de solicitar los permisos necesarios al tel\xe9fono en caso de que esa ruta requiera de permisos adicionales. El widget, por defecto, no realizar\xe1 ning\xfan proceso de grabaci\xf3n a menos que se especifique una ruta de archivo mediante esta propiedad."}),"\n",(0,r.jsx)(i.h4,{id:"3210-showaftercapture",children:"3.2.10. showAfterCapture"}),"\n",(0,r.jsx)(i.p,{children:"Activa una preview de la selfie obtenida para que el usuario pueda aceptar la captura o repetirla."}),"\n",(0,r.jsx)(i.h4,{id:"3211-extractionduration",children:"3.2.11 extractionDuration"}),"\n",(0,r.jsx)(i.p,{children:"Configura la cantidad de tiempo que el widget permanecer\xe1 extrayendo las caracteristicas faciales del usuario."}),"\n",(0,r.jsx)(i.p,{children:"Los valores posibles son:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"FPhiWidgetExtractionDurationShort"}),": Duraci\xf3n de la extracci\xf3n de 1 segundo. (Por defecto)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"FPhiWidgetExtractionDurationMedium"}),": Duraci\xf3n de la extracci\xf3n de 2 segundos."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"FPhiWidgetExtractionDurationLong"}),": Duraci\xf3n de la extracci\xf3n de 3 segundos."]}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"3211-preferredorientation",children:"3.2.11 preferredOrientation"}),"\n",(0,r.jsx)(i.p,{children:"Configura las orientaciones que el widget permitir\xe1 en la ejecuci\xf3n."}),"\n",(0,r.jsx)(i.p,{children:"Los posibles valores son:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"FPhiWidgetOrientationFullSensor"}),": Todas las orientaciones son permitidas."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"FPhiWidgetOrientationFullSensorNoReverse"}),": Todas las orientaciones excepto portrait invertido son permitidas."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"FPhiWidgetOrientationPortrait"}),": Portrait permitida. (Por defecto)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"FPhiWidgetOrientationLandscapeLeft"}),": Landscape izquierda permitida."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"FPhiWidgetOrientationLandscapeRight"}),": Landscape derecha permitida."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"FPhiWidgetOrientationPortraitReverse"}),": Portrait invertido permitida."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"FPhiWidgetOrientationPortraitSensor"}),": Portrait y portrait invertido permitidas."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"FPhiWidgetOrientationLandscapeSensor"}),": Landscape izquierda y derecha permitidas."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"FPhiWidgetOrientationLocked"}),": Todas las orientaciones permitidas pero el widget no cambiar\xe1 de orientaci\xf3n din\xe1micamente."]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"33-m\xe9todos",children:"3.3. M\xe9todos"}),"\n",(0,r.jsx)(i.p,{children:"El widget dispone de los siguientes m\xe9todos:"}),"\n",(0,r.jsx)(i.h4,{id:"330-setlicense",children:"3.3.0. setLicense"}),"\n",(0,r.jsx)(i.p,{children:"Establece el contenido de licencia que deber\xe1 utilizarse para acceder a algunas caracteristicas del widget."}),"\n",(0,r.jsx)(i.h4,{id:"331-generatetemplaterawfromuiimageuiimage-img",children:"3.3.1. generateTemplateRawFromUIImage:(UIImage *)img"}),"\n",(0,r.jsx)(i.p,{children:"Genera un templateRaw a partir de una imagen nativa de iOS. Esta llamada es est\xe1tica por lo que no requiere del lanzamiento del widget para realizar esta operaci\xf3n."}),"\n",(0,r.jsx)(i.h4,{id:"332-generatetemplaterawfromnsdatansdata-img",children:"3.3.2. generateTemplateRawFromNSData:(NSData *)img"}),"\n",(0,r.jsx)(i.p,{children:"Genera un templateRaw a partir de un NSData. Este NSData debe contener la representaci\xf3n de la imagen en formato jpg o png. Esta llamada es est\xe1tica por lo que no requiere del lanzamiento del widget para realizar esta operaci\xf3n."}),"\n",(0,r.jsx)(i.h4,{id:"333-widgetversion",children:"3.3.3 widgetVersion"}),"\n",(0,r.jsx)(i.p,{children:"Devuelve la version actual del widget en formato cadena. Esta llamada es est\xe1tica por lo que no requiere del lanzamiento del widget para realizar esta operaci\xf3n."}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"4-personalizaci\xf3n-del-widget",children:"4. Personalizaci\xf3n del Widget"}),"\n",(0,r.jsxs)(i.p,{children:["El widget permite la personalizaci\xf3n de textos, im\xe1genes, fuentes de letra y colores. La personalizaci\xf3n se realiza mediante el archivo .zip suministrado con el widget. Este zip est\xe1 compuesto de un fichero llamado ",(0,r.jsx)(i.code,{children:"widget.xml"})," que contiene la definici\xf3n de todas las pantallas del widget, cada una de ellas con una serie de elementos los cuales permiten realizar la personalizaci\xf3n. El archivo zip tambi\xe9n contiene una carpeta con recursos gr\xe1ficos y otra carpeta con las traducciones de los textos."]}),"\n",(0,r.jsx)(i.h3,{id:"41-descripci\xf3n-b\xe1sica",children:"4.1. Descripci\xf3n b\xe1sica"}),"\n",(0,r.jsx)(i.h4,{id:"411-personalizaci\xf3n-de-textos",children:"4.1.1. Personalizaci\xf3n de textos"}),"\n",(0,r.jsx)(i.p,{children:"La personalizaci\xf3n de textos se realiza editando los textos de los archivos de traducciones existentes en el .zip de recursos."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"    /strings/strings.es.xml\n    /strings/strings.xml\n"})}),"\n",(0,r.jsx)(i.h4,{id:"412-personalizaci\xf3n-de-im\xe1genes",children:"4.1.2. Personalizaci\xf3n de im\xe1genes"}),"\n",(0,r.jsx)(i.p,{children:"Para personalizar las im\xe1genes que usa el widget se deben a\xf1adir las im\xe1genes en el .zip de recursos. En el zip vienen 3 carpetas:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"    /resources/163dpi\n    /resources/326dpi\n    /resources/489dpi\n"})}),"\n",(0,r.jsx)(i.p,{children:"Estas carpetas corresponden a las diferentes densidades de pantalla y se pueden crear tantas carpetas de densidad como se desee. En estas carpetas est\xe1n las versiones de las im\xe1genes para cada una de las resoluciones."}),"\n",(0,r.jsxs)(i.p,{children:["Es necesario a\xf1adir las im\xe1genes en todas las carpetas, ya que una vez determinada la resoluci\xf3n \xf3ptima para el dispositivo, el widget s\xf3lo carga im\xe1genes de la carpeta con la resoluci\xf3n elegida. Las im\xe1genes son referenciadas desde el archivo ",(0,r.jsx)(i.code,{children:"widget.xml"}),"."]}),"\n",(0,r.jsx)(i.h4,{id:"413-personalizaci\xf3n-de-colores",children:"4.1.3. Personalizaci\xf3n de colores"}),"\n",(0,r.jsxs)(i.p,{children:["La personalizaci\xf3n de los colores de los botones se realiza desde el archivo ",(0,r.jsx)(i.code,{children:"widget.xml"}),". En \xe9l se puede personalizar cualquier color de cualquier elemento gr\xe1fico que aparece en el widget. Simplemente basta con modificar el color de la propiedad deseada."]}),"\n",(0,r.jsx)(i.h4,{id:"414-personalizaci\xf3n-de-tipo-de-fuente-de-letra",children:"4.1.4. Personalizaci\xf3n de tipo de fuente de letra"}),"\n",(0,r.jsxs)(i.p,{children:["Los archivos de tipograf\xeda deben colocarse en la carpeta ",(0,r.jsx)(i.code,{children:"/resources/163dpi"})," y una vez ah\xed pueden ser referenciados desde el archivo ",(0,r.jsx)(i.code,{children:"widget.xml"}),".\nPara cambiar el tipo de letra de un elemento de texto bastar\xeda con modificar la propiedad \u2018font\u2019 y poner el nombre del archivo correspondiente.\nEn el siguiente apartado se ampliar\xe1 la informaci\xf3n acerca del contenido del bundle de recursos y el modo de modificar."]}),"\n",(0,r.jsx)(i.h3,{id:"42-descripci\xf3n-avanzada",children:"4.2. Descripci\xf3n avanzada"}),"\n",(0,r.jsx)(i.h4,{id:"421-widgetxml",children:"4.2.1. Widget.xml"}),"\n",(0,r.jsx)(i.p,{children:"Este fichero contiene la definici\xf3n de todas las propiedades que son configurables en los procesos de autenticaci\xf3n. Est\xe1 dividido por pantallas de navegaci\xf3n y dentro de cada etiqueta de pantalla se encuentran todas las propiedades que pueden modificarse."}),"\n",(0,r.jsx)(i.h4,{id:"422-carpeta-strings",children:"4.2.2. Carpeta strings"}),"\n",(0,r.jsxs)(i.p,{children:["Esta carpeta contiene un fichero ",(0,r.jsx)(i.code,{children:"strings.xml"})," por cada traducci\xf3n que se desee soportar. El nombre debe estar formado de la siguiente manera:"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"    strings.(idioma).xml\n"})}),"\n",(0,r.jsxs)(i.p,{children:["Siendo (idioma) el c\xf3digo del idioma. Por ejemplo, ",(0,r.jsx)(i.code,{children:"strings.es.xml"})," ser\xeda la traducci\xf3n en castellano, ",(0,r.jsx)(i.code,{children:"strings.en.xml"})," la traducci\xf3n en ingl\xe9s, ",(0,r.jsx)(i.code,{children:"strings.es_ES.xml"})," el espa\xf1ol de Espa\xf1a o ",(0,r.jsx)(i.code,{children:"strings.es_AR.xml"})," el espa\xf1ol de Argentina."]}),"\n",(0,r.jsx)(i.p,{children:"Se puede forzar el idioma o dejar que el widget lo escoja en funci\xf3n de la configuraci\xf3n del dispositivo. A la hora de decidir cu\xe1l es el idioma a aplicar se sigue el siguiente orden:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:'Buscar por c\xf3digo de localizaci\xf3n (por ejemplo, "es_AR").'}),"\n",(0,r.jsx)(i.li,{children:'Si no encuentra ninguna que coincida, buscar\xeda uno para el idioma gen\xe9rico (es decir, en este caso ser\xeda "es").'}),"\n",(0,r.jsx)(i.li,{children:"Si tampoco existiese ning\xfan resultado, entonces usar\xeda el idioma por defecto."}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:'A nivel de c\xf3digo es posible seleccionar la localizaci\xf3n mediante la propiedad locale. Este par\xe1metro acepta un string con el c\xf3digo de lenguaje que se desea utilizar (por ejemplo, "es" o "es_ES").'}),"\n",(0,r.jsx)(i.h4,{id:"423-carpeta-resources",children:"4.2.3. Carpeta resources"}),"\n",(0,r.jsx)(i.p,{children:"Contiene las carpetas con todos los recursos necesarios para poder modificarse, divididos en densidades. Es obligatorio generar las im\xe1genes en todas las densidades ya que el widget espera encontrarlas en la carpeta correspondiente a la densidad del dispositivo. Tambi\xe9n se pueden crear nuevas carpetas con la densidad deseada."}),"\n",(0,r.jsx)(i.h4,{id:"424-elemento-background",children:"4.2.4. Elemento BACKGROUND"}),"\n",(0,r.jsx)(i.p,{children:"El elemento background se compone de 4 segmentos a los que se puede dar color independientemente:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"top"}),": define el color de fondo el segmento o panel superior."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"middle_top"}),": define el color de fondo del segmento o panel donde est\xe1 situada la imagen de la c\xe1mara."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"middle_bottom"}),": define el color de fondo el segmento o panel situado debajo de la imagen de la c\xe1mara."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"bottom"}),": define el color de fondo el segmento o panel inferior."]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Tambi\xe9n se pueden configurar ciertas propiedades que se usan solo en pantallas espec\xedficas. A continuaci\xf3n, las enumeramos haciendo referencia a las pantallas en la que son utilizadas:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"pagination_separator (RegistrationTips, FaceMovementTips)"}),": define el color de la separaci\xf3n entre el panel inferior y el panel de debajo de la c\xe1mara."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"mirror_border_color (RegistrationTips, FaceMovementTips)"}),": define el color del borde del c\xedrculo que rodea a la imagen de la c\xe1mara o del video de los consejos de registro. A este elemento tambi\xe9n se le llama mirror o espejo."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"mirror_border_width (RegistrationTips, FaceMovementTips)"}),": define el ancho del borde del c\xedrculo que rodea a la imagen de la c\xe1mara o del video de los consejos de registro. Si no dese\xe1ramos mostrar un borde, tendr\xedamos que asignar un valor de 0.0 a esta propiedad."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"mirror_mist_color (StartExtractor)"}),": define el color del c\xedrculo central en la pantalla previa a la extracci\xf3n. Este color deber\xe1 tener siempre un valor de transparencia ya que debemos dejar ver la imagen de la c\xe1mara para que el usuario pueda colocarse correctamente antes de empezar con la extracci\xf3n. El formato del color cuando se incluye un valor de transparencia es RGBA (El valor de alpha se indicar\xe1 con el \xfaltimo byte)."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"mirror_color (Results)"}),": define el color de fondo del c\xedrculo que muestra los resultados del proceso de registro."]}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"425-elemento-button",children:"4.2.5. Elemento BUTTON"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"background"}),": define el color de fondo el bot\xf3n."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"decorator"}),": define el color de la sombra del bot\xf3n."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"foreground"}),": define el color de la fuente del bot\xf3n en caso de que el contenido sea un texto."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"content_type"}),": define el tipo de contenido del bot\xf3n. Existen 2 tipos diferentes:","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"resource_id: Content debe contener el nombre de un archivo en el bundle de recursos."}),"\n",(0,r.jsx)(i.li,{children:"text_id: Content debe contener el identificador de un literal del fichero de traducciones del bundle de recursos."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"content"}),": define el contenido del bot\xf3n. Puede ser tanto una imagen como el identificador de un literal."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"align"}),": Define la alineaci\xf3n del contenido del bot\xf3n, ya sea una imagen o un texto."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"font"}),": Define el tipo de letra utilizado si el contenido del bot\xf3n es un texto."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"font_size"}),": Define el tama\xf1o de la letra si el contenido del bot\xf3n es un texto."]}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"426-elemento-text",children:"4.2.6. Elemento TEXT"}),"\n",(0,r.jsx)(i.p,{children:"Los elementos text se utilizan para definir el aspecto gr\xe1fico de los textos de cada una de las pantallas del widget. Estas son las propiedades que se pueden modificar:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"color"}),": define el color del texto."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"font"}),": define el tipo de fuente utilizado para mostrar el texto."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"font_size"}),": define el tama\xf1o de la fuente."]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Hay que tener en cuenta que en la pantalla de resultados del registro los dos textos que definen la calidad del registro tienen forzado su color al color de la barra que indica la puntuaci\xf3n."}),"\n",(0,r.jsx)(i.h4,{id:"427-elemento-image",children:"4.2.7. Elemento IMAGE"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"value"}),": define el nombre del archivo que contiene la imagen a mostrar."]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Los elementos image solo tienen la propiedad que define el archivo donde se encuentra la imagen f\xedsicamente en el bundle de recursos. Las im\xe1genes se obtienen del bundle buscando en la carpeta apropiada de acuerdo con la densidad del dispositivo."}),"\n",(0,r.jsx)(i.h4,{id:"428-elemento-video",children:"4.2.8. Elemento VIDEO"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"value"}),": define el nombre del archivo que contiene el video a mostrar."]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Los elementos video solo tienen la propiedad que define el archivo donde se encuentra el video f\xedsicamente en el bundle de recursos."}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"5-mensajes-del-widget",children:"5. Mensajes del widget"}),"\n",(0,r.jsxs)(i.p,{children:["La comunicaci\xf3n desde el widget hacia la aplicaci\xf3n una vez ha terminado la extracci\xf3n de caracter\xedsticas faciales se realiza mediante eventos. Para indicar qu\xe9 clase implementar\xe1 estos eventos (implementaci\xf3n del protocolo), debe indicarlo en el segundo par\xe1metro del m\xe9todo ",(0,r.jsx)(i.code,{children:"init"})," (en este ejemplo, ",(0,r.jsx)(i.code,{children:"self"}),"):"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-objc",children:'    _widget = [[SelphiWidget alloc] initWithFrontCameraIfAvailable:true resources:[bundle pathForResource:@"fphi-widget-resources-SelphiLive-1.2" ofType:@"zip"] delegate:self error:&error];\n'})}),"\n",(0,r.jsxs)(i.p,{children:["En este caso, al indicar ",(0,r.jsx)(i.code,{children:"self"})," se indica que se implementar\xe1 en la propia clase que realiza la llamada."]}),"\n",(0,r.jsx)(i.h3,{id:"51-eventos-del-protocolo",children:"5.1. Eventos del protocolo"}),"\n",(0,r.jsx)(i.p,{children:"El widget iOS proporcionado por FacePhi es el responsable de realizar la extracci\xf3n de las caracter\xedsticas faciales del usuario, y de esta forma generar una plantilla facial (Raw) representativa del mismo."}),"\n",(0,r.jsx)(i.h4,{id:"511-evento-extractionfinished",children:"5.1.1. Evento ExtractionFinished"}),"\n",(0,r.jsx)(i.p,{children:"Se ejecuta al finalizar un proceso completo de extracci\xf3n."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-objc",children:"    (void) ExtractionFinished {\n\n        // Elementos disponibles de la extracci\xf3n\n        FPhiWidgetExtractionData *results = _widget.results;\n        FPBExtractionResult *result = results.result;\n\n        // Plantilla obtenida de la extracci\xf3n\n        NSData *templateRaw = [result getTemplateRaw];\n\n        // Mejor Imagen del proceso\n        UIImage *bestImage = results.bestImage.image;\n\n        // Mejor Imagen del proceso recortada al tama\xf1o de la cara\n        UIImage *bestImageCropped = results.bestImageCropped.image;\n    }\n"})}),"\n",(0,r.jsxs)(i.p,{children:["El objeto ",(0,r.jsx)(i.code,{children:"results"})," contiene los siguientes campos:"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"templateRaw"}),": Devuelve la plantilla en bruto que se genera despu\xe9s del proceso de extracci\xf3n."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"images"}),": Si el flag ",(0,r.jsx)(i.code,{children:"logImages"})," se activ\xf3, devuelve las im\xe1genes que se obtienen durante el proceso de extracci\xf3n. Las im\xe1genes se devuelven ordenadas por el instante de tiempo en el que se obtubieron."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"bestImage"}),": Devuelve la mejor imagen extra\xedda del proceso de autenticaci\xf3n. Esta imagen es la imagen con el tama\xf1o original extra\xedda de la c\xe1mara."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"bestImageCropped"}),': Devuelve una imagen recortada centrada en la cara del usuario. Esta imagen se obtiene a partir de la "bestImage". \xc9sta es la imagen que se deber\xe1 utilizar como imagen caracter\xedstica del usuario que realiz\xf3 el proceso a modo de \u2018avatar\u2019']}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"livenessDiagnostic"}),": Devuelve el diagn\xf3stico final de la ejecuci\xf3n del proceso de liveness."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"qrData"}),": Devuelve los datos del c\xf3digo QR capturado."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"iadBundle"}),": Devuelve los datos encriptados del analisis de deteccion de ataques de inyecci\xf3n de video."]}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"512-evento-extractionfailed",children:"5.1.2. Evento ExtractionFailed"}),"\n",(0,r.jsx)(i.p,{children:"Se ejecuta si ha existido alg\xfan problema en el proceso de extracci\xf3n."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-objc",children:"    (void) ExtractionFailed:(NSError *)error { \n    }\n"})}),"\n",(0,r.jsx)(i.h4,{id:"513-evento-extractioncancelled",children:"5.1.3. Evento ExtractionCancelled"}),"\n",(0,r.jsx)(i.p,{children:"Se ejecuta si el usuario pulsa sobre la opci\xf3n de cancelar."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-objc",children:"    (void)ExtractionCancelled {\n    }\n"})}),"\n",(0,r.jsx)(i.h4,{id:"514-evento-extractiontimeout",children:"5.1.4. Evento ExtractionTimeout"}),"\n",(0,r.jsx)(i.p,{children:"Se ejecuta si el widget supera el tiempo m\xe1ximo permitido sin detectar caras."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-objc",children:"    (void)ExtractionTimeout {\n    }\n"})}),"\n",(0,r.jsx)(i.h4,{id:"515-evento-onevent",children:"5.1.5. Evento onEvent"}),"\n",(0,r.jsxs)(i.p,{children:["Se ejecuta cada vez que el widget tiene que comunicar eventos importantes que ocurren durante el transcurso de la ejecuci\xf3n.",(0,r.jsx)(i.br,{}),"\n","Esta funci\xf3n recibe como par\xe1metros el tiempo en el que se lanz\xf3 el evento, codificado como un ",(0,r.jsx)(i.code,{children:"NSDate"}),", el tipo de evento que se ha producido y la informaci\xf3n adicional asociada a dicho evento. Los eventos recibidos son principalmente de 3 tipos:"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Eventos relacionados con cambios de pantalla o de estados en los que se encuentra el widget."}),"\n",(0,r.jsx)(i.li,{children:"Eventos de usuario como pueden ser pulsaciones de botones o movimientos tipo swipe."}),"\n",(0,r.jsx)(i.li,{children:"Eventos relacionados con los procesos que se est\xe1n llevando acabo, como pueden ser errores por ausencia de cara, por movimientos incorrectos, o no hacer caso a las indicaciones que se reciben, entre otros."}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Mediante estos eventos se comunica a la aplicaci\xf3n principal aquellos datos que puedan ser de inter\xe9s a la hora de analizar el comportamiento de los usuarios cuando usan la tecnolog\xeda."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-objc",children:"    (void)onEvent:(NSDate *)time type:(NSString *)type info:(NSString *)info {\n    }\n"})})]})}function u(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453(e,i,n){n.d(i,{R:()=>s,x:()=>o});var a=n(96540);const r={},l=a.createContext(r);function s(e){const i=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(l.Provider,{value:i},e.children)}}}]);